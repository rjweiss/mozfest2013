$(document).ready(function(){"use strict";function a(){$(".dropdown").removeClass("open")}$("html").on("click",a),$("body").delegate("[data-toggle]","click",function(b){b.stopPropagation(),b.preventDefault();var c=$(b.currentTarget),d=c.closest("."+c.attr("data-toggle")),e="disabled"!=d.attr("data-dropdown")&&!d.hasClass("open");d.attr("data-dropdown","enabled"),a(),e&&d.addClass("open")}),DISQUS.Bus.on("window.click",a)}),DISQUS.define("next.realtime",function(a){"use strict";function b(){i.apply(this,arguments),this.reqCounter=0,this.marker=0,this.interval=1,this._boundOnError=_.bind(this.onError,this),this._boundOnLoad=_.bind(this.onLoad,this),this._boundOnProgress=_.bind(this.onProgress,this)}function c(){i.apply(this,arguments),this.handshakeSuccess=null,this.interval=1,this._boundOnOpen=_.bind(this.onOpen,this),this._boundError=_.bind(this.onError,this),this._boundClose=_.bind(this.onClose,this),this._boundMessage=_.compose(_.bind(this.onMessage,this),function(a){return JSON.parse(a.data)})}var d=DISQUS.use("next.utils"),e=2,f=120,g=function(){},h=function(){throw new Error("Pipe class cannot be used directly.")},i=function(a,b){this.channel=a,this.since=b,this.connection=null,this.paused=!1,this._msgBuffer=[],this._boundOpen=_.bind(this.open,this)};_.extend(i.prototype,Backbone.Events,{getUrl:function(a){var b={};return this.since&&(b.since=this.since),_.extend(b,a),DISQUS.serialize(this.baseUrl+this.channel,b)},onMessage:function(a){var b=a.message_type,c=a.firehose_id;this.lastEventId=c,DISQUS.log("RT: new message:",b,c);var d={type:b,data:a.message_body,lastEventId:c};this.trigger(b,d)},_msgToBuffer:function(){this._msgBuffer.push(_.toArray(arguments))},pause:function(a){this.paused||(this.paused=!0,this._trigger=this.trigger,this.trigger=a===!1?g:this._msgToBuffer,DISQUS.log("RT: paused, buffered: %s",a!==!1))},resume:function(){if(this.paused){this.paused=!1,this.trigger=this._trigger,DISQUS.log("RT: resumed, buffered messages: %s",this._msgBuffer.length);for(var a;a=this._msgBuffer.shift();)this.trigger.apply(this,a)}},open:h,close:function(){var a=this.connection;return a?(this.connection=null,a):!1}}),_.extend(b.prototype,i.prototype,{baseUrl:DISQUS.urls.realertime+"/api/2/",onError:function(){this.connection&&(this.connection=null,this.trigger("error",this),this.interval<=f&&(this.interval*=e),d.sendStat("rt_streampipe_error"),DISQUS.logError("RT: Connection error, backing off %s secs",this.interval),_.delay(this._boundOpen,1e3*this.interval))},onLoad:function(){this.connection&&(this.connection=null,this.since=null,this.trigger("success",this),d.sendStat("rt_streampipe_close"),_.defer(this._boundOpen))},onProgress:function(){if(this.connection){var a,b=this.connection.responseText,c=0;if(b&&!(this.marker>=b.length)){a=b.slice(this.marker).split("\n");for(var d,e,f,g=a.length,h=0;g>h;h++)if(d=a[h],c+=d.length+1,e=d.replace(/^\s+|\s+$/g,"")){try{f=JSON.parse(e)}catch(i){if(h===g-1){c-=d.length+1;break}DISQUS.log("RT: unable to parse: ",e,d);continue}this.onMessage(f)}else DISQUS.log("RT: ignoring empty row...");c>0&&(this.marker+=c-1)}}},open:function(){this.close();var a=this.connection=d.CORS.request("GET",this.getUrl({bust:++this.reqCounter}),this._boundOnLoad,this._boundOnError);if(!a)return d.sendStat("rt_streampipe_cors_unavail"),void DISQUS.log("RT: Cannot use any cross-domain request tool with StreamPipe. Bailing out.");a.onprogress=this._boundOnProgress,this.connection=a,this.marker=0;try{a.send()}catch(b){this.connection=null,d.sendStat("rt_streampipe_cors_fail"),DISQUS.log("RT: Attempt to send a CORS request failed.")}},close:function(){var a=i.prototype.close.apply(this);return a&&a.abort()}}),_.extend(c.prototype,i.prototype,{baseUrl:("https:"===a.location.protocol?"wss:":"ws:")+DISQUS.urls.realertime+"/ws/2/",onOpen:function(){DISQUS.log("RT: [Socket] Connection established."),this.handshakeSuccess=!0,this.since=null},onError:function(){if(this.connection){if(this.connection=null,!this.handshakeSuccess)return DISQUS.log("RT: [Socket] Error before open, bailing out."),d.sendStat("rt_socketpipe_fail"),this.trigger("fail"),void 0;this.trigger("error"),this.interval<=f&&(this.interval*=e),d.sendStat("rt_socketpipe_error"),DISQUS.logError("RT: Connection error, backing off %s secs",this.interval),_.delay(this._boundOpen,1e3*this.interval)}},onClose:function(a){if(this.connection){if(!a.wasClean)return d.sendStat("rt_socketpipe_unclean_close"),this.onError(),void 0;this.connection=null,d.sendStat("rt_socketpipe_clean_close"),DISQUS.log("RT: [Socket] Connection closed. Restarting..."),this.trigger("close"),this.open()}},open:function(){this.close();var b=this.connection=new a.WebSocket(this.getUrl());b.onopen=this._boundOnOpen,b.onerror=this._boundError,b.onmessage=this._boundMessage,b.onclose=this._boundClose},close:function(){var a=i.prototype.close.apply(this);return a&&a.close()}});var j={_wsSupported:a.WebSocket&&2===WebSocket.CLOSING,initialize:function(a,d,e,f){this.close(),this._initArgs=[a,d,e,f];var g=this._wsSupported,h=g?c:b,i=this.pipe=new h(a,d);_.chain(e).pairs().each(function(a){i.on(a[0],a[1],f)}),g&&i.on("fail",function(){this._wsSupported=!1,i.off(),this.initialize.apply(this,this._initArgs)},this),i.open()},pause:function(a){this.pipe&&this.pipe.pause(a)},resume:function(){this.pipe&&this.pipe.resume()},close:function(){this.pipe&&(this.pipe.close(),this.pipe=null)}};return $(a).on("unload",_.bind(j.close,j)),{Pipe:i,StreamPipe:b,SocketPipe:c,Manager:j}}),DISQUS.define("next.lounge.tracking",function(a){"use strict";function b(a,b){var c=e.isMobile(a),g=b.initialData,h=b.switches;_.isObject(g)&&!_.isEmpty(g)&&(b.session.once("identify",function(){var e=this,i=e.user.id;if(i&&d.overwrite({user_id:i}),h.enabled("juggler_thread_onReady")){var j={thread_slug:g.thread.slug,user_type:e.user.get("user_type")||"anon",referrer:a.document.referrer,theme:"next"};if(d.emit("init_embed",j),c&&d.emit("activity",{verb:"view",object_type:"page",object_id:g.thread.slug,zone:b.isFullscreen?"next.mobile":"next"}),h.enabled("dark_jester")){var k=DISQUS.juggler.client("jester",!0);k.load(_.extend(d.copySettings(),{url:DISQUS.urls.jester+"/event.js"})),k.emit("init_embed",j)}f.init({version:b.isFullscreen?"next-mobile":"next",forum:g.forum.id,features:g.features,session:e.user}),b.session.on("change:id",function(a){f.setSession(a),f.trackEvent(a.id?"login":"logout")})}}),d.load({disable:!h.enabled("juggler_enabled"),url:DISQUS.urls.juggler+"/event.js",disableSSL:h.enabled("next_disable_ssl_juggler"),thread:g.thread.id,forum:g.forum.id,forum_id:g.forum.pk}),b.on({inViewport:function(){f.trackEvent("view_embed"),b.off("inViewport")},"uiAction:createPost":function(a){b.session.user.id||f.setSession("guest"),null!=a.get("parent")?f.trackEvent("post_comment_reply"):f.trackEvent("post_comment")},"uiCallback:postCreated":function(a){if(c){var e={object_type:"comment",object_id:a.id,verb:"post"};a.has("parent")&&(e.target_type="comment",e.target_id=a.get("parent").id),b.isFullscreen&&(e.experiment="mobile-next"),d.emit("activity",e)}},"uiAction:postUpvote":function(){f.trackEvent("like_comment")},"uiAction:postDownvote":function(){f.trackEvent("dislike_comment")},"uiAction:upvotersCardShow":function(){f.trackEvent("upvoters_card_shown")},"uiAction:showProfileFromUpvotes":function(){f.trackEvent("upvoters_profile_click")},"uiAction:threadUpvote":function(){f.trackEvent("like_thread")},"uiAction:postShare":function(a){f.trackEvent("share_comment_"+a)},"uiAction:threadShare":function(a){f.trackEvent("share_thread_"+a)},"uiAction:navigate":function(a){var b={community:"community",dashboard:"mydisqus",network:"mydisqus_network"}[a];b&&f.trackEvent("open_"+b)},"uiAction:followUser":function(){f.trackEvent("follow_user")},"uiAction:openLogin":function(a){f.trackEvent("open_login_"+a)},"uiAction:finishRegistrationEmbed":function(){f.trackEvent("finish_registration_embed")},"uiAction:finishRegistrationWindow":function(){f.trackEvent("finish_registration_window")},"uiAction:finishAccountComplete":function(){f.trackEvent("finish_account_complete")}}))}var c=DISQUS.use("next.intelligence"),d=DISQUS.juggler.client("juggler",!0),e=DISQUS.use("next.utils"),f=new c.Intelligence;return{init:function(c){b(a,c)}}}),DISQUS.define("next.lounge.views",function(){"use strict";function a(a){var b=a&&a.match(/discovery\-([\w\-]+)/);return b&&b[1]}function b(a,b){var c="[data-action^="+b+"]",d=$(a);d=d.is(c)&&d||d.closest(c);var e=d.attr("data-action")||":",f=e.split(":")[1];return f}var c,d=DISQUS.use("next.lounge.views"),e=DISQUS.use("next.models"),f=DISQUS.use("next.collections"),g=DISQUS.use("next.utils"),h=DISQUS.use("next.realtime"),i=DISQUS.use("Bus"),j=DISQUS.strings.get,k=DISQUS.use("urls"),l=DISQUS.use("next.lounge.views.media"),m=g.preventDefaultHandler,n=350,o={_getShortUrl:function(a){var b=this,c=this._shareUrl(),d=c,e=_.extend({url:c,source:"disqus_embed_next"},this.model.relatedIds());DISQUS.api.call("shortener/create.json",{method:"POST",data:e,timeout:5e3,success:function(a){var b=a.code,c=a.response;0===b&&(d=c.url)},complete:function(){a.call(b,d)}})},_shareWaitPopup:function(a){return window.open(DISQUS.urls.loading,"_blank",a||"width=550,height=520")},share:function(a){this.sharers[a].call(this)},sharers:{twitter:function(){var a="https://twitter.com/intent/tweet",b=this._shareWaitPopup();this._getShortUrl(function(c){b.location=DISQUS.serialize(a,{url:c,text:this.model.twitterText(c)})})},facebook:function(){var a="https://www.facebook.com/sharer.php",b=this._shareWaitPopup("width=655,height=352");this._getShortUrl(function(c){b.location=DISQUS.serialize(a,{u:c})})}}},p={alert:function(a,b){b?_.isString(b)&&(b={type:b}):b={},this.dismissAlert();var c=this._alert=new O(_.extend({message:a},b));return this.updateDom(function(){c.render(),this._alertSelector?this.$el.find(this._alertSelector).prepend(c.el):this.el.parentNode.insertBefore(c.el,this.el)},this),c},dismissAlert:function(){this._alert&&this._alert.dismiss()},setAlertSelector:function(a){this._alertSelector=a}},q=Backbone.View.extend({events:{"click [data-action^=auth\\:]":"handleAuth","click [data-action=verify-email]":"verifyEmail","click [data-action=audiencesync]":"audienceSync","click [data-action=profile]":"handleShowProfile","click [data-action=sort]":"handleSort","click [data-action=close-thread]":"closeThread","click [data-action=open-thread]":"openThread","click [data-action=debug]":"renderDebugInfo","click [data-action=repair]":"repairThread","click [data-action=toggle-media]":"toggleMedia"},STREAMING_MAX_VISIBLE:250,MEDIA_PERSISTED_WIDTHS:[320,480,600,800],MAX_MEDIA_HEIGHT:480,initialize:function(a){c=this,a=a||{};var b=a.jsonData||{};this.initialData=b.response||{},this.profileWindowName=_.globalUniqueId("disqus_"),this.isFullscreen=window.parent===window,g.extract(b,"response.forum.id")&&(DISQUS.urls.moderate=g.updateURL(DISQUS.urls.moderate,{hostname:b.response.forum.id+"."})),e.Session.setDefaults(this.initialData.session),this.session=e.Session.get(),this.bindSessionEvents(),this.forum=new e.Forum,this.forum.set(this.initialData.forum),this.thread=new e.Thread(this.initialData.thread,{forum:this.forum,postCursor:b.cursor,moderators:(this.initialData.thread||{}).moderators,order:b.order}),this.posts=this.thread.posts,this.postsToAppend=[],this.postsToPrepend=[],this.switches=new f.SwitchCollection(_.map(DISQUS.config.switches,function(a){return{id:a,enabled:!0}})),this.states={realtimeIndicatorsCreated:!1,ravenConfigured:!1,streamingPaused:!1,inViewport:this.isFullscreen,nearViewport:this.isFullscreen},this.forum.get("settings").backplaneEnabled&&this.enableBackplane();var d=_.bind(this.bootstrap,this);window.parent!==window||window.opener?i.on("init",d):_.defer(d),this.setAlertSelector("#layout")},_switchesReady:function(){!this.states.ravenConfigured&&this.switches.enabled("next_raven")&&this.enableRavenLogging(),_.invoke(this.postViews,"manageMessageHeight");var a=this.isLinkAffiliatorEnabled()&&this.isPublisherIdValid();this.switches.enabled("next_track_links")&&(this.events["click a"]=_.wrap(g.logLinkClick,function(b,c){var d=!a||!$(c.currentTarget).is("[rel=nofollow]");return b(c,d)}),this.delegateEvents()),this.initLinkAffiliator()},enableRavenLogging:function(){Raven.config({servers:[DISQUS.urls.raven],logger:"javascript.next",ignoreErrors:["Script error."]}),window.onerror=Raven.process,DISQUS.api.defaults({error:function(a){Raven.captureMessage({name:"API call failed.",message:a})}}),this.states.ravenConfigured=!0,DISQUS.logError.ravenEnabled=!0},enableBackplane:function(){this.backplaneCredentialsReady=!1,this.events["click [data-action=logout]"]=function(a){return this.backplaneCredentialsReady?(a.preventDefault(),i.sendHostMessage("backplane.invalidate",{redirectUrl:DISQUS.urls.logout}),void 0):!0},this.session.on("identify",function(){this.backplaneCredentialsReady&&!this.session.isRegistered()&&(i.sendHostMessage("backplane.invalidate"),this.backplaneCredentialsReady=!1,DISQUS.api.headers({Authorization:null}))},this),i.on("login",function(a){null!==a.backplane&&(this.setBackplaneHeaders(a.backplane),this.fetchSession())},this),i.sendHostMessage("loadBackplane")},setBackplaneHeaders:function(a){var b="Backplane "+JSON.stringify({provider:"janrain",message_id_url:a.messageUrl,channel_name:a.channel,forum_id:this.forum.id});this.backplaneCredentialsReady=!0,DISQUS.api.headers({Authorization:b})},bootstrap:function(b){var c=this,d={};c.config=b=b||{},this.discoveryOverride=a(b.parentWindowHash),b.apiKey&&(d["X-Disqus-Publisher-API-Key"]=b.apiKey),b.remoteAuthS3&&(d["X-Disqus-Remote-Auth"]=b.remoteAuthS3),_.isEmpty(d)||DISQUS.api.headers(d),b.anchorColor&&!function(){var a=g.escapeColor(b.anchorColor);g.addStylesheetRules([[".publisher-anchor-color a",["color",a,!0]],["a.publisher-anchor-color",["color",a,!0]],[".publisher-anchor-hover a:hover",["color",a,!0]],["a.publisher-anchor-hover:hover",["color",a,!0]],[".active .publisher-nav-color:after",["background",a,!0]],[".media-preview .active.publisher-border-color",["border-color",a,!0]],[".publisher-color",["color",a,!1]],[".publisher-color:hover",["color",a,!1]],[".publisher-background-color",["background-color",a,!1]],[".publisher-border-color",["border-color",a,!1]]])}();var e;this.isFullscreen?(this.loadFastClick(),e=k.logout.replace(/\?.*/,""),k.logout=DISQUS.serialize(e,{redirect:window.location.href})):g.injectBaseElement(b.referrer),b.referrer&&(c.thread.currentUrl=b.referrer),b.width&&(document.body.style.width=b.width+"px"),b.permalink&&i.once("embed.rendered",_.bind(c.scrollToPost,c,b.permalink,{highlight:!0})),b.sso&&(DISQUS.templateGlobals.sso=b.sso,c.session.set("sso",b.sso)),this.position=b.initialPosition?b.initialPosition:this.calculatePositionFullscreen(),c.updateModeratorText(),c.initUI(),c.bindBusListeners(),c.posts.reset(this.initialData.posts),c.initSession(),c.thread.on("create",function(a){i.sendHostMessage("posts.create",a.toJSON())}),c.initialized=!0,c._switchesReady()},initUI:function(){var a=$("body");"serif"===this.getTypeface()&&a.addClass("serif"),"dark"===this.getColorScheme()&&a.addClass("dark"),window.Handlebars.lounge.templates(),this.renderLayout(),this.currentSection="conversation",this.bindUIUpdateHandlers(),this.initDeferredViews(),this.once("postsRendered",function(){var a=g.getPageHeight();i.sendHostMessage("mainViewRendered",{height:a}),this._lastHeight=a,this.initRealtime()},this),_.defer(_.bind(this.initUIComponents,this))},initUIComponents:function(){this.findClosestThumbnailSize(),this.renderForm(),this.renderHeader(),this.updatePostCount(),this.initCommunity(),this.initUserMenu(),this.initThreadVotes(),this.initThreadShareMenu(),this.initThreadSubscribe(),this.renderStreamingToggle()},bindUIUpdateHandlers:function(){var a=this,b=a.thread,c=b.posts,d=a.session;b.on({"change:likes":a.updateThreadVotes,"change:userScore":a.updateThreadUserScore,"change:posts":a.updatePostCount},a),b.queue.on("add reset",this.toggleRealtimeNotifications,a),c.on({reset:a.redrawPosts,add:a.addPosts,remove:a.removePost},a),c.on("reset add",a.toggleNoPosts,a),c.on("reset add",a.enableTimestampUpdates,a),d.on("change:id",a.updateThreadSessionData,a),d.on("change:id",a.initDashboard,a),a.on("scrollOffViewport",function(){a.states.realtimeIndicatorsCreated&&"conversation"===a.currentSection&&(i.sendHostMessage("realtime.hideNorth"),i.sendHostMessage("realtime.hideSouth"))}),a.on("scroll",a.handleRealtimeScroll,a),a.on("scroll",function(b){a.position=b,"conversation"===a.currentSection&&(a.conversationPosition=b)}),a.on("postsRendered",a.toggleLoadMorePosts,a),a.on("postsRendered",a.toggleRealtimeNotifications,a);var e=$(window),f=$(document.body),g=f.width(),h=_.debounce(function(){var b=f.width();g!=b&&a.postViews&&(g=b,_.each(a.postViews,function(a){a.manageMessageHeight()}))},50);e.on("resize",h)},initDeferredViews:function(){var a=this;a.deferredViews=[],a.unsortedDeferredViews=[],a.on("scroll",a.processDeferredViews,a),a.isFullscreen&&$(window).on("scroll resize",_.debounce(function(){a.position=a.calculatePositionFullscreen(),a.processDeferredViews()},100)),a.on("domReflow",function(){a.invalidateDeferredViewOffsets(),a.processDeferredViews()}),i.on("window.resize",a.processDeferredViews,a)},updateTimestamps:function(){return!this.postViews||_.size(this.postViews)<1?!1:(_.invoke(this.postViews,"updateRelativeTime"),!0)},enableTimestampUpdates:function(){var a=this,b=6e4;if(!a.timestampUpdateTimer){var c=function(){return a.updateTimestamps()?(a.timestampUpdateTimer=_.delay(c,b),void 0):(a.timestampUpdateTimer=null,void 0)};a.timestampUpdateTimer=_.delay(c,b)}},initSession:function(){!this.switches.enabled("next_lazy_embed")||this.states.inViewport?this.fetchSession():this.once("inViewport",this.fetchSession,this)},bindBusListeners:_.once(function(){this.listenTo(i,{"window.hashchange":function(b){if(this.discoveryOverride=a(b),this.discoveryOverride)return this.fetchSession();var c=b&&b.match(/comment\-([0-9]+)/);c&&this.scrollToPost(c[1],{highlight:!0})},"window.scroll":function(a){this.trigger("scroll",a)},"window.inViewport":function(){this.states.inViewport=!0,this.trigger("inViewport")},"window.nearViewport":function(){this.states.nearViewport=!0,this.trigger("nearViewport")},"window.scrollOffViewport":function(){this.states.inViewport=!1,this.states.nearViewport=!1,this.trigger("scrollOffViewport")},"window.resize":this.resize,"realtime.click":this.handleRealtimeClick,"!auth:success":function(a){a&&(a.sessionId&&DISQUS.api.headers({"X-Sessionid":a.sessionId}),a.message&&this.alert(a.message,{type:"info"}),a.logEvent&&this.trigger("uiAction:"+a.logEvent)),this.fetchSession()},"!audiencesync:grant":function(){this.session.set("audienceSyncVerified",!0)}})}),isLinkAffiliatorEnabled:function(){return this.switches.enabled("enable_link_affiliation")&&g.extract(this,"initialData.forum.settings.linkAffiliationEnabled")&&!this.isHttps()},isPublisherIdValid:function(){var a=g.extract(this,"initialData.forum.pk");return _.isNumber(a)?!0:!1},initLinkAffiliator:function(){if(this.isLinkAffiliatorEnabled()&&this.isPublisherIdValid()&&!this.initLinkAffiliatorCalled){this.initLinkAffiliatorCalled=!0;var a=g.extract(this,"initialData.forum.pk"),b=new V({el:document.body});i.once("affiliationOptions",function(a){a&&_.isNumber(a.timeout)&&b.trigger("options.timeout",a.timeout)}),i.sendHostMessage("loadLinkAffiliator",{clientUrl:DISQUS.urls.linkAffiliatorClient,apiUrl:DISQUS.urls.linkAffiliatorAPI,key:DISQUS.keys.viglinkAPI,id:a})}},loadFastClick:function(){curl(["js!fastclick.js"]).then(function(){FastClick.attach(document.body)})},bindSessionEvents:_.once(function(){this.session.on("change:isReadOnly",function(){this.session.get("isReadOnly")&&this.alert(j("The Disqus comment system is temporarily in maintenance mode. You can still read comments during this time, however posting comments and other actions are temporarily delayed."))},this),this.session.on("identify change:audienceSyncVerified",function(){this.session.get("audienceSyncVerified")&&i.sendHostMessage("session.identify",this.session.user.id)},this),this.session.on("change:discoveryVariant",this.initDiscovery,this)}),fetchSession:function(){var a={thread:this.thread};return this.switches.enabled("discovery_next:override")&&this.discoveryOverride&&(a.discovery=this.discoveryOverride),this.session.fetch(a)},initRealtimeIndicators:function(){if(!this.switches.enabled("disable_realtime_indicators")&&!this.states.realtimeIndicatorsCreated){var a={contents:DISQUS.renderBlock("realtimeIndicator",{orientation:"north"})},b={contents:DISQUS.renderBlock("realtimeIndicator",{orientation:"south"})};i.sendHostMessage("realtime.init",{north:a,south:b}),this.states.realtimeIndicatorsCreated=!0}},insertStreamingComments:_.throttle(function(){var a=this.thread.queue;a.drain(),_.each(a.counters.replies,function(b,c){a.drain(c)})},1e3),_getStyleProperty:function(a){var b=this.forum.get("settings");return this.config.forceAutoStyles||"auto"===b[a]?this.config[a]:b[a]},getTypeface:function(){return this._getStyleProperty("typeface")},getColorScheme:function(){return this._getStyleProperty("colorScheme")},updateModeratorText:function(){var a=this.forum.get("settings");a.moderatorText&&(DISQUS.strings.translations.Mod=a.moderatorText)},handleRealtimeScroll:function(a){if(this.states.inViewport&&this.states.realtimeIndicatorsCreated&&"conversation"===this.currentSection){var b=_.union([this.queueView],_.values(this.postViews)),c=0,d=0;_.each(b,function(b){if(b&&!b.getDirection&&(b=b.queueView),b&&!(b.options.count<=0)){var e=b.getDirection(a);1===e?c+=b.options.count:-1===e&&(d+=b.options.count)}});var e,f="realtime.hideNorth";c>0&&(f="realtime.showNorth",e=DISQUS.renderBlock("realtimeIndicatorText",{num:c,orientation:"north"})),i.sendHostMessage(f,e),f="realtime.hideSouth",e=void 0,d>0&&(e=DISQUS.renderBlock("realtimeIndicatorText",{num:d,orientation:"south"}),f="realtime.showSouth"),i.sendHostMessage(f,e)}},handleRealtimeClick:function(a){var b=this;i.sendHostMessage("realtime.hide"+("north"===a?"North":"South"));var c,d,e,f=_.union([b],_.toArray(b.postViews));f=_.filter(f,function(c){if(c=c.queueView,!c||c.options.count<=0)return!1;var d="north"===a?1:-1;return c.getDirection(b.position)!==d?!1:!0}),f=_.sortBy(f,function(a){return a===b?0:a.offset.top}),c="north"===a?_.last(f):_.first(f),d=c.queueView,c===b?(e=0,d.drainHandler()):(e=c.offset.top-100,d.drainHandler()),q.getInstance().once("domReflow",_.bind(i.sendHostMessage,i,"scrollTo",{top:e}))},toggleRealtimeNotifications:function(){var a=this,b=a.thread.queue;a.updateDom(function(){if(_.defer(function(){i.sendHostMessage("fakeScroll")}),!b.length)return void $("[data-role=realtime-notification]").hide();if(a.thread.get("hasStreaming"))return void a.insertStreamingComments();if(b.counters.comments){var c=a.queueView||new E({model:a.thread,el:a.$el.find("button[data-role=realtime-notification]")});a.queueView=c,c.setCount(b.counters.comments),c.render()}_.each(b.counters.replies,function(b,c){var d=a.thread.posts.get(c);if(d){var e=a.postViews[d.cid];if(e){var f=e.queueView;f||(f=new F({thread:a.thread,postView:e,model:d,el:e.$el.find("[data-role=realtime-notification\\:"+c+"] a")}),e.queueView=f),f.setCount(b),f.render()}}})})},renderDebugInfo:m(function(){if(this.session.user.get("isGlobalAdmin")){for(var a=[],b=0,c=this.switches.models.length;c>b;b++)this.switches.models[b].attributes.enabled&&a.push(this.switches.models[b].id);var d=new T({Shortname:this.thread.get("forum"),"Thread ID":this.thread.get("id"),"Thread slug":this.thread.get("slug"),"Anchor color":g.escapeColor(this.config.anchorColor),Switches:a.join(", ")});d.render(),this.updateDom(function(){var a=document.body;a.insertBefore(d.el,a.firstChild)})}}),repairThread:m(function(){this.session.user.get("isGlobalAdmin")&&DISQUS.api.call("internal/threads/repair.json",{method:"GET",data:{thread:this.thread.get("id")},success:_.bind(this.alert,this,"Thread repair has been queued. Refresh in a few seconds."),error:_.bind(this.alert,this,"An error occurred while repairing thread. Please try again.","error")})}),scrollToPost:function(a,b){b=b||{};var c=this;"conversation"!==c.currentSection&&(b.force=!0),c.mainNav.navTo("conversation");var d=c.$el.find("#post-"+a);return d.length?(b.highlight&&(c.$el.find(".post-content.target").removeClass("target"),d.find(".post-content").first().addClass("target")),i.sendHostMessage("scrollTo",{top:d.offset().top+(b.padding||0),force:b.force||null}),void 0):(DISQUS.api.call("posts/getContext.json",{method:"GET",data:{post:a},success:function(d){var f=_.filter(d.response,function(a){return a.thread==c.thread.get("id")});0!==f.length&&(_.each(f,function(a){a=new e.UniqueModel(e.Post,a),a.requestedByPermalink=!0,c.thread.posts.add(a)}),i.once("embed.resized",_.bind(c.scrollToPost,c,a,b)))}}),void 0)},updateThreadSessionData:function(a){if(a){a.get("thread")&&this.thread.set(a.get("thread"));var b=a.get("votes");b&&"object"==typeof b&&_.each(b,function(a,b){var c=this.posts.get(b);c&&c.set("userScore",a)},this)}},initDashboard:function(){var a=$("#main-nav [data-nav=dashboard]");return this.session.isAnonymous()?a.hide():(a.show(),this.notificationCount=new D({el:a.find("[data-role=notification-count]")[0],session:this.session,max:99}),this.notificationCount.render(),this.session.on("change:notificationCount",function(){this.session.get("notificationCount")<=0&&this.notificationCount.remove()},this),this.dashboard=new H({el:"#dashboard",session:this.session,notifications:this.notifications}),this.dashboard.render(),void 0)},initCommunity:function(){this.community=new N({el:document.getElementById("community"),forum:this.forum})},initUserMenu:function(){var a=this.userMenu=new v({el:this.$el.find("[data-role=logout]")[0],session:this.session,thread:this.thread,referrerUrl:this.config.referrer});this.thread.on("change:isClosed",this.render,this),a.render()},initThreadShareMenu:function(){this.threadShareMenu=new s({el:$("#thread-share-menu")[0],model:this.thread})},initDiscovery:function(a,b){function c(){var c=DISQUS.discovery.init(_.extend({},b,{sourceThread:d.initialData.thread,sourceForum:d.initialData.forum,containerId:"discovery",session:a,sourceThreadUrl:d.thread.currentUrl||document.referrer}));c.on("resize",d.updateDom,d)}var d=this;if(!d.states.initDiscoveryCalled&&(d.states.initDiscoveryCalled=!0,!d.isFullscreen))return b?(curl(["css!styles/discovery.css","js!discovery.js"]).then(function(){window.Handlebars.discovery.templates(),c()}),void 0):void DISQUS.log("Discovery seems not enabled. Check Gargoyle switches or forum settings.")},toggleLoadMorePosts:function(){var a=this.$el.find("#posts [data-role=more]");this.updateDom(function(){var b=this.thread.posts.cursor.hasNext;b?a.show():a.hide()},this)},isHttps:function(){return"https:"===window.location.protocol},isRealtimeEnabled:function(){var a=moment.unix(this.initialData.lastModified);return!this.thread.get("isClosed")&&(this.switches.enabled("realtime_for_oldies")||moment().diff(a,"days")<=7)},realtimeHandlers:{Post:function(a){var b=a.data,c=this.thread;if(!this.thread.get("hasStreaming")||!this.states.streamingPaused){if(!b.id)return void DISQUS.logError("RT: no post ID");if(!b.author||!b.author.id)return void DISQUS.logError("RT: no author or author ID");if(!b.author.name||!b.author.email_md5)return void DISQUS.logError("RT: no author name or email hash");if(!b.post||!b.post.message)return void DISQUS.logError("RT: no post message");if(c.posts.get(b.id)||c.queue.get(b.id))return void DISQUS.log("RT: duplicate: ",b.id);if("approved"!==b.type)return void DISQUS.log("RT: unnaproved: ",b.id);if(b.type===b.type_prev)return void DISQUS.log("RT: Post change message, ignoring for now",b.id);this.thread.incrementPostCount(1);var d=b.post.parent_post.id;if(d="0"!==d?d:null,d&&!c.posts.get(d)&&!c.queue.get(d))return void DISQUS.log("RT: parent is not on this page: ",b.id);var f=b.author.id,g=c.users.get(f);g||(g=new e.UniqueModel(e.User,{id:f,name:b.author.name,emailHash:b.author.email_md5,isAnonymous:"0"===b.author.id}),b.author.avatar&&g.set("avatar",{cache:b.author.avatar,permalink:b.author.avatar}),c.users.add(g)),c.queue.add({id:b.id,userId:g.get("id"),parentId:d,message:b.post.message,createdAt:b.date})}},Vote:function(a){var b=a.data;if(b.id&&b.vote){var c=this.thread,d=c.posts.get(b.vote.recipient_post_id);if(d){DISQUS.log("RT: Vote for post ",d.id);var f=d.votes.get(b.id);f||(DISQUS.log("RT: Creating new vote with id ",b.id),f=new e.Vote({id:b.id}),d.votes.add(f));var g=d._vote(b.vote.vote,f.get("score"));0!==g&&f.set("score",g)}}},ThreadVote:function(a){var b=a.data,c=this.thread;if(b.id&&b.vote&&(!this.session.user.id||b.vote.voter_id!=this.session.user.id)){var d=c.votes.get(b.id);d||(d=new e.ThreadVote({id:b.id}),c.votes.add(d));var f=c._vote(b.vote.vote,d.get("score"));0!==f&&d.set("score",f)}},IsTyping:function(a){var b=a.data,c=this.thread;if(b.thread_id==c.id&&b.post.parent_post.id){var d=c.posts.get(b.post.parent_post.id);d&&(d.usersTyping.get(a.lastEventId)||d.usersTyping.count()<=0&&!b.typing||d.usersTyping.add(new e.TypingUser({id:a.lastEventId,typing:b.typing})))}}},initRealtime:function(){var a=h.Manager;if(!a.pipe&&this.isRealtimeEnabled()){this.initRealtimeIndicators();var b;this.switches.enabled("aggressive_embed_cache")&&(b=this.initialData.lastModified),a.initialize("thread/"+this.thread.id,b,this.realtimeHandlers,this);var c=0;DISQUS.api.on("call",function(b){"POST"!==b.method||b.secure||(c++,a.pause())}),DISQUS.api.on("complete",function(){0>=c||--c||a.resume()})}},updateDom:function(){var a=_.debounce(function(){this.resize(),this.trigger("domReflow")},0);return function(b,c){b&&b.call(c),a.call(this)}}(),initThreadVotes:_.debounce(function(){var a,b=this;b.threadVotes&&b.threadVotes.remove(),b.threadVotes=a=new t({thread:b.thread,session:b.session}),a.on("vote:up",_.bind(b.trigger,b,"uiAction:threadUpvote")),a.on("vote:down",_.bind(b.trigger,b,"uiAction:threadDownvote")),a.render(),this.updateDom(function(){$("#thread-votes").append(a.el)})},200),initThreadSubscribe:function(){this.threadSubscribeButton=new u({session:this.session,thread:this.thread,el:$("#thread-subscribe-button")[0]})},renderStreamingToggle:function(){var a=this;if(a.thread.get("hasStreaming")){var b=$(DISQUS.renderBlock("realtimeToggleButton"));$(b).on("click",m(function(){a.toggleStreamingRealtime()})),a.updateDom(function(){$("#realtime-toggle").empty(),$("#realtime-toggle").append(b[0])})}},toggleStreamingRealtime:function(){var a=$("#realtime-toggle a.btn");this.states.streamingPaused?(this.states.streamingPaused=!1,a.addClass("pause")):(this.states.streamingPaused=!0,a.removeClass("pause"))},updateThreadVotes:function(){$("#thread-votes [data-role=like-count]").text(this.thread.get("likes"))},updateThreadUserScore:function(){var a=this.thread.get("userScore"),b=$("#thread-votes [data-role=vote-button]");b.removeClass("upvoted").removeClass("downvoted"),a>0?b.addClass("upvoted"):0>a&&b.addClass("downvoted")},updatePostCount:function(){var a=this;$("#post-count").html(DISQUS.renderBlock("postCount",{count:a.thread.get("posts")}))},swapMain:function(a){var b=this,c=this.$el.find("#main-nav [data-nav=conversation]").parent("li");"conversation"!==a?c.attr("data-dropdown","disabled"):_.defer(function(){c.attr("data-dropdown","enabled")}),b.updateDom(function(){b.states.realtimeIndicatorsCreated&&"conversation"!=a&&(i.sendHostMessage("realtime.hideNorth"),i.sendHostMessage("realtime.hideSouth"));var c=b[a];c&&!c.isRendered&&(b.freeze(!0),c.on("render:all",_.once(function(){b.freeze(!1)})),c.show()),b.$el.find("[data-role=main]").hide(),b.$el.find("[data-role=main]#"+a).show(),b.prevSection=b.currentSection,b.currentSection=a}),b.trigger("uiAction:navigate",a)},returnToConversation:function(){this.mainNav.navTo("conversation");var a=this.conversationPosition,b=a&&a.pageOffset;b&&this.updateDom(function(){_.delay(function(){i.sendHostMessage("scrollTo",{top:b,relative:"window",force:!0})
},100)},this)},setupNavigation:function(){var a=this;a.mainNav=new U({el:a.$el.find("#main-nav")[0]}),a.mainNav.on("nav",function(b){a.updateDom(function(){a.swapMain(b)})})},renderLayout:function(){function a(a){return function(c){c.preventDefault();var d=$(c.currentTarget);d.addClass("busy"),b.thread[a].more({success:function(){"posts"===a?b.once("postsRendered",function(){d.removeClass("busy")}):d.removeClass("busy")},error:function(){d.removeClass("busy")}}),i.sendHostMessage([a,".","paginate"].join(""))}}var b=this;b.isFullscreen&&$(document.documentElement).addClass("fullscreen");var c=$(DISQUS.renderBlock("layout",{thread:b.thread.toJSON(),forum:b.forum.toJSON(),order:b.thread.posts.order,fullscreen:b.isFullscreen})),d=b.$el;c.appendTo(d),b.setupNavigation();var e="[data-action=more-posts]";d.delegate(e,"click",a("posts")),b.updateDom()},renderForm:function(){if(this.thread.get("isClosed"))return void this.alert(j("Comments for this thread are now closed."));if(!this.session.get("canReply"))return void this.session.once("change:id",this.renderForm,this);var a=this.getPostReplyViewClass(),b=this.form=new a({thread:this.thread,session:this.session});b.render(),this.updateDom(function(){b.prependTo($("#form")),b.resize()},this)},renderHeader:function(){this.isFullscreen&&(this.fullscreenHeader=new d.fullscreen.FullscreenHeaderView({thread:this.thread,forum:this.forum,form:this.form}),this.fullscreenHeader.render(),$("#layout").prepend(this.fullscreenHeader.$el))},getPostReplyViewClass:function(){return this.isFullscreen?d.fullscreen.FullscreenPostReplyView:x},getPostEditClass:function(){return this.isFullscreen?d.fullscreen.FullscreenPostEditView:y},getPostViewClass:function(){return this.isFullscreen?d.fullscreen.FullscreenPostView:B},toggleNoPosts:function(){this.updateDom(function(){var a=this.thread.posts.models;a.length?$("#no-posts").hide():$("#no-posts").show()},this)},handleShowProfile:m(function(a){var b=$(a.currentTarget).attr("data-user");this.showProfile(b)}),handleSort:m(function(a){var b=$(a.currentTarget).attr("data-sort");this.$el.find('[data-role="post-sort"]').replaceWith(DISQUS.renderBlock("postSort",{order:b})),this.thread.posts.order=b,this.thread.posts.fetch({reset:!0}),g.cookies.create("disqus.order",b),$("#posts [data-role=more]").hide(),$("#no-posts").hide(),$("#post-list").addClass("loading").empty()}),closeThread:m(function(){this.thread.close({success:_.bind(i.sendHostMessage,i,"reset"),error:_.bind(this.alert,this,"An error occurred while closing thread. Please try again.","error")})}),openThread:m(function(){this.thread.open({success:_.bind(i.sendHostMessage,i,"reset"),error:_.bind(this.alert,this,"An error occurred while opening thread. Please try again.","error")})}),findClosestThumbnailSize:function(){var a=document.body.offsetWidth;if(this.loadedThumbnailWidth)return this.loadedThumbnailWidth;var b=this.MEDIA_PERSISTED_WIDTHS,c=b.length;this.loadedThumbnailWidth=_.find(b,function(d,e){return e+1===c||Math.abs(b[e+1]-a)>Math.abs(b[e]-a)})},redrawPosts:function(){var a=this;a.postViews={},a.once("postsRendered",function(){_.each(x.open,function(b,c){var d=a.postViews[c];if(d){var e=d.getReplyView();e.textarea.set(b.textarea.get()),b.isOpen()?e.show():e.hide()}})}),a.addPosts(a.thread.posts,{clearDom:!0})},createPostView:function(a){var b,c=a.get("parent");c&&(c=this.thread.posts.get(c),b=c&&this.postViews[c.cid]);var d=this.getPostViewClass(),e=new d({parent:b,model:a,thread:this.thread,session:this.session,created:a.created});return this.postViews[a.cid]=e,e.render(),e},addPostsIncremental:function(){var a,b=30,c=.8*b,d=[],e=!1,f=!1,g=2,h=0,i=0;return a=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return new Date},function j(){var k=this;k.postsShouldClearDom&&(e=!0,k.postsShouldClearDom=!1,d=[]);var l=!!k.postsToAppend.length,m=l?k.postsToAppend:k.postsToPrepend;if(!m.length)return k.nextProcess=null,k.updateDom(function(){$("#post-list").removeClass("loading"),this.trigger("postsRendered")},k),void 0;for(var n=b,o=function(a){a.get("isRealtime")&&(f=!0),d.push(k.createPostView(a))};g>0;){var p=a(),q=m.splice(0,g);if(!q.length)break;_.each(q,o);var r=a()-p;if(0>=r)break;i+=r,n-=r,h+=q.length,g=Math.round(n*h/i)}g=Math.round(Math.max(c*h/i,2)),m.length||(k.updateDom(function(){var a=$("#post-list");if(e&&(a.empty(),e=!1),f&&(k.removeOldPosts(),f=!1),a.removeClass("loading"),d.length){_.each(d,function(a){a.visible=!0});var b=_.groupBy(d,function(a){return!!a.parent});d=[],_.each(b[!0],function(a){a.parent.attachChild(a)});var c=_.pluck(b[!1],"el");l?a.append(c):a.prepend(c)}k.postsToPrepend.length||k.postsToAppend.length||k.trigger("postsRendered")}),k.nextProcess=null),(k.postsToPrepend.length||k.postsToAppend.length)&&(k.nextProcess=_.defer(_.bind(j,k)))}}(),postsShouldBePrepended:function(a){var b=a.length&&a[0];return!!b&&(b.created||!b.id||b.get("isRealtime")||b.requestedByPermalink)},hasQueuedPosts:function(){return this.postsToAppend.length||this.postsToPrepend.length},addPosts:_.decorate(Backbone.collectionAddNormalizer(f.PostCollection,e.Post),function(a,b,c){var d=this;if(c.clearDom&&(d.postsToAppend=[],d.postsToPrepend=[],d.postsShouldClearDom=!0),d.postsShouldBePrepended(a)){var e=[];_.each(a,function(a){var b=a.get("parent");b&&d.thread.posts.get(b)?d.postsToPrepend.push(a):e.push(a)}),d.postsToPrepend=e.concat(d.postsToPrepend)}else d.postsToAppend=d.postsToAppend.concat(a);d.nextProcess||(d.nextProcess=_.defer(_.bind(d.addPostsIncremental,d)))}),createDeferredViewsForImages:function(){var a=this;$("img[data-src]").each(function(b,c){var d=$(c),e=new A({el:c,url:d.attr("data-src"),relatedPost:d.attr("data-post")});d.removeAttr("data-src"),a.trackDeferredView(e)})},trackDeferredView:function(a){if(null===a.offset())return void this.unsortedDeferredViews.push(a);var b=_.sortedIndex(this.deferredViews,a,function(a){return a.offset()});this.deferredViews[b]!==a&&this.deferredViews.splice(b,0,a)},invalidateDeferredViewOffsets:function(){_.invoke(this.deferredViews,"invalidateOffset"),this.unsortedDeferredViews=this.unsortedDeferredViews.concat(this.deferredViews),this.deferredViews=[]},trackUnsortedDeferredViews:function(){var a=this.unsortedDeferredViews;this.unsortedDeferredViews=[],_.each(a,this.trackDeferredView,this)},getPosition:function(){return this.position},calculatePositionFullscreen:function(){return{pageOffset:$(window).scrollTop(),height:document.documentElement.clientHeight,frameOffset:{left:0,top:0}}},processDeferredViews:function(){this.createDeferredViewsForImages(),this.trackUnsortedDeferredViews();var a=this.deferredViews.length;if(a){var b=this.getPosition(),c=b.pageOffset+b.height-b.frameOffset.top;if(!(0>c)){for(var d=0;a>d;++d){var e=this.deferredViews[d];if(!e.isVisible(c))break;e.options.relatedPost&&e.on("load error",_.bind(this.onDeferredViewReady,this,e.options.relatedPost)),e.trigger("viewport:enter")}this.deferredViews=this.deferredViews.slice(d)}}},onDeferredViewReady:function(a){var b=c.postViews;b.hasOwnProperty(a)&&b[a].manageMessageHeight(),this.updateDom()},showProfile:function(a){Modernizr.sessionstorage&&sessionStorage.setItem("profile.session",JSON.stringify(this.session.user.toJSON())),$(document).trigger("mouseout");var b={userId:a,threadId:this.thread.get("id"),forumId:this.forum.get("id"),forumPk:g.extract(this,"initialData.forum.pk").toString()};(DISQUS.browser.mobile||this.isFullscreen)&&(window.open("about:blank",this.profileWindowName,"width="+DISQUS.MOBILE_DEFAULT_WIDTH+",height="+DISQUS.MOBILE_DEFAULT_HEIGHT),b.windowName=this.profileWindowName),i.sendHostMessage("profile.show",b)},removePost:function(a){if(this.hasQueuedPosts())return this.once("postsRendered",_.bind(this.removePost,this,a)),void 0;var b=this.postViews[a.cid];b&&(b.remove(),delete this.postViews[a.cid])},removeOldPosts:function(){if(this.switches&&this.switches.enabled("next_realtime_cap")){var a=_.size(this.postViews)-this.STREAMING_MAX_VISIBLE;if(!(0>=a))for(var b,c=this.thread.posts.sortBy(function(a){return moment(a.get("createdAt")).valueOf()}),d=0,e=0;d<c.length&&a>=e;d++)b=this.postViews[c[d].cid],b&&0===b.childrenNode.children().length&&(this.thread.posts.remove(c[d]),e+=1)}},resize:function(){var a=g.getPageHeight();this._lastHeight!==a&&(this._frozen&&this._lastHeight&&this._lastHeight>a||(this._lastHeight=a,i.sendHostMessage("resize",{height:a})))},freeze:function(a){this._frozen=!!a,this._frozen===!1&&this.resize()},getPostView:function(a){return this.postViews[a]},windowOpen:function(a,b,c){window.open(a,"_blank","width="+b+",height="+c)},authenticate:function(a){var b=this.authServices[a];if(!b)return void DISQUS.log("Unknown authentication service: "+a);if(_.isFunction(b))return b.call(this);c.trigger("uiAction:openLogin",a);var d={forum:this.thread.forum.get("id")};"https:"===window.location.protocol&&(d.redirect_secure=1),this.windowOpen(DISQUS.serialize(b.url,d),b.width,b.height)},handleAuth:m(function(a){this.authenticate(b(a.target,"auth"))}),authServices:{disqus:{url:DISQUS.urls.login,width:460,height:355},twitter:{url:DISQUS.urls.oauth.twitter,width:650,height:680},facebook:{url:DISQUS.urls.oauth.facebook,width:550,height:300},google:{url:DISQUS.urls.oauth.google,width:650,height:440},sso:function(){var a=parseInt(this.config.sso.width||"800",10),b=parseInt(this.config.sso.height||"500",10),c=window.open(this.config.sso.url,"_blank","width="+a+",height="+b);!function d(){g.isWindowClosed(c)?i.sendHostMessage("reload"):_.delay(d,500)}()}},verifyEmail:m(function(){var a=DISQUS.serialize(DISQUS.urls.verifyEmail,{f:this.forum.id});window.open(a,"_blank","width=460,height=355")}),getAudienceSyncUrl:_.memoize(function(){var a={client_id:this.config.apiKey,response_type:"audiencesync",forum_id:this.forum.id};return"https:"===window.location.protocol&&(a.ssl=1),DISQUS.serialize(DISQUS.urls.authorize,a)}),audienceSync:m(function(){this.windowOpen(this.getAudienceSyncUrl(),460,355)}),toggleMedia:m(function(){var a=l.settings,b=!a.get("collapsed");a.set("collapsed",b)})});q.getInstance=function(){return c},_.extend(q.prototype,o),_.extend(q.prototype,p);var r=Backbone.View.extend({updateDom:function(a,b){var c=q.getInstance();c&&c.initialized?c.updateDom(a,b):_.isFunction(a)&&a.call(b)},resize:function(){var a=q.getInstance();a&&a.initialized&&a.resize()}}),s=r.extend({events:{"click [data-action=share\\:twitter]":"_onShare","click [data-action=share\\:facebook]":"_onShare"},_onShare:m(function(a){var d=b(a.target,"share");d&&this.sharers[d]&&(c.trigger("uiAction:threadShare",d),this.share(d))}),_shareUrl:function(){return this.model.url()}});_.extend(s.prototype,o);var t=r.extend({initialize:function(a){_.extend(this,a)},events:{"click [data-action=upvote]":"upvote"},render:function(){this.setElement($(DISQUS.renderBlock("threadVotes",{thread:this.thread.toJSON(),user:this.session.toJSON()})))},upvote:m(function(){this.vote(1)}),vote:function(a){this.trigger(1===a?"vote:up":"vote:down");var b,c=this.thread.get("userScore")===a;this.thread.vote(c?0:a),c||(b=this.$el.find(".dropdown"),_.defer(function(){b.addClass("open")}))},remove:function(){this.off(),Backbone.View.prototype.remove.call(this)}}),u=r.extend({events:{"click [data-action=subscribe]":"subscribe","keydown #thread-subscribe-email":"subscribeKeypress"},initialize:function(a){this.thread=a.thread,this.session=a.session,this.thread.on("change:userSubscription",this.updateStatus,this),this.updateStatus(),this._boundDocumentClickHandler=_.bind(this._documentClickHandler,this)},updateStatus:function(){this.thread.get("userSubscription")?this.$el.addClass("subscribed"):this.$el.removeClass("subscribed")},subscribe:m(function(){var a=this.thread.get("userSubscription");this.session.isAnonymous()&&!a?this.showForm():this.thread.subscribe(!a)}),showForm:function(){var a=this;this._unbindDocumentClickHandler(),_.defer(function(){$(document.body).on("click",a._boundDocumentClickHandler)}),a.$el.addClass("show-form").find("input")[0].focus()},_documentClickHandler:function(a){"thread-subscribe-email"!==a.target.id&&this.hideForm()},_unbindDocumentClickHandler:function(){$(document.body).off("click",this._boundDocumentClickHandler)},hideForm:function(){this._unbindDocumentClickHandler(),this.$el.removeClass("show-form").find("input")[0].blur()},subscribeKeypress:function(a){var b=this.$el.find("input");if(b.removeClass("alert error"),"Esc"===a.key||27===a.keyCode)return void this.hideForm();if("Enter"===a.key||13===a.keyCode){var c=a.target.value;if(!g.validateEmail(c))return b.addClass("alert error"),void 0;this.hideForm(),this.thread.subscribe(!0,c)}}}),v=r.extend({initialize:function(a){_.extend(this,a),this.session.on("change:id",this.render,this),this.listenTo(l.settings,"change:collapsed",this.onMediaCollapseChange)},render:function(){var a=DISQUS.renderBlock("userMenu",{user:this.session.toJSON(),thread:this.thread.toJSON(),feedbackUrl:this.getSurveyMonkeyUrl(),newMedia:q.getInstance().switches.enabled("new_media")});this.updateDom(function(){this.$el.html(a),this.onMediaCollapseChange()},this)},onMediaCollapseChange:function(){l.settings.get("collapsed")?this.$el.addClass("media-collapsed"):this.$el.removeClass("media-collapsed")},getSurveyMonkeyUrl:function(){var a,b="https://www.surveymonkey.com/s/5RBPTTZ",c=this.referrerUrl,d=this.session.user.id;a=d?[d,c]:[c];var e="?c="+encodeURIComponent(a.join(";"));return b+e}}),w=function(){var a=5,b=Modernizr.localstorage?window.localStorage:DISQUS.next.utils.hashStorage;return new QueuedStorage(b,a,"drafts.queue")}(),x=r.extend({events:{"click input[name=author-guest]":"managePassword","click [data-action=cancel]":"hide",submit:"submitForm"},initialize:function(a){this.session=a.session,this.parent=a.parent,this.thread=a.thread,this.parentView=a.parentView,this.session.on("change:id change:audienceSyncVerified",this.redraw,this),this._isHidden=!1,this.parent&&(x.open[this.parent.cid]=this);var b=Modernizr.contenteditable&&!DISQUS.browser.mobile&&!(window.opera&&window.opera.version);if(this.textarea=b?new R({thread:this.thread}):new Q,this.thread.forum.get("settings").allowMedia){var c=this.storageKey("media"),e={add:this.thread.get("uploadAdd"),remove:this.thread.get("uploadRemove")};this.mediaUploads=new d.uploads.MediaUploadsView({mediaStorageKey:c,parent:this.parent,urls:e}),this.mediaUploader=new d.uploads.MediaUploaderView({parent:this.parent,urls:e}),this.listenTo(this.mediaUploader,{"uploader:alert":function(a,b,c){var d=this.alert(a,b);_.isFunction(c)&&d.on("dismiss",c)},"uploader:dragEnter":function(){this.$el.addClass("expanded")},"uploader:addMedia":_.bind(this.mediaUploads.legacy.add,this.mediaUploads.legacy)})}var f=_.throttle(this.updateLiveMedia,500),g=_.debounce(this.updateLiveMedia,1e3);this.updateLiveMediaRateLimited=b?function(){f.apply(this,arguments),g.call(this,!0)}:function(){g.call(this,!0)}},storageKey:function(a){return this.thread.id?[a||"drafts","thread",this.thread.id,"parent",this.parent?this.parent.id:0].join(":"):null},updateLiveMedia:function(a){function b(){var b=c.textarea.get(),d=c.textarea.content&&c.textarea.content.selectedTextNodeOffset()||b.length;c.mediaUploads.richView.updateFromText(b,d,{isPasteEvent:a})}var c=this;c.mediaUploads&&(a?_.defer(b):b())},saveDraft:function(){null!==this.storageKey()&&w.setItem(this.storageKey(),JSON.stringify([this.textarea.get(),(new Date).getTime()]))},getDraft:function(){if(null===this.storageKey())return null;var a=w.getItem(this.storageKey());if(!a)return null;var b=JSON.parse(a);return b[1]+86400>(new Date).getTime()?b[0]:(w.removeItem(this.storageKey()),null)},restoreDraft:function(){var a=this.getDraft();a&&this.textarea.set(a)},updateAvatar:function(){this.$el.find("[data-role=user-avatar]").attr("src",this.session.user.get("avatar").cache)},expandGuestForm:function(){this.updateDom(function(){this.$el.find("[data-role=guest-details]").addClass("expanded")},this)},redraw:function(){var a=this.$el.hasClass("expanded"),b=this.el,c=this.$el.find("textarea").val();this.render(),this.$el.find("textarea").val(c),a&&this.$el.addClass("expanded"),0!==$(b).parent().length&&this.updateDom(function(){b.parentNode.replaceChild(this.el,b)},this)},render:function(){var a=this,b=a.getDraft(),d=b||"";this.setElement($(DISQUS.renderBlock("form",{message:d,parent:a.parent?a.parent.toJSON():null,user:a.session.toJSON(),forumName:a.thread.forum.get("name"),audienceSyncRequired:a.session.needsAudienceSyncAuth(a.thread.forum),apiKey:c.config&&c.config.apiKey||"",allowAnonPost:a.thread.forum.get("settings").allowAnonPost,allowMedia:a.thread.forum.get("settings").allowMedia})));var e=this.textarea;e.setElement(a.$el.find("textarea")[0]),e.render(),e.on("keychange",_.debounce(this.saveDraft,500),this),q.getInstance().switches.enabled("new_media")&&(e.on("keychange",this.updateLiveMediaRateLimited,this),e.$el.on("paste",_.bind(function(a,b){b&&b.fake||this.updateLiveMedia(!0)},this))),e.$el.on("focus",function(){a.$el.addClass("expanded focus"),_.delay(_.bind(a.resize,a),200)}),e.$el.on("blur",function(){e.get()||a.$el.removeClass("focus")}),this.mediaUploads&&(this.mediaUploads.setElement(this.$el.find("[data-role=media-preview]")[0]),this.mediaUploader.setElement(this.$el.find("[data-role=textarea]")[0])),a.$el.find("input[name=author-name]").on("focus",function(){a.expandGuestForm()}),a.session.get("mustVerifyEmail")&&a._alertMustVerify(),a._isHidden&&a.$el.addClass("hidden")},resize:function(){this.textarea.resize()},focus:function(){this.textarea.focus()},clear:function(){var a=this;a.textarea.clear(),a.$el.removeClass("expanded"),a.mediaUploads&&a.mediaUploads.clear(),_.delay(function(){a.resize()},200),a.parent?a.hide():a.setInactive(),this.storageKey()&&w.removeItem(this.storageKey())},setInactive:function(){this.$el.removeClass("expanded")},restore:function(a){var b=this;b.textarea.set(a.get("raw_message")),_.delay(function(){b.resize()},200),b.parent&&b.show()},managePassword:function(){var a=this.$el,b=a.find("input[name=author-guest]"),c=a.find("input[name=author-password]");c&&(this.updateDom(function(){c[b.is(":checked")?"hide":"show"]()}),c.val(""))},_alertMustVerify:function(a){var b=DISQUS.interpolate(j("%(forumName)s requires you to %(verifyEmail)s before posting"),{forumName:this.thread.forum.get("name"),verifyEmail:'<a href="#" data-action="verify-email">'+j("verify your email address")+"</a>"});this.alert(b,{safe:!0,type:a?"error":"warn"})},getPassword:function(){var a=this.$el.find("input[name=author-password]");return a.length?a.val():null},submitForm:m(function(){return this.dismissAlert(),this.shouldRegisterUser()?void this.registerUser():this.createPost()}),shouldRegisterUser:function(){return this.session.isAnonymous()&&!this.$el.find("input[name=author-guest]").is(":checked")},registerUser:function(){function a(a){var c=a.response;/The e-mail address you specified is already in use./i.test(c)?b.alert(j("The e-mail address you specified is already in use. (Do you already have an account?)"),"error"):/Unable to create user/i.test(c)?b.alert(j("That email address is already registered with a Disqus account. Log in or enter another email."),"alert"):b.alert(c,"error")}var b=this,d=new e.User({display_name:b.$el.find("input[name=author-name]").val(),email:b.$el.find("input[name=author-email]").val(),password:b.getPassword()});return d.isValid()?(d.register({error:a,success:function(){b.session._setUser(d),b.alert(j("Your account was created successfully."),{success:!0}),c.trigger("uiAction:finishRegistrationEmbed")}}),void 0):a({response:d.validationError})},createPost:function(){var a=this,b={thread:a.thread.id,depth:a.parent?a.parent.get("depth")+1:0,parent:a.parent?a.parent.id:null,raw_message:a.textarea.get()};a.session.isRegistered()?b.author_id=a.session.user.id:_.extend(b,{author_name:a.$el.find("input[name=author-name]").val(),author_email:a.$el.find("input[name=author-email]").val()});var d=new DISQUS.next.models.UniqueModel(DISQUS.next.models.Post),f=d.set(b,{validate:!0});if(!f)return void a.alert(d.validationError,"error");var g=null,h=function(b,e){if(19===e.code){if(g)return g.reload();g=new C,g.render();var f=c.getPostView(d.cid);return f.el.parentNode.insertBefore(g.el,f.el),g.start(),g.on("submitted",function(){d.save({recaptcha_challenge_field:g.getChallenge(),recaptcha_response_field:g.getResponse()},{success:function(){g.remove()}})}),void 0}12===e.code&&/verify/.test(e.response)?a._alertMustVerify(!0):_.isString(e.response)&&a.alert(e.response,"error"),a.thread.posts.remove(d),a.restore(d),a.thread.incrementPostCount(-1)},i=function j(){a.thread.trigger("create",d),c.trigger("uiCallback:postCreated",d),d.off("error",h),d.off("sync",j)};return d.on("error",h),d.on("sync",i),d.save(b),d.author=a.session.isRegistered()?a.session.user:new e.UniqueModel(e.User,{id:md5(b.author_email),name:b.author_name,email:b.author_email}),a.thread.incrementPostCount(1),d.created=!0,a.thread.posts.add(d),a.clear(),c.trigger("uiAction:createPost",d),d},prependTo:function(a){a=a[0],a.insertBefore(this.el,a.firstChild)},remove:function(){this.updateDom(function(){this.$el.remove()},this),this.parent&&(delete x.open[this.parent.cid],this.typingStop())},toggle:function(){this.isOpen()?this.hide():this.show()},show:function(){var a=this;a._isHidden=!1,a.updateDom(function(){a.$el.removeClass("hidden")}),a.typingStart()},hide:function(){var a=this;a._isHidden=!0,a.dismissAlert(),a.updateDom(function(){a.$el.addClass("hidden")}),a.typingStop()},isOpen:function(){return!this._isHidden},typingStart:function(){var a=this;if(a.parent){var b=q.getInstance();b.isRealtimeEnabled()&&_.delay(function(){var b,c=DISQUS.urls.realertime+"/api/2/typing/";if(g.attempt(function(){b=g.CORS.request("POST",c)}),null===b)return void DISQUS.log("CORS is not supported by this browser.");var d=JSON.stringify({typing:!0,forum_url:a.thread.get("forum"),thread_id:a.thread.get("id"),user_id:a.session.user.id||0,parent_post_id:a.parent.get("id")});g.attempt(function(){b.send(d)})},500)}},typingStop:function(){var a=this;if(a.parent){var b=q.getInstance();b.isRealtimeEnabled()&&_.delay(function(){var b,c=DISQUS.urls.realertime+"/api/2/typing/";if(g.attempt(function(){b=g.CORS.request("POST",c)}),null===b)return void DISQUS.log("CORS is not supported by this browser.");var d=JSON.stringify({typing:!1,forum_url:a.thread.get("forum"),thread_id:a.thread.get("id"),user_id:a.session.user.id||0,parent_post_id:a.parent.get("id")});g.attempt(function(){b.send(d)})},500)}}});_.extend(x.prototype,p),x.open=x.open||{};var y=r.extend({events:{submit:"submitForm","click [data-action=cancel]":"cancel"},templateName:"edit",initialize:function(a){this.post=a.post,this.session=a.session,this.textarea=new Q},show:function(){},hide:function(){},cancel:function(){this.trigger("cancel")},render:function(){this.setElement($(DISQUS.renderBlock(this.templateName,{post:this.post.toJSON(),user:this.session.toJSON()})));var a=this.textarea;a.setElement(this.$el.find("textarea")[0]),a.render()},prependTo:function(a){a=a[0],a.insertBefore(this.el,a.firstChild)},resize:function(){this.textarea.resize()},submitForm:function(a){a&&a.preventDefault()&&a.preventDefault();var b=this,c={raw_message:this.textarea.get()},d=b.post.validate(c);return void 0!==d?alert(d):(b.trigger("submitted"),b.post.save(c,{success:function(){}}),void 0)},remove:function(){this.updateDom(function(){this.$el.remove()},this)}}),z=r.extend(_.extend({initialize:function(){this.on("viewport:enter",this.logEnter,this)},logEnter:function(){if(DISQUS.juggler){var a=DISQUS.juggler.client("juggler",!0);a.emit("activity",this.options.params)}}},DISQUS.next.views.mixins.IsVisibleViewMixin)),A=r.extend(_.extend({},DISQUS.next.views.mixins.IsVisibleViewMixin,{offsetTweak:function(){return-c.getPosition().height},initialize:function(){this.hasLoaded=null,this.once("viewport:enter",this.loadImage,this)},loadImage:function(){var a=this;if(!a.hasLoaded){var b=function(b){return function(){a.trigger(b),a.$el.off(".deferredMediaView")}};a.$el.on("load.deferredMediaView",b("load")),a.$el.on("error.deferredMediaView",b("error")),a.$el.attr("src",a.options.url),a.hasLoaded=!0}}})),B=r.extend({initialize:function(a){this.MAX_POST_HEIGHT=374,this.thread=a.thread,this.session=a.session,this.created=!!a.created,this.model.on("change:isDeleted spam",this.removeAsDeleted,this),this.model.on("change:message",this.stopLoading,this),this.model.on("change:points",this.updateVotePoints,this),this.model.on("change:userScore",this.updateActiveUserVote,this),this.model.on("change:isFlaggedByUser",this.updateUserFlagged,this),this.model.usersTyping.on("add remove reset",this.updateTypingCount,this),this.session.on("change:id",this.updateEditHide,this),this.session.on("change:id",this.updateFooter,this),this.session.on("change:id",this.updateMenu,this),this.model.on("change",function(){var a=this.model.changedAttributes();(a.id||a.message)&&this.redraw()},this),this.reply=null,this.edit=null,this.parent=a.parent,this.trackPosition=!1,this.offset={top:-1,height:-1},this.dim={height:-1,width:-1},q.getInstance().on("domReflow",function(){if(!this.trackPosition||!this.visible)return this.offset={top:-1,height:-1},this.dim={height:-1,width:-1},void 0;var a=this.contentNode;this.offset=a.offset(),this.dim=a.dim()},this),this.isCollapseAllowed=!0},updateTypingCount:function(){this.typingUserView&&this.typingUserView.render()},stopLoading:function(){this.contentNode.find(".loading").removeClass("loading")},updateRelativeTime:function(){this.contentNode.find("[data-role=relative-time]").text(this.model.getRelativeCreatedAt())},updateActiveUserVote:function(){var a=this.model,b=this.contentNode.find("[data-action=upvote]"),c=this.contentNode.find("[data-action=downvote]");c.removeClass("downvoted"),b.removeClass("upvoted"),a.get("userScore")>0?b.addClass("upvoted"):a.get("userScore")<0&&c.addClass("downvoted")},updateVotePoints:function(a){var b=this.contentNode.find("[data-role=likes], [data-role=dislikes]"),c=this.contentNode.find("[data-action=upvote], [data-action=downvote]"),d=function(a){_.delay(function(){a.addClass("update"),_.delay(function(){a.removeClass("update")},1e3)},500)};_.each(b,function(b,e){b=$(b);var f=b.html(),g=a.get(b.attr("data-role")).toString(),h=$(c[e]);f!==g&&(h.addClass("count-"+g),h.removeClass("count-"+f),b.html(g),d(b))})},updateEditHide:function(){var a=this.contentNode.find("[data-role=edit-hide]"),b=DISQUS.renderBlock("postEditHide",{post:{author:{id:this.model.author.id}},session:{id:this.session.user.id}});this.updateDom(function(){a.html(b)})},updateFooter:function(){var a=this.contentNode.find("footer"),b=DISQUS.renderBlock("postFooter",{post:this.model.toJSON(),session:this.session.toJSON(),thread:this.thread.toJSON()});this.updateDom(function(){a.html(b),this.initUpvotersCard()},this)},updateMenu:function(){var a=this.contentNode.find("[data-role=menu]"),b=DISQUS.renderBlock("postMenu",{session:this.session.toJSON(),post:this.model.toJSON()});this.updateDom(function(){a.replaceWith(b)})},updateUserFlagged:function(){this.model.get("isFlaggedByUser")?this.contentNode.addClass("user-reported"):this.contentNode.removeClass("user-reported")},getMessageContainer:function(){return this.messageContainer&&this.messageContainer.length||(this.messageContainer=this.contentNode.find("[data-role=message-container]")),this.messageContainer},getMessageContent:function(){return this.messageContent&&this.messageContent.length||(this.messageContent=this.contentNode.find("[data-role=message-content]")),this.messageContent},getMoreButton:function(){return this.seeMoreButton&&this.seeMoreButton.length||(this.seeMoreButton=this.contentNode.find("[data-action=see-more]")),this.seeMoreButton},manageMessageHeight:function(){var a=this,b=a.getMessageContent(),c=a.MAX_POST_HEIGHT;a.isCollapseAllowed&&(b&&b.length&&b.height()>1.5*c&&!a.$el.hasClass("collapsed")?a.collapseMessage():a.expandMessage(!0))},collapseMessage:function(){var a=this,b=a.getMessageContainer(),c=a.MAX_POST_HEIGHT;b&&b.length&&!b.hasClass("post-message-collapse")&&(a.updateDom(function(){b.addClass("post-message-collapse"),b.height(c)}),a.addMoreButton())},expandMessage:function(a){var b=this;if(b.messageContainer&&b.messageContainer.length){var c=b.getMessageContainer();b.updateDom(function(){c.removeClass("post-message-collapse"),c.css("height","auto")}),b.removeMoreButton(),a!==!0&&(b.isCollapseAllowed=!1)}},addMoreButton:function(){var a=this.getMoreButton();this.updateDom(function(){a.removeClass("hidden")})},removeMoreButton:function(){var a=this.getMoreButton();this.updateDom(function(){a.addClass("hidden")})},markSeen:function(){function a(d){var e,f;return d?b.dim.height<=0||b.dim.width<=0?!1:(e=b.offset.top+d.frameOffset.top,f=e>d.pageOffset,(f=f&&e+b.dim.height<=d.pageOffset+d.height)?(b.contentNode.addClass("seen"),_.delay(function(){b.contentNode.removeClass("seen"),b.contentNode.removeClass("new")},1e4),b.trackPosition=!1,c.off("scroll",a),!0):!1):!1}var b=this,c=q.getInstance();a(c.position)||c.on("scroll",a,b)},renderLegacyMedia:function(a){a.append($(DISQUS.renderBlock("postMediaLegacyList",{post:this.model.toJSON(),thumbnailWidth:c.loadedThumbnailWidth,thumbnailHeight:c.MAX_MEDIA_HEIGHT})))},renderRichMedia:function(a,b){var c=this.$el.find("[data-role=message]"),d={};c.find("a").each(function(a,b){var c=b.href;d[c]||(d[c]=$(b))});var e=this.model.get("cid");a.chain().map(function(a){var b=l.instantiateRichMediaView(a,e);return b}).without(null).each(function(a){a.render();var c=a.media.get("url"),e=g.bleachFindUrls(c);e.length&&(c=e[0].url);var f=d[c],h=B.getHighestLinkParent(f);if(h)h.append(a.$el),a.convertToButton(f);else{var i=$("<li>");i.append(a.$el),b.append(i)}},this)},renderMedia:function(){var a=this.model.media;if(a){var b=this.$el.find("[data-role=post-media-list]");c.switches.enabled("new_media")?this.renderRichMedia(a,b):this.renderLegacyMedia(b)}},render:function(){var a=this,b=a.parent&&a.parent.model,d=a.model.toJSON();a.setElement($(DISQUS.renderBlock("post",{post:d,session:a.session.toJSON(),thread:a.thread.toJSON(),loading:!a.model.id,created:a.created,parentAuthorName:b?b.author.get("name"):null,thumbnailWidth:c.loadedThumbnailWidth,thumbnailHeight:c.MAX_MEDIA_HEIGHT}))),a.contentNode=a.$el.find("[data-role=post-content]"),a.childrenNode=a.$el.find("[data-role=children]"),a.messageNode=a.contentNode.find("[data-role=message]"),a.highlightSyntax(),a.processMentions(),a.bindDomEvents(),a.renderMedia(),a.model.get("isRealtime")&&(a.trackPosition=!0,c.once("postsRendered",a.markSeen,a)),c.once("postsRendered",function(){a.markSeen(),a.manageMessageHeight(),_.defer(function(){var b=a.$el.find("[data-role=realtime-notification\\:"+a.model.id+"] .realtime-replies");a.typingUserView=new G({parentView:a,model:a.model,el:b})})}),d.author&&d.author.badge&&this.attachBadgeViews()},attachBadgeViews:function(){var a={verb:"view",object_type:"verified_badge",object_id:this.model.author.id};this.$("[data-type=tracked-badge]").each(function(){var b=new z({el:this,params:a});c.trackDeferredView(b)})},highlightSyntax:function(){var a=this.contentNode.find("pre code");a.length&&a.each(function(){g.syntaxHighlighter.highlight(this)})},redraw:function(){var a=this.$el;if(!a)throw new Error("Old child not found on PostView.redraw");var b=this.childrenNode.children();this.render(),this.updateDom(function(){this.childrenNode.append(b),a.replaceWith(this.$el),c.trigger("postsRendered")},this)},processMentions:function(){this.contentNode.find("[data-dsq-mention]").each(function(){$(this).addClass("mention")})},attachChild:function(a){var b=a.model;b.created||!b.id||b.get("isImmediateReply")?this.childrenNode.prepend(a.el):this.childrenNode.append(a.el)},drawReply:function(){this.reply&&(this.reply.render(),this.updateDom(function(){this.reply.prependTo(this.childrenNode),this.reply.show(),this.reply.focus()},this))},toggleEdit:function(){if(this.edit)return this.edit.hide(),this.edit.remove(),this.edit=null,this.messageNode.show(),void 0;
var a=y,b=q.getInstance();b&&b.getPostEditClass&&(a=b.getPostEditClass()),this.edit=new a({post:this.model,session:this.session}),this.edit.render(),this.edit.on("submitted",this.toggleEdit,this),this.edit.on("cancel",this.toggleEdit,this),this.expandMessage(!0),this.edit.show(),this.updateDom(function(){var a=this.messageNode;this.edit.prependTo(a.parent()),a.hide(),this.edit.resize();var b=q.getInstance();b&&b.scrollToPost(this.model.id)},this)},removeAsDeleted:function(){this.redraw()},bindDomEvents:function(){var a=this;a.delegateActions(a.contentNode,{upvote:function(){a.handleVote(1)},downvote:function(){a.handleVote(-1)},reply:"handleReply",flag:"handleFlag",edit:"handleEdit","delete":"handleDelete",spam:"handleSpam",blacklist:"handleBlacklist",collapse:"handleCollapse",reveal:"handleReveal","share:twitter":"_onShare","share:facebook":"_onShare","see-more":m(a.expandMessage)}),a.initProfileCard(),a.initContextCard(),a.initUpvotersCard()},initProfileCard:function(){var a=this.$el.find(".hovercard");a.length&&(this.profileCard=d.cards.ProfileCard.create({session:this.session,user:this.model.author,targetElement:a}))},initContextCard:function(){var a=this.parent&&this.parent.model;a&&!a.get("isDeleted")&&(this.contextCard=d.cards.ContextCard.create({post:a,targetElement:this.$el.find("[data-role=parent-link]")}))},initUpvotersCard:function(){var a=this.$el.find("[data-action=upvote]");a.length&&(this.upvotersCard=d.cards.UpvotersCard.create({session:this.session,model:this.model,postId:this.model.get("id"),targetElement:a}))},_onShare:function(a){var d=b(a.target,"share");d&&(c.trigger("uiAction:postShare",d),this.share(d))},_shareUrl:function(){return this.thread.url()+"#comment-"+this.model.id},handleBlacklist:function(){if(!this.blacklist){var a=this.blacklist=new P({model:this.model});a.render(),a.on("success cancel",function(){this.blacklist.remove(),this.blacklist=null},this),this.updateDom(function(){this.contentNode.find("[data-role=blacklist-form]").first().append(a.el)},this)}},handleCollapse:function(){this.updateDom(function(){this.$el.toggleClass("collapsed"),this.manageMessageHeight()},this)},handleVote:function(a){1===a?c.trigger("uiAction:postUpvote"):-1===a&&c.trigger("uiAction:postDownvote");var b=this.model.get("userScore")===a;this.model.vote(b?0:a)},remove:function(){this.model.off(null,null,this),this.session.off(null,null,this),Backbone.View.prototype.remove.call(this)},getReplyView:function(){if(this.reply)return this.reply;var a=x,b=q.getInstance();return b&&b.getPostReplyViewClass&&(a=b.getPostReplyViewClass()),this.reply=new a({parentView:this,parent:this.model,thread:this.thread,session:this.options.session}),this.drawReply(),this.reply},handleReply:function(){this.reply?this.getReplyView().toggle():this.getReplyView()},handleFlag:function(){if(!this.model.get("isFlaggedByUser")){var a=j("Are you sure you want to flag this comment?");window.confirm(a)&&(this.model.report(),this.model.set("isFlaggedByUser",!0))}},handleEdit:function(){this.toggleEdit()},handleDelete:function(){this.model._delete()},handleSpam:function(){this.model.spam()},handleReveal:function(){this.model.set("isMinimized",!1),this.redraw()}},{getHighestLinkParent:function(){var a={B:!0,CAPTION:!0,EM:!0,I:!0,P:!0,S:!0,SPAN:!0,STRIKE:!0,STRONG:!0,U:!0};return function(b){if(b){var c,d=b.parents(),e=!0;if(_.find(d,function(b){var d=$(b);return"message"===d.attr("data-role")?!0:a[b.tagName]?(c=d,void 0):(e=!1,!0)}),e)return c}}}()});_.extend(B.prototype,o);var C=r.extend({render:function(){var a=this;a.setElement($(DISQUS.renderBlock("captcha"))),a.$el.on("submit",function(b){b.preventDefault(),a.trigger("submitted")})},start:function(){function a(){b.updateDom(function(){Recaptcha.create(DISQUS.keys.recaptcha,b.el,{theme:"custom",custom_theme_widget:"recaptcha_widget"}),b.$el.show()})}var b=this;"undefined"==typeof Recaptcha?curl(["js!//www.google.com/recaptcha/api/js/recaptcha_ajax.js"]).then(a):a()},getChallenge:function(){return Recaptcha.get_challenge()},getResponse:function(){return Recaptcha.get_response()},reload:function(){Recaptcha.reload()}}),D=r.extend({initialize:function(a){this.session=a.session,this.showZero=a.showZero||!1,this.max=a.max,this.session.on("change:notificationCount",this.render,this)},render:function(){var a=this.session.get("notificationCount")||0;return this.max&&(a=Math.min(a,this.max)),this.$el.html("<span>"+a+"</span>"),a>0||this.showZero?this.$el.show():this.$el.hide(),this}}),E=Backbone.View.extend({__type__:"QueuedPostView",getDirection:function(a){if(this.offset&&this.dim){var b=a.pageOffset,c=b+a.height,d=this.offset.top+a.frameOffset.top,e=d+this.dim.height;return b>e?1:d>c?-1:0}},setCount:function(a){this.options.count=a},bindDrain:function(){var a=_.bind(this.drainHandler,this);this.clickEvent||("load-queued-posts"==this.$el.attr("data-action")?this.$el.on("click",a):this.$el.delegate("[data-action=load-queued-posts]","click",a),this.clickEvent=!0)},render:function(){var a=this;return 0===a.options.count?void a.$el.hide():(a.$el.html(DISQUS.renderBlock("realtimeCommentNotification",{comments:a.options.count})),a.bindDrain(),q.getInstance().on("domReflow",_.throttle(function(){0!==a.options.count&&(this.offset=a.$el.offset(),this.dim=a.$el.dim())},400),this),a.$el.show(),void 0)},drainHandler:function(){this.model.queue.drain(),this.setCount(this.model.queue.counters.comments),this.render()}}),F=E.extend({getDirection:function(a){if(this.options.postView.visible){this.offset=this.options.postView.offset,this.dim=this.options.postView.dim;var b=E.prototype.getDirection.call(this,a);return delete this.offset,delete this.dim,b}},render:function(){var a=this,b=a.options.postView;return DISQUS.log("Model:",a.model.id),0===a.options.count?(a.$el.hide(),b.trackPosition=!1,void 0):(b.trackPosition=!0,a.$el.html(DISQUS.renderBlock("realtimeReplyNotification",{replies:a.options.count})),a.bindDrain(),a.$el.show(),_.delay(function(){a.$el.addClass("reveal")},13),void 0)},drainHandler:function(){var a=this.model.id,b=this.options.postView,c=this.options.thread.queue;c.drain(a),this.setCount(c.counters.replies[a]),b.trackPosition=!1,this.render()}}),G=Backbone.View.extend({render:function(){var a=this.model.usersTyping.count(),b=this.options.parentView.reply;return b&&b.isOpen()&&(a-=1),0>=a?void this.$el.hide():(1==a?this.$el.html("One other user is typing&hellip;"):this.$el.html(a+" other users are typing&hellip;"),this.$el.show(),void 0)}}),H=r.extend({events:{"click [data-action=network]":"showNetwork","click [data-action=notifications]":"showNotifications"},initialize:function(a){var b=this;b.network=new K,b.notifications=new J({notifications:a.session.notifications}),b.notificationCount=new D({session:a.session,showZero:!0}),b._views={network:b.network,notifications:b.notifications},b.network.on("render:activity",_.bind(b.trigger,b,"render:all"))},render:function(){this.updateDom(function(){this.$el.html(DISQUS.renderBlock("dashboard"))},this),this._tabs={network:this.$el.find("[data-role=network-tab]"),notifications:this.$el.find("[data-role=notifications-tab]")},this.network.setElement(this.$el.find("[data-role=network]")),this.notifications.setElement(this.$el.find("[data-role=notifications]")),this.notificationCount.setElement(this.$el.find("[data-role=notification-count]")),this.network.render(),this.notifications.render(),this.notificationCount.render()},show:function(){this.setActiveTab("notifications")},setActiveTab:function(a){var b=q.getInstance();b.freeze(!0),_.chain(this._tabs).invoke("removeClass","active"),this._tabs[a].addClass("active"),_.chain(this._views).pluck("$el").invoke("hide");var c=this._views[a];this.updateDom(function(){c.$el.show(),b.freeze(!1)},this),c.show&&c.show()},showNetwork:m(function(){this.setActiveTab("network"),q.getInstance().trigger("uiAction:navigate","network")}),showNotifications:m(function(){this.setActiveTab("notifications"),q.getInstance().trigger("uiAction:navigate","dashboard")})}),I=r.extend({events:{"click [data-action=more]":m(function(){this.trigger("fire")})},setBusy:function(){this.$el.find("[data-action=more]").addClass("busy").removeAttr("disabled")},setReady:function(){this.$el.find("[data-action=more]").removeClass("busy").removeAttr("disabled"),this.updateDom(function(){var a=this.collection.cursor,b=a&&a.hasNext;b?this.$el.show():this.$el.hide()},this)}}),J=r.extend({initialize:function(a){this.notifications=a.notifications,this.notifications.on("reset",this.resetNotifications,this),this.notifications.on("add:many",this.addNotifications,this),this.notifications.on("reset add:many",this.markNotificationsAsRead,this),this._fetched=!1,this.moreButton=new I({collection:this.notifications}),this.moreButton.on("fire",this.loadMore,this)},render:function(){return this.renderLayout()},renderLayout:function(){return this.updateDom(function(){this.$el.html(DISQUS.renderBlock("notifications")),this.moreButton.setElement(this.$el.find("[data-role=more-notifications]")),this.$el.addClass("loading")},this),this},resetNotifications:function(a){var b=this.$el.find("[data-role=no-notifications]");b.hide(),this.$el.removeClass("loading"),0===a.size()?b.show():(b.hide(),this.addNotifications.apply(this,arguments))},addNotifications:_.decorate(Backbone.collectionAddNormalizer(f.NotificationCollection,e.Notification),function(a){var b=_.map(a,function(a){var b=$(DISQUS.renderBlock("notification",{notification:a.toJSON()}));return b[0]});return this.updateDom(function(){this.$el.find("[data-role=entries]").append(b)},this),this.moreButton.setReady(),this.notifications.markRead(),this}),show:function(){this._fetched||(this.notifications.fetch({reset:!0}),this._fetched=!0)},loadMore:function(){this.moreButton.setBusy(),this.notifications.more()}}),K=r.extend({initialize:function(){this.posts=new f.PostActivityCollection,this.posts.on("reset",this.resetActivity,this),this.posts.on("add:many",this.addActivity,this),this._fetched=!1,this.moreButton=new I({collection:this.posts}),this.moreButton.on("fire",this.loadMore,this)},render:function(){return this.renderLayout()},renderLayout:function(){return this.updateDom(function(){this.$el.html(DISQUS.renderBlock("networkActivity")),this.moreButton.setElement(this.$el.find("[data-role=more-activity]")),this.$el.addClass("loading")},this),this},resetActivity:function(a){var b=this.$el.find("[data-role=no-activity]");b.hide(),this.$el.removeClass("loading"),0===a.size()?b.show():(b.hide(),this.addActivity.apply(this,arguments))},addActivity:_.decorate(Backbone.collectionAddNormalizer(f.PostActivityCollection,e.Post),function(a){var b=new Backbone.Collection;_.each(a,function(a){var c=b.get(a.get("thread").id)||new e.Thread(_.extend(a.get("thread"),{forum:a.get("forum")}));c.posts.add(a),b.add(c)});var c=b.map(function(a){var b=$(DISQUS.renderBlock("networkActivityThreadEntry",{thread:a.toJSON()})),c=a.posts.map(function(a){return $(DISQUS.renderBlock("networkActivityPostEntry",{post:a.toJSON()}))[0]});return b.find("[data-role=posts]").append(c),b[0]});return this.updateDom(function(){this.$el.find("[data-role=entries]").append(c),this.trigger("render:activity")},this),this.moreButton.setReady(),this}),show:function(){this._fetched||(this.posts.fetch({reset:!0}),this._fetched=!0)},loadMore:function(){this.moreButton.setBusy(),this.posts.more()}}),L=r.extend({tagName:"ol",className:"loading",initialize:function(){this.collection.on("reset",function(){this.updateDom(this.render,this)},this)},render:function(){return this.updateDom(function(){this.$el.removeClass("loading"),this.$el.empty(),this.collection.each(function(a){var b=DISQUS.time.assureTzOffset(a.get("createdAt")),c=DISQUS.renderBlock("topThread",{id:a.id,title:a.get("title"),url:a.get("link"),numPosts:a.get("posts"),numLikes:a.get("likes"),timeAgo:moment(b,DISQUS.time.ISO_8601).fromNow()});this.$el.append(c)},this),this.trigger("render")},this),this.attachPosts(),this},attachPosts:function(){this.collection.each(function(a){this.renderPost(a)},this)},renderPost:function(a){var b=a.get("topPost");if(b){var c=_.escape(_.strip(b.message));c=_.truncate(c,160,"&hellip;");var d=DISQUS.renderBlock("topThreadPost",{message:c,author:b.author});this.updateDom(function(){this.$el.find("[data-role=thread-"+a.id+"] [data-role=top-thread-post]").html(d)},this)}}}),M=r.extend({tagName:"ol",className:"loading",initialize:function(){this.collection.on("reset",function(){c.thread.users.add(this.collection.models,{merge:!0}),this.updateDom(this.render,this)},this)},render:function(){return this.updateDom(function(){this.$el.removeClass("loading"),this.$el.empty(),this.collection.each(function(a){var b=DISQUS.renderBlock("topUser",{user:a.toJSON()});this.$el.append(b)},this),this.trigger("render")},this),this}}),N=Backbone.View.extend({initialize:function(a){var b=this;b.forum=a.forum,b.topThreads=new L({id:"top-threads",collection:new f.TopThreadCollection(null,{forum:b.forum.id,limit:10})}),b.topUsers=new M({id:"top-users",collection:new f.TopUserCollection(null,{forum:b.forum.id,limit:20,discardLowRep:c.switches.enabled("next_discard_low_rep")})});var d=when.defer(),e=when.defer();b.topUsers.once("render",d.resolver.resolve),b.topThreads.once("render",e.resolver.resolve),when.join(d.promise,e.promise).then(function(){b.isRendered=!0,b.trigger("render:all")}),b.fetched=!1,b.render()},render:function(){return this.$el.html(DISQUS.renderBlock("community",{forum:this.forum.toJSON()})),this.$el.find("[data-role=top-threads]").append(this.topThreads.el),this.$el.find("[data-role=top-users]").append(this.topUsers.el),this},show:function(){this.fetched||(this.topThreads.collection.fetch({reset:!0}),this.topUsers.collection.fetch({reset:!0}),this.fetched=!0)}}),O=r.extend({events:{"click [data-action=dismiss]":"dismiss"},initialize:function(a){_.extend(this,a)},render:function(){return this.setElement($(DISQUS.renderBlock("alert",{message:this.message,type:this.type,safe:this.safe}))),this},dismiss:function(a){a&&a.preventDefault&&a.preventDefault(),this.remove(),this.trigger("dismiss")}}),P=r.extend({events:{"click [data-action=cancel]":"cancel"},initialize:function(){var a=this;a.loading=!1,a.model.get("ipAddress")||(a.loading=!0,a.model.once("change:ipAddress",function(){a.loading=!1,a.redraw()}),a.model.fetch())},render:function(){var a=this;return a.setElement($(DISQUS.renderBlock("blacklist",{loading:this.loading,post:a.model.toJSON()}))),a.$el.on("submit",function(b){b&&b.preventDefault()&&b.preventDefault(),a.submit()}),a},redraw:function(){var a=this.el.parentNode;a&&(this.render(),this.updateDom(function(){$(a).empty().append(this.el)},this))},cancel:function(a){a&&a.preventDefault()&&a.preventDefault(),this.trigger("cancel")},submit:function(){var a={},b=this;b.$el.find("input").each(function(){this.checked&&(a[this.name]=this.value)}),_.isEmpty(a)||(a.forum=b.model.get("forum"),DISQUS.api.call("blacklists/add.json",{method:"POST",data:a,success:function(){b.trigger("success")}}))}}),Q=r.extend({events:{keyup:"handleKeychange",paste:"handleKeychange"},render:function(){return"TEXTAREA"===this.el.tagName&&this.$el.autoresize({maxHeight:n}),this.$el.on("resize",_.debounce(_.bind(this.updateDom,this,function(){}),300)),this},resize:function(){this.$el.trigger("paste",{fake:!0})},get:function(){return this.$el.val()},set:function(a){this.$el.val(a)},clear:function(){this.set("")},focus:function(){this.el.focus()},handleKeychange:function(){this.trigger("keychange")}}),R=Q.extend({events:{keyup:"handleKeychange",paste:"handleKeychange"},initialize:function(a){a=a||{},this.thread=a.thread,this.mentionsCache=new f.UserCollection,this.suggestions=new S({thread:a.thread,mentions:this.mentionsCache}),this.placeholder="",this.suggestions.on("select",this.insertMention,this),this.reset()},reset:function(){this.anchorNode=null,this.anchorOffset=null,this.anchorLength=0,this.suggestions.clear()},handleKeychange:function(){this.trigger("keychange"),this.$el.trigger("resize")},render:function(){var a=this.el.getAttribute("placeholder"),b=this.el.value,c=document.createElement("div");_.extend(c,{className:"textarea",contentEditable:!0,tabIndex:this.el.tabIndex}),c.setAttribute("role","textbox"),c.setAttribute("aria-multiline","true"),c.style.overflow="auto",c.style.maxHeight=n+"px";var d=this.el.parentNode;if(d.replaceChild(c,this.el),this.setElement(c),this.bindKeyEvents(),d.appendChild(this.suggestions.el),this.content=new Editable(this.el,!0,{getHtmlElements:_.bind(this.getHtmlElements,this)}),this.set(b),Q.prototype.render.call(this),a){this.placeholder='<span class="placeholder">'+a+"</span>",this.content.text()||this.$el.html(this.placeholder);var e=_.bind(function(){this.isPlaceholder()&&this.set(""),this.el.focus()},this);this.$el.on("focus focusin",_.debounce(e,50)),this.$el.on("blur",_.bind(function(){""===this.content.text()&&this.setPlaceholder()},this))}return this},getHtmlElements:function(a){if(!a)return a;var b=[a],c=this.getMentionNodes(a);return _.each(c,function(a,c){for(var d=0;d<b.length;d++){var e,f=b[d],g=d;if(_.isString(f)){for(;(e=f.indexOf(c))>-1;)e>0&&b.splice(d++,0,f.substring(0,e)),b.splice(d++,0,a.cloneNode(!0)),f=f.substring(e+c.length);f&&f!==b[g]&&b.splice(d++,0,f),g!==d&&b.splice(d,1)}}}),b=_.map(b,function(a){return _.isString(a)?document.createTextNode(a):a})},getMentionNodes:function(a){var b=R.MENTIONS_RE_GROUPED,c={};b.lastIndex=0;for(var d=b.exec(a);d;){var e=d[1],f=this.thread.users.find(function(a){return a.get("username")===e||a.get("emailHash")===e});if(f){var g=R.getMentionDom(f),h=d[0];c[h]=g,this.updateCache(f,f.cid)}d=b.exec(a)}return c},isPlaceholder:function(){return 0!==this.$el.find(".placeholder").length},setPlaceholder:function(){this.$el.html(this.placeholder)},bindKeyEvents:function(){this.$el.on("keydown",_.bind(function(a){switch(a.keyCode){case 9:this.suggestions.active&&(this.suggestions.select(),a.preventDefault(),a.stopPropagation());break;case 10:case 13:case 38:case 40:this.suggestions.active&&(a.preventDefault(),a.stopPropagation())}},this));var a=_.throttle(_.bind(this.suggest,this),500);this.$el.on("keyup",_.bind(function(b){switch(b.preventDefault(),b.stopPropagation(),this.checkExistingMentions(),b.keyCode){case 50:if(!b.shiftKey)return;this.start(b);break;case 10:case 13:this.suggestions.select();break;case 27:this.reset(b);break;case 38:this.suggestions.move("up");break;case 40:this.suggestions.move("down");break;default:a(b)}},this))},start:function(){this.reset(),this.suggest()},suggest:function(){var a=this.parseSearchTerms();this.suggestions.suggest(a)},insertMention:function(a){var b=this.thread.users.get(a);this.selectSearchString(b),this.updateCache(b,a);var c=R.getMentionDom(b);this.content.insertNode(c);var d=this.$el.find("span[data-cid]");_.each(d,function(a){a.contentEditable!==!1&&(a.contentEditable=!1)})},updateCache:function(a,b){this.mentionsCache.get(b)||this.mentionsCache.add(a)},selectSearchString:function(){this.content.selectNodeText(this.anchorNode,this.anchorOffset-1,this.anchorOffset+this.anchorLength)},get:function(){function a(a){return c(a,!0)?b.mentionToText(a):null}var b=this,c=R.isMention;return this.isPlaceholder()?"":this.content.text(a)},set:function(a){this.content.setText(a),this.resize()},clear:function(){Q.prototype.clear.call(this),this.setPlaceholder(),_.defer(function(a){a.updateDom(function(){a.el.blur(),a.$el.trigger("blur")})},this)},parseSearchTerms:function(){var a=this.content.selectedTextNode(),b=a?a.nodeValue:"",c=Editable.normalizeSpace;if(b){var d=this.content.selectedTextNodeOffset(a),e=Editable.normalizeSpace(b.slice(0,d).split("").reverse().join("")),f=e.indexOf("@");if(-1===f)return null;this.anchorNode=a,this.anchorOffset=d-f,this.anchorLength=f;var g=c(b.slice(this.anchorOffset-1,d)).match(R.MENTIONS_RE);return g?g[0].slice(1).split(" "):0===f?[""]:void 0}},checkExistingMentions:function(){var a=Editable.normalizeSpace,b=this.$el.find("span"),c=_.filter(b,R.isMention),d=this.mentionsCache,e={};_.each(c,function(b){var c=$(b).attr("data-cid"),f=_.reduce(this.content.getTextNodes(b),function(b,c){return b+a(c.nodeValue)},""),g=d.get(c);g&&g.get("name")!==f?(this.mentionsCache.remove(g),this.content.removeNode(b),this.content.insertHTML(" "),this.reset()):e[c]=b},this),d.each(function(a){e[a.cid]||d.remove(a)})},mentionToText:function(a){var b=$(a).attr("data-cid"),c=this.mentionsCache.get(b),d=a.innerText||a.textContent;return c&&(d=c.get("username")||c.get("emailHash")),["@",d,":","disqus"].join("")}},{MENTIONS_RE:new RegExp("@\\w+\\s?(?:\\w+\\s?){0,5}(?:\\w+)?$"),MENTIONS_RE_GROUPED:/@([\d\w]+)\s?(\:\s?(\w+))?/gi,isMention:function(a,b){var c;do{if(c=$(a),c.hasClass("mention")&&c.attr("data-cid"))return!0;a=a.parentElement}while(b&&a);return!1},getMentionDom:function(a){var b=document.createDocumentFragment(),c=document.createElement("span"),d=document.createElement("span"),e=document.createTextNode(a.get("name")||a.get("username"));return c.setAttribute("contenteditable",!0),d.setAttribute("contenteditable",!1),d.setAttribute("data-cid",a.cid),d.className="mention",d.appendChild(e),c.appendChild(d),b.appendChild(c),b.appendChild(document.createTextNode(" ")),b}}),S=Backbone.View.extend({events:{"click li":"onclick"},initialize:function(a){this.active=!1,this.thread=a.thread,this.mentionsCache=a.mentions},suggest:function(a){var b=this.findMatches(a);return b&&b.length?(this.active=!0,this.el.innerHTML=DISQUS.renderBlock("suggestions",{users:_.map(b,function(a){return _.extend(a.toJSON(),{cid:a.cid})})}),this.$el.find("li[data-cid]").first().addClass("active"),void 0):void this.clear()},clear:function(){this.active=!1,this.el.innerHTML=""},onclick:function(a){var b=$(a.currentTarget);this.select(b.attr("data-cid"))},findMatches:function(a){if(a&&a.length){var b,c=new RegExp(a.join(" ").replace(/[^\w\s]/,""),"i"),d=S.MAX_SUGGESTIONS,e=this.thread.users,f=[],g=0,h=1===a.length&&""===a[0]?function(){return!0}:function(a){return c.test(a.get("name"))||c.test(b.get("username"))};for(g=0;g<e.models.length&&f.length<d;g++)b=e.models[g],this.mentionsCache.get(b.cid)||h(b)&&f.push(b);return f}},select:function(a){this.active&&(a||(a=this.$el.find(".active").attr("data-cid")),this.trigger("select",a),this.clear())},move:function(a){if(this.active){var b=this.$el.find(".active"),c="up"===a?"previous":"next",d=b[c]();d.length&&d.attr("data-cid")&&(b.removeClass("active"),d.addClass("active"))}}},{MAX_SUGGESTIONS:5}),T=r.extend({tagName:"ul",className:"debug",initialize:function(a){this.values=a},render:function(){return this.$el.empty(),_.each(this.values,function(a,b){var c=document.createElement("li");c.innerHTML="<strong>"+b+"</strong>: "+a,this.$el.append(c)},this),this}}),U=Backbone.View.extend({events:{"click [data-nav]":"_navTo"},initialize:function(){this.prevDestination=this.activeNav()},_navTo:function(a){a.preventDefault();var b=$(a.target);b=b.is("[data-nav]")?b:b.closest("[data-nav]");var c=b.attr("data-nav");this.prevDestination!=c&&this.navTo(c)},navTo:function(a){this.prevDestination=a;var b=this.$el.find("[data-nav="+a+"]").parent();b.siblings("li").removeClass("active"),b.addClass("active"),this.trigger("nav",a)},activeNav:function(){return null!=this.prevDestination?this.prevDestination:this.$el.find(".active [data-nav]").attr("data-nav")},clear:function(){this.$el.find("li").removeClass("active"),this.prevDestination=null}}),V=Backbone.View.extend({events:{"click [rel=nofollow]":"sendLinkForInspection"},initialize:function(){this.link=null,this.busy=!1,this.timeoutId=null,this.timeout=1e3,this.token=1,this.on("option.timeout",function(a){this.timeout=a})},setLink:function(a){this.link=a,this.$link=$(this.link)},onAffiliatorResponse:function(a){a=a||{},a.token==this.token&&(i.off("affiliateLink",this.onAffilatorResponse),a.url&&(this.link.href=a.url),this.undelegateEvents(),this.$link.triggerClick())},sendLinkForInspection:function(a){if(a.currentTarget===this.link)return void a.preventDefault();var b=a.ctrlKey||a.metaKey||a.altKey||a.shiftKey,c=a.which&&1===a.which||0===a.button;if(b||!c)return!0;this.busy&&(i.off("affiliateLink"),this.timeoutId&&window.clearTimeout&&(window.clearTimeout(this.timeoutId),this.timeoutId=null),this.token++),this.busy=!0,this.setLink(a.currentTarget),a.preventDefault(),i.on("affiliateLink",this.onAffiliatorResponse,this),i.sendHostMessage("affiliateLink",{token:this.token,url:this.link.href});var d=_.bind(function(a){this.onAffiliatorResponse({token:a})},this,this.token);this.timeoutId=_.delay(d,this.timeout)}});return{Lounge:q,LoungeSubView:r,PostView:B,PostReplyView:x,PostEditView:y,UserMenuView:v,ThreadVotesView:t,ThreadSubscribeButton:u,DeferredMediaView:A,QueuedPostView:E,QueuedReplyView:F,TypingUserView:G,CommunityView:N,TopThreadCollectionView:L,TopUserCollectionView:M,DashboardView:H,NotificationCollectionView:J,NotificationCountView:D,NetworkActivityCollectionView:K,CaptchaView:C,OutboundLinkHandler:V,AlertView:O,BlacklistView:P,TextareaView:Q,ContentEditableView:R,DebugInfoView:T,AlertMixin:p}}),DISQUS.define("next.lounge.views.cards",function(){"use strict";var a=DISQUS.use("next.utils"),b=DISQUS.use("next.collections"),c=DISQUS.use("next.lounge.views"),d=a.preventDefaultHandler,e=c.LoungeSubView.extend({initialize:function(){this._id=_.uniqueId(),this._rendered=!1,this._hoverState="out",this._visible=!1,this._enterTimeout=null,this._leaveTimeout=null,e.open={},this.events=this.events||{},this.events["click [data-action=profile]"]="handleShowProfile"},bindEvents:function(){this.$el.on("mouseenter",_.bind(this.enter,this,null)),this.$el.on("mouseleave",_.bind(this.leave,this))},render:function(){this.$el.hide(),$("body").append(this.el),this.bindEvents()},target:function(a){a.on("mouseenter",_.bind(this.enter,this,a)),a.on("mouseleave",_.bind(this.leave,this))},enter:function(a){var b=this;a&&(b.$target=a),b._leaveTimeout&&clearTimeout(b._leaveTimeout),"in"!==b._hoverState&&(b._hoverState="in",b._enterTimeout=_.delay(function(){"in"===b._hoverState&&b.show(),b._enterTimeout=null},e.DELAY_ENTER),e.open[this.uid]=this)},leave:function(){var a=this;a._enterTimeout&&clearTimeout(a._enterTimeout),"out"!==a._hoverState&&(a._hoverState="out",a._leaveTimeout=_.delay(function(){"out"===a._hoverState&&a.hide(),a._leaveTimeout=null},e.DELAY_LEAVE),e.open[this.uid]&&delete e.open[this.uid])},show:function(){var a=this;a._rendered||(a._rendered=!0,a.render()),a.moveTo(a.$target),a.$el.show(),a._visible=!0},moveTo:function(a){if(a){var b=e.POSITION_OFFSET,d=a.offset(),f=this.$el,g=f.dim(),h=c.Lounge.getInstance().getPosition();d.top-=b,d.top+g.height+h.frameOffset.top<=h.pageOffset+h.height?f.css("top",d.top):f.css("top",d.top-g.height+2*b),f.css("left",d.left+b)}},hide:function(){this.$el.hide(),this._visible=!1},isVisible:function(){return this._visible},handleShowProfile:d(function(a){var b=$(a.currentTarget).attr("data-user");c.Lounge.getInstance().showProfile(b),this.hide()})},{open:{},instances:{},DELAY_ENTER:350,DELAY_LEAVE:175,POSITION_OFFSET:20,exitAll:function(){_.invoke(e.open,"leave")},create:function(a,b,c,d){var f=e.instances[c];f||(e.instances[c]=f={});var g=f[a];return g||(g=new d(b),f[a]=g),b.targetElement&&g.target(b.targetElement),g}});!function(){$(document).on("mouseout",_.debounce(function(a){var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||e.exitAll()},10))}();var f=e.extend({events:{"click [data-action=toggleFollow]":"toggleFollow"},initialize:function(a){var b=this;e.prototype.initialize.call(b,a),b.session=a.session,b.user=a.user,b._fetched=!1,b.user.on("change:numPosts change:numLikesReceived",_.debounce(function(){b.updateCounters()})),b.user.on("change:isFollowing",b.updateActions,b),b.session.on("change:id",function(){b._rendered&&b.render()})},serialize:function(){return{user:this.user.toJSON({session:this.session}),sessionId:this.session.user.id}},render:function(){this.setElement($(DISQUS.renderBlock("hovercard",this.serialize()))),e.prototype.render.call(this)},updateCounters:function(){this.$el.find("[data-role=counters]").html(DISQUS.renderBlock("hovercardCounters",this.serialize()))},updateActions:function(){this.$el.find("[data-role=actions]").html(DISQUS.renderBlock("hovercardActions",this.serialize()))},show:function(){this._fetched||(this._fetched=!0,this.user.fetch()),e.prototype.show.call(this)}},{create:function(a){var b=a.user;return e.create(b.id,a,"ProfileCard",f)}}),g={toggleFollow:d(function(){this.user.get("isFollowing")?this.user.unfollow():(this.user.follow(),c.Lounge.getInstance().trigger("uiAction:followUser"))})};_.extend(f.prototype,g);var h=e.extend({initialize:function(a){var b=this;e.prototype.initialize.call(b,a),b.post=a.post},render:function(){var a=this.post.toJSON();a.excerpt=_.truncate(_.escape(_.strip(a.message),40,"...")),this.setElement($(DISQUS.renderBlock("contextCard",{post:a}))),e.prototype.render.call(this)}},{create:function(a){var b=a.post;return e.create(b.id,a,"ContextCard",h)}}),i=e.extend({initialize:function(a){var c=this;e.prototype.initialize.call(c,a),c._fetched=!1,c._loading=!1,c._rendered=!1;var d=a.model;c.model=d,c.session=a.session,c.likes=d.get("likes"),c.hadLikes=!!c.likes,c.users=new b.UpvotersUserCollection([],{postId:d.get("id"),threadId:d.get("thread")}),c.users.on("reset",c.show,c),c.model.on("change:userScore",c.updateUserSet,c)},updateUserSet:function(){var a=this.session.user,b=this.likes,c=!1;if(this.likes=this.model.get("likes"),this.model.get("userScore")>0)if(this.session.isAnonymous()||this.users.add(a),this.likes&&!b)this._rendered=!1,this.show();else{var d=this.likes-1-this.users.length;c=this.session.isAnonymous()?!!d:!0,this.addUser()}else this.users.remove(a),this.removeUser(),this.likes||this.hide();this.moveTo(this.$target,c)},addUser:function(){var a=this,b=a.session.user;a.session.isAnonymous()?a.updateGuestVotes():a.$listEl&&a.$listEl.length&&(a.$listEl.prepend(DISQUS.renderBlock("upvoter",_.extend({highlight:!0},b.toJSON()))),a.stopHighlightUsername())},removeUser:function(){var a=this,b=a.session.user;if(a.session.isAnonymous())a.updateGuestVotes();else{var c=a.$el.find("[data-user="+b.get("id")+"]");c.length&&c.remove()}},stopHighlightUsername:_.debounce(function(){var a=this.$el.find(".highlight");a.removeClass("highlight")},1100),updateGuestVotes:function(){var a=this,b=a.$el.find("[data-role=guest]"),c={guestCount:this.likes-this.users.length,guestAvatarUrl:DISQUS.urls.avatar.generic,highlight:b.length,users:{length:a.users.length}},d=DISQUS.renderBlock("guestUpvoter",c);b.length?(b.replaceWith(d),a.stopHighlightUsername()):a.$listEl&&a.$listEl.length&&a.$listEl.append(d)},render:function(){delete this.pointEl,this.setElement($(DISQUS.renderBlock("upvoters",{users:this.users.toJSON(),guestCount:this.likes-this.users.length,guestAvatarUrl:DISQUS.urls.avatar.generic,isLoading:this._loading,highlight:!1}))),e.prototype.render.call(this),this.$listEl=this.$el.find(".upvoters ul")},show:function(){var a=c.Lounge.getInstance();if(a.switches.enabled("next_upvoters_tooltip")){var b=this;if(b.likes&&!b.isVisible()&&(b.hadLikes||(b._fetched=!0,b._loading=!1),b._fetched?b._loading&&(b._rendered=!1,b._loading=!1,b.hide()):(b.users.fetch({reset:!0}),b._fetched=!0,b._loading=!0),b._fetched&&!b._loading)){var d=this.session.user;this.model.get("userScore")>0&&!this.session.isAnonymous()&&!this.users.contains(d)&&this.users.add(d),e.prototype.show.call(this),this.scrollMeasure&&this.scrollMeasure.dim().height>this.$el.dim().height&&this.$el.addClass("has-scroll"),a.trigger("uiAction:upvotersCardShow")}}},showPoint:function(a){var b=["tl","bl"];this.pointEl||(this.pointEl=this.$el.find(".tooltip-point"),this.pointEl.removeClass("hidden")),_.each(b,function(a){this.pointEl.removeClass("point-position-"+a)},this),this.pointEl.addClass("point-position-"+a)},moveTo:function(a,b){if(a){var d=e.POSITION_OFFSET,f=a.offset(),g=this.$el,h=g.dim(),i=c.Lounge.getInstance().getPosition(),j=i.frameOffset.height;
b&&(h.height+=g.find("li.user").dim().height+10),f.top-h.height-d>=0&&f.top-h.height+i.frameOffset.top>=i.pageOffset?(g.css({bottom:j-f.top+d,top:"inherit"}),this.showPoint("bl")):(g.css({bottom:"inherit",top:f.top+2*d}),this.showPoint("tl")),g.css("left",f.left-d)}},handleShowProfile:d(function(a){e.prototype.handleShowProfile.call(this,a),c.Lounge.getInstance().trigger("uiAction:showProfileFromUpvotes")})},{create:function(a){return e.create(a.postId,a,"UpvotersCard",i)}});return a.mixin(i,DISQUS.next.views.mixins.LocalScroll,{scrollMeasureSelector:"[data-role=content]"}),{HoverCard:e,ProfileCard:f,ContextCard:h,UpvotersCard:i}}),DISQUS.define("next.lounge.views.fullscreen",function(){"use strict";function a(a,b){_.extend(a.prototype,{show:function(){null!==this._windowScrolltop&&(this._windowScrollTop=$(window).scrollTop()),$("#layout").hide(),_.defer(_.bind(function(){b.prototype.show.call(this)},this))},hide:function(){b.prototype.hide.call(this),$("#layout").show(),null!==this._windowScrollTop&&(window.scrollTo(0,this._windowScrollTop),this._windowScrollTop=null)},prependTo:function(){b.prototype.prependTo.call(this,$("#fixed-content"))}})}var b=DISQUS.use("next.utils"),c=DISQUS.use("next.lounge.views"),d=DISQUS.use("juggler").client("juggler",!0),e="disqus.ignition",f=Backbone.View.extend({events:{"click [data-action=love]":"handleLove","click [data-action=hate]":"handleHate","click [data-action=email]":"handleFeelings","click [data-action=close]":"handleClose","click [data-action=opt-out]":"handleOptout"},handleLove:function(){return this._response="like",this.render(),d.emit("activity",{verb:"like",object_type:"application",object_id:"mobile.next"}),!1},handleHate:function(){return this._response="dislike",this.render(),d.emit("activity",{verb:"dislike",object_type:"application",object_id:"mobile.next"}),!1},handleClose:function(){return this.dismiss(),d.emit("activity",{verb:"close",object_type:"alert",object_id:"mobile_next_opt_out"}),!1},handleOptout:function(){return b.cookies.create(e,0),this._response="opt-out",this.render(),d.emit("activity",{verb:"leave",object_type:"application",object_id:"mobile.next"}),!1},handleFeelings:function(a){d.emit("activity",{verb:"open",object_type:"survey",object_id:"mobile_feedback"}),a.stopPropagation()},dismiss:function(){return b.cookies.create(f.COUNTDOWN_COOKIE_NAME,0),this.remove(),!1},render:function(){return this.$el.html(DISQUS.renderBlock("fullscreenSurvey",{response:this._response,mailto:f.MAILTO})),this}},{COUNTDOWN_COOKIE_NAME:"survey_countdown",MAILTO:encodeURIComponent("mobile-feedback@disqus.com?subject=Feedback for the new look of Disqus mobile"),shouldShow:function(){var a=b.cookies.read(f.COUNTDOWN_COOKIE_NAME),c=parseInt(a,10);return _.isFinite(c)||(c=5),c>0&&(c-=1),b.cookies.create(f.COUNTDOWN_COOKIE_NAME,c,{expiresIn:2592e6}),4!==c&&c>0}}),g=c.LoungeSubView.extend({events:{"click [data-action=toggle-compose]":"handleCompose","click [data-action=back]":"handleBackButton"},initialize:function(a){this.thread=a.thread,this.forum=a.forum,this.form=a.form},render:function(){if(this.$el.html(DISQUS.renderBlock("fullscreenHeader",{thread:this.thread.toJSON(),forum:this.forum.toJSON()})),f.shouldShow()){var a=new f;this.$el.prepend(a.render().el),d.emit("activity",{verb:"view",object_type:"alert",object_id:"mobile_next_opt_out"})}},handleCompose:function(){this.form&&(this.form.show(),this.form.focus())},handleBackButton:function(){window.close()}}),h=c.PostView,i=h.extend({initialize:function(){h.prototype.initialize.apply(this,arguments),this._boundScrollHandler=null,this.listenTo(this.session,"change:id",this.updateSessionClass)},bindDomEvents:function(){var a=this;h.prototype.bindDomEvents.call(a),a.contentNode.on("click",function(b){0===$(b.target).closest("a, [data-action]").length&&a.toggleActive()})},handleCollapse:function(){this.isActive()&&this.setInactive(),h.prototype.handleCollapse.call(this)},isActive:function(){return i.active===this},toggleActive:function(){if(!this.model.isMinimized()&&!this.model.get("isDeleted")&&!this.$el.hasClass("collapsed")){var a=i.active;a&&a.setInactive(),a!==this&&this.setActive()}},setActive:function(){i.active=this,this.contentNode.addClass("active"),this._boundScrollHandler=_.bind(_.throttle(this.checkFooterClip,100),this),$(window).on("scroll",this._boundScrollHandler),this.checkFooterClip()},setInactive:function(){i.active=null,this.contentNode.removeClass("active"),this.unbindScrollHandler()},unbindScrollHandler:function(){$(window).off("scroll",this._boundScrollHandler),this._boundScrollHandler=null},checkFooterClip:function(){var a=this.contentNode,b=a.offset().top,c=b+a.outerHeight(),d=$(window).scrollTop()+(window.innerHeight||$(window).height()),e=this.contentNode.find("footer");e.hasClass("fixed")&&(c+=e.height());var f=a.find("header"),g=f.offset().top+f.outerHeight()+e.outerHeight();c>d&&d>g?e.addClass("fixed"):e.removeClass("fixed")},updateSessionClass:function(){var a="authored-by-session-user";this.session.user.id==this.model.author.id?this.contentNode.addClass(a):this.contentNode.removeClass(a)},stopListening:function(){h.prototype.stopListening.call(this),this._boundScrollHandler&&this.unbindScrollHandler()},initProfileCard:function(){},initContextCard:function(){},initUpvotersCard:function(){}}),j=c.PostReplyView,k=j.extend({events:function(){return _.extend({},j.prototype.events,{"click [data-action=toggle-services-menu]":"toggleServicesMenu",click:"focusTextarea"})},initialize:function(){j.prototype.initialize.apply(this,arguments),this._windowScrollTop=null,this._isHidden=!0},focusTextarea:function(a){a.currentTarget===this.el&&this.textarea.focus()},shouldRegisterUser:function(){return this.session.isAnonymous()},registerUser:function(){this.alert("Please log in or register to continue.","info"),this.showServicesMenu(),this.listenToOnce(this.session,"change:id",this.dismissAlert)},setInactive:function(){this.hide()},showServicesMenu:function(){this.$el.addClass("services-menu-active")},toggleServicesMenu:function(){this.$el.toggleClass("services-menu-active")}});a(k,c.PostReplyView);var l=c.PostEditView.extend({templateName:"fullscreenEdit"});return a(l,c.PostEditView),{FullscreenHeaderView:g,FullscreenPostView:i,FullscreenPostEditView:l,FullscreenPostReplyView:k,FullscreenSurvey:f,IGNITION_OPTOUT_COOKIE_NAME:e}}),DISQUS.define("next.lounge.views.media",function(){"use strict";var a=DISQUS.use("next.utils"),b=DISQUS.use("next.lounge.views"),c=DISQUS.use("next.models"),d=b.Lounge,e=b.LoungeSubView,f=Modernizr.localstorage?window.localStorage:a.hashStorage,g=new Backbone.Model({collapsed:"true"===f.getItem("disqus.collapse-media")}).on("change:collapsed",function(a,b){f.setItem("disqus.collapse-media",b)}),h={settings:g},i=function(a){if(!a)return"";a="http://"+a.replace(/^([a-z+.-]+:)?\/+/i,"");var b=document.createElement("a");b.href=a;var c=b.hostname.replace(/^www\d*\./i,"");return c=c.toLowerCase()},j=function(a,b,c,d){a[b.get(c)?"addClass":"removeClass"](d)},k=e.extend({initialize:function(){this.media=this.options.media},render:function(){var a=this.media.get("url"),b=i(a),c=this.media.toJSON();c.title=c.title.replace(/\s*\|\s*Facebook\s*$/gi,""),this.updateDom(function(){this.$el.html(DISQUS.renderBlock("postMediaWebPagePreview",{media:c,domain:b}))},this)},convertToButton:function(){}}),l=e.extend({tagName:"span",events:{"click [data-action=expand-collapse-media]":"handleToggle"},initialize:function(a){this.media=this.options.media;var b=a.$link;this.linkText=b.text(),this.linkHref=b.attr("href"),this.linkDomain=i(this.linkHref),this.isUserText=this.isUserText(b),this.listenTo(this.model,"change:deferred",this.render)},isUserText:function(a){if("A"!==a[0].nodeName)return!1;var b=(a.text()||"").toLowerCase();if(!b)return!1;if(0===b.indexOf("http")||0===b.indexOf("www"))return!1;b=b.replace(/\.\.\.$/,"");var c=(a.attr("href")||"").toLowerCase();return-1===c.indexOf(b)},render:function(){var b;b=this.isUserText?this.linkText:this.media.get("title")?a.niceTruncate(this.media.get("title"),60):this.model.get("providerExpandMessage"),this.updateDom(function(){this.$el.html(DISQUS.renderBlock("postMediaInlineLink",{model:this.model.toJSON(),text:this.linkText,href:this.linkHref,mediaLinkText:b,domain:this.linkDomain}))},this)},handleToggle:function(){return this.model.get("deferred")?void 0:(this.model.set("activated",!this.model.get("activated")),!1)}}),m=Backbone.Model.extend({defaults:{deferred:!0,showButtons:!0,activated:!1,kind:"image",postId:"",deferredHeight:0,providerExpandMessage:"",providerCollapseMessage:"",providerIcon:"icon-proceed"}}),n=e.extend(_.defaults({events:{"click [data-action=expand]":"handleExpand","click [data-action=contract]":"handleContract"},initialize:function(){this.media=this.options.media,this.$linkEl=null,this.setupMode(),this.listenTo(this.model,"change:activated",this.applyState),this.listenTo(this.model,"change:deferredHeight",this.onChangeDeferredHeight),this.listenTo(this.model,"change:showButtons",this.updateElementClass),this.listenTo(this.model,"change:deferred",this.render),this.listenTo(h.settings,"change:collapsed",this.setupMode)},offsetTweak:function(){return-d.getInstance().getPosition().height},getMediaDimensions:function(){return{width:null,height:null}},getAvailableWidth:function(){return this.$el.parent().width()||d.getInstance().loadedThumbnailWidth},calculateDeferredHeight:function(){var a=this.getMediaDimensions(),b=a.width,c=a.height;if(!b||!c)return this.model.set("deferredHeight",c),void 0;var d=this.getAvailableWidth(),e=d*c/b;this.model.set("deferredHeight",e)},convertToButton:function(a){this.model.set("showButtons",!1),this.linkSubview&&this.linkSubview.remove(),this.linkSubview=new l({model:this.model,media:this.media,$link:a}),a.replaceWith(this.linkSubview.$el),this.linkSubview.render()},generateContentNode:function(){return $("")},applyContentNodeHeight:function(a){this.contentNode.height(a||"auto")},insertContent:function(){this.updateDom(function(){var a=!this.model.get("deferred");this.calculateDeferredHeight();var b=this.generateContentNode(a);this.contentNode.html(b),this.applyContentNodeHeight(null)},this)},configureDeferred:function(){this.model.get("deferred")&&!this.model.get("activated")&&(this.once("viewport:enter",this.enterViewport),d.getInstance().trackDeferredView(this)),d.getInstance().once("postsRendered",this.calculateDeferredHeight,this)},configureContentFromActivated:function(){this.updateDom(function(){this.model.get("activated")?this.insertContent():this.contentNode.empty()},this)},updateElementClass:function(){var a=this.$el,b=this.model;j(a,b,"deferred","media-mode-deferred"),j(a,b,"activated","media-activated"),j(a,b,"showButtons","media-show-buttons")},applyState:function(){this.configureDeferred(),this.configureContentFromActivated(),this.updateElementClass()},render:function(){this.$el.html(DISQUS.renderBlock("postMedia",{model:this.model.toJSON(),media:this.media.toJSON()})),this.contentNode=this.$el.find("[data-role=content-placeholder]"),this.applyState(),this.updateDom()},remove:function(){this.linkSubview&&this.linkSubview.remove(),e.prototype.remove.apply(this,arguments)},enterViewport:function(){this.model.get("deferred")&&this.model.set("activated",!0)},setupMode:function(){this.model.set("activated",!1);var a=h.settings.get("collapsed");a?this.model.set("deferred",!1):this.model.set("deferred",!0)},onChangeDeferredHeight:function(){this.model.get("deferred")&&!this.model.get("activated")&&this.applyContentNodeHeight(this.model.get("deferredHeight"))},handleExpand:function(){this.model.set("activated",!0)},handleContract:function(){this.model.set("activated",!1)}},DISQUS.next.views.mixins.IsVisibleViewMixin)),o=n.extend({getMediaDimensions:function(){return{width:this.media.get("htmlWidth"),height:this.media.get("htmlHeight")}},generateContentNode:function(){this.calculateDeferredHeight();var a=$(this.media.get("html"));return a.attr({width:"100%",height:this.model.get("deferredHeight"),"data-post":this.model.get("postId")}),a},_findIframe:function(a){return a.is("iframe")?a:a.find("iframe")},configureContentFromActivated:function(){n.prototype.configureContentFromActivated.apply(this,arguments),this.model.get("activated")||this.$el.removeClass("media-loading")},insertContent:function(){this.updateDom(function(){this.loaderNode=this.$el.find("[data-role=content-loader]");var a=this.model.get("deferredHeight")||o.DEFAULT_HEIGHT;this.loaderNode.height(a);var b=!this.model.get("deferred"),c=this.generateContentNode(b),d=this._findIframe(c);d.hide(),d.one("load",_.bind(this.finishLoad,this,d,a)),this.$el.addClass("media-loading"),this.contentNode.html(c),this.applyContentNodeHeight(null)},this)},finishLoad:function(a,b){this.updateDom(function(){this.$el.removeClass("media-loading"),a.height(b),a.show()},this)}},{DEFAULT_HEIGHT:300}),p=o.extend({getMediaDimensions:function(){return{width:null,height:this.media.get("htmlHeight")}},generateContentNode:function(a){var b=o.prototype.generateContentNode.apply(this,arguments),c=b.attr("src");return a&&c&&(c=DISQUS.serialize(c,{auto_play:!0}),b.attr("src",c)),b}}),q=o.extend({generateContentNode:function(a){var b=o.prototype.generateContentNode.apply(this,arguments),c=b.attr("src");return a&&c&&(c=DISQUS.serialize(c,{autoplay:1}),b.attr("src",c)),b}}),r=o.extend({finishLoad:function(a){var b=this,c=0,d=150,e=20,f=function(){var g=b.getContentHeight();o.prototype.finishLoad.call(b,a,g),++c,e>c&&_.delay(f,d)};f()},getContentHeight:function(){var a=this._findIframe(this.contentNode).get(0);if(!a)return null;var b=a.contentDocument||a.contentWindow.document||a.document,c=b.body,d=(c.offsetHeight||c.clientHeight)+16;return d}}),s=r.extend({generateContentNode:function(){var b=d.getInstance(),c=r.prototype.generateContentNode.call(this,!1),e=c.attr("src");return e=DISQUS.serialize(e,{theme:b.config.colorScheme,link_color:a.escapeColor(b.config.anchorColor)}),c.attr("src",e),c}}),t=n.extend({getMediaDimensions:function(){return{width:this.media.get("thumbnailWidth"),height:this.media.get("thumbnailHeight")}},getImageUrl:function(){return this.media.get("resolvedUrl")||this.media.get("url")||this.media.get("thumbnailUrl")},getImageThumbnailUrl:function(){var a=this.media.get("thumbnailUrl");return a=DISQUS.serialize(a,{w:d.getInstance().loadedThumbnailWidth,h:this.model.get("deferredHeight")})},generateContentNode:function(){return $(DISQUS.renderBlock("postMediaImage",{media:this.media.toJSON(),thumbnailUrl:this.getImageThumbnailUrl(),imageUrl:this.getImageUrl(),postId:this.model.get("postId")}))}}),u=t.extend({getImageThumbnailUrl:function(){return this.media.get("metadata").imageUrl||t.prototype.getImageThumbnailUrl.call(this)}}),v=function(a,b){var d={PLAY_HIDE:{kind:"html",providerExpandMessage:"Play",providerCollapseMessage:"Hide"},VIEW_HIDE:{kind:"html",providerExpandMessage:"View",providerCollapseMessage:"Hide"},VIEW_IMAGE:{kind:"image",providerIcon:"icon-images",providerExpandMessage:"View",providerCollapseMessage:"Hide"}},e=function(a,b){return _.extend(d[a],{providerIcon:b})},f=null,g=null,h=c.Media.MEDIA_TYPES;switch(a.get("mediaType")){case h.IMAGE:case h.IMAGE_UPLOAD:f=d.VIEW_IMAGE;break;case h.FACEBOOK_PHOTO:g=u,f=d.VIEW_IMAGE;break;case h.WEBPAGE:case h.FACEBOOK_PAGE:case h.FACEBOOK_POST:f={kind:"webpage"};break;case h.YOUTUBE_VIDEO:g=q,f=e("PLAY_HIDE","icon-video");break;case h.TWITTER_STATUS:g=s,f=e("VIEW_HIDE","icon-twitter");break;case h.FACEBOOK_VIDEO:f=e("VIEW_HIDE","icon-video");break;case h.SOUNDCLOUD_SOUND:g=p,f=e("PLAY_HIDE","icon-music");break;case h.GOOGLE_MAP:f=e("VIEW_HIDE","icon-map");break;default:return null}if(null===g)switch(f.kind){case"webpage":g=k;break;case"html":g=o;break;case"image":g=t}var i=new m(_.extend(f,{postId:b})),j=new g({model:i,media:a});return j};return _.extend(h,{getDomain:i,WebPageRichMediaView:k,RichMediaLinkView:l,RichMediaViewModel:m,RichMediaView:n,IframeRichMediaView:o,SoundCloudRichMediaView:p,YouTubeRichMediaView:q,MeasurableIframeRichMediaView:r,TwitterRichMediaView:s,ImageRichMediaView:t,FacebookPhotoRichMediaView:u,instantiateRichMediaView:v})}),DISQUS.define("next.lounge.views.uploads",function(){"use strict";var a=DISQUS.use("next.lounge.views"),b=a.Lounge.getInstance(),c=a.LoungeSubView,d=DISQUS.use("next.utils"),e=DISQUS.use("next.models"),f=DISQUS.strings.get,g=function(a){if(!a)throw new Error("Cannot instantinate MediaStore without a valid storageKey!");this._storageKey=a,this._store=Modernizr.localstorage?window.localStorage:DISQUS.next.utils.hashStorage};_.extend(g.prototype,{getItems:function(){var a=this._store.getItem(this._storageKey);return a&&JSON.parse(a)||{}},clear:function(){this._store.removeItem(this._storageKey)},getItem:function(a){return this.getItems()[a]},setItem:function(a,b){var c=this.getItems();return c[a]=b,this._store.setItem(this._storageKey,JSON.stringify(c)),b},removeItem:function(a){var b=this.getItems();return a in b?(delete b[a],this._store.setItem(this._storageKey,JSON.stringify(b)),!0):!1}});var h=c.extend({events:function(){var a={"click [data-action=attach]":"_attachMedia"};return window.FormData&&_.extend(a,{dragover:"_dragOn",dragenter:"_dragOn",dragleave:"_dragOff",dragexit:"_dragOff",drop:"_drop"}),a},initialize:function(a){this.parent=a.parent,this.urls=a.urls},setElement:function(){var a=c.prototype.setElement.apply(this,arguments);return this.$dragPlaceholder=this.$el.find("[data-role=drag-drop-placeholder]"),this.$mediaSelector&&this.$mediaSelector.off(),this.$mediaSelector=this.$el.find("input[type=file][data-role=media-upload]"),this.$mediaSelector.on("change",_.bind(this._selectorChange,this)),a},_toggleDragPlaceholder:_.throttle(function(a){a?this.$dragPlaceholder.show():this.$dragPlaceholder.hide()},50),_selectorChange:function(a){this.uploadMedia(a.target.files);var c=b.switches.enabled("next_dragdrop_nag");c&&a.target.files&&Modernizr.localstorage&&!window.localStorage.getItem("usedDragDrop")&&this.trigger("uploader:alert",f("Did you know you can drag and drop images too? Try it now: drag images below."),{},function(){window.localStorage.setItem("usedDragDrop","1")})},_dragOn:function(a){a.stop(),this._toggleDragPlaceholder(!0),this.trigger("uploader:dragEnter")},_dragOff:function(a){a.stop(),this._toggleDragPlaceholder(!1)},_drop:function(a){a.stop(),window.localStorage.setItem("usedDragDrop","1"),this._toggleDragPlaceholder(!1),this.uploadMedia(a.originalEvent.dataTransfer.files)},_attachMedia:function(a){a.stop(),this.$mediaSelector.click()},_uploadMediaModern:function(a){for(var b=this,c=new FormData,e=0,g=a[e];g;g=a[++e])g.type.match(/^image\//)&&c.append("attachment",g);c.append("json","true"),this.parent&&c.append("id",this.parent.id);var h=d.CORS.request("POST",this.urls.add,function(){if(void 0===h.readyState||4===h.readyState&&200===h.status){var a=JSON.parse(h.responseText);a.success?b.trigger("uploader:addMedia",a.media):b.trigger("uploader:alert",a.message,"error")}},function(){var a=f("Unfortunately your image upload failed. Please verify that your image is under 2MB. If you continue seeing this error, please try again later.");413===h.status&&(a=f("Sorry, but the file you submitted is larger than 2 MB. Please make it smaller and try again.")),b.trigger("uploader:alert",a,"error")});h.withCredentials=!0,h.send(c)},_uploadMediaLegacy:function(){var a=this,b=document.createElement("iframe"),c=document.createElement("form"),d=this.$mediaSelector[0];$(d).off();var e=$(d.cloneNode(!0));if(d.parentNode.replaceChild(e[0],d),e.on("change",_.bind(this._selectorChange,this)),this.$mediaSelector=e,b.style.display="none",b.name="uploadFrame"+ +new Date,c.style.display="none",c.target=b.name,c.action=this.urls.add,c.method="post",c.appendChild(b),c.appendChild(d),this.parent){var f=document.createElement("input");f.type="hidden",f.name="id",f.value=this.parent.id,c.appendChild(f)}c.enctype="multipart/form-data",c.encoding="multipart/form-data";var g=function(b){var d=b.originalEvent,e=JSON.parse(d.data);"upload"===e.name&&($(c).remove(),$(window).off("message",g),e.data.success?a.trigger("uploader:addMedia",e.data.media):a.trigger("uploader:alert",e.data.message,"error"))};$(window).on("message",g),this.updateDom(function(){this.$el.append(c),c.submit()},this)},uploadMedia:function(a){var b=window.FormData?"Modern":"Legacy";return this.uploadMedia=this["_uploadMedia"+b],this.uploadMedia(a)}}),i=c.extend({events:{"click [data-action=detach]":"onDetach"},initialize:function(){this.urls=this.options.urls;var a=this.options.mediaStorageKey;this.mediaStore=a&&new g(a),this.collection=new Backbone.Collection,this.mediaStore&&this.collection.reset(_.values(this.mediaStore.getItems())),this.listenTo(this.collection,{add:this.onAdd,remove:this.onRemove,reset:this.onReset})},setElement:function(){var a=c.prototype.setElement.apply(this,arguments);return this.collection&&this.collection.each(this._addElement,this),a},hasVisible:function(){return!!this.collection.length},onDetach:function(a){a.stop();var b=$(a.target).closest("li"),c=b.attr("data-media-id"),d=this.collection.where({location:c});this.collection.remove(d,{$el:b})},_addElement:function(a){var b=$(DISQUS.renderBlock("legacyMediaUpload",a.toJSON()));b.attr("data-media-id",a.get("location")),this.updateDom(function(){this.$el.append(b)},this)},onAdd:function(a){this.mediaStore&&this.mediaStore.setItem(a.get("location"),a),this._addElement(a)},onRemove:function(a,b,c){c.$el&&this.updateDom(function(){c.$el.remove()});var d=this.mediaStore&&this.mediaStore.getItem(a.get("location"));if(d){var e={media:JSON.stringify(d)};this.parent&&(e.id=this.parent.id);var f=new Image;f.src=DISQUS.serialize(this.urls.remove,e,!0),this.mediaStore.removeItem(d.location)}},onReset:function(){this.updateDom(function(){this.$el.empty()},this),this.mediaStore&&this.mediaStore.clear()}}),j=c.extend({initialize:function(){this._urlsCache={},this.collection=new Backbone.Collection([],{model:e.RichMedia,comparator:function(a){return a.get("index")}}),this.listenTo(this.collection,{add:this.onAdd,"change:id change:beingEdited":this.onAdd,remove:this.onRemove,reset:this.onReset,sort:this.onSort})},hasVisible:function(){return this.collection.any(function(a){return a.$el})},onAdd:function(a,b,c){if(!a.get("thumbnailUrl"))return!1;if(!c.force){if(a.$el)return;if(a.get("beingEdited")&&!c.isPasteEvent)return}var d=$(DISQUS.renderBlock("mediaUpload",{media:a.toJSON(),backupUrl:c.backupUrl}));a.$el=d,this.updateDom(function(){this.$el.append(d)},this)},onRemove:function(a){a.$el&&this.updateDom(function(){a.$el.remove(),a.$el=null})},onReset:function(a,b){_.each(b.previousModels,this.onRemove,this),a.each(function(c){this.onAdd(c,a,_.extend(b,{force:!0}))},this)},onSort:function(a){var b=a.chain().filter(function(a){return!!a.$el}).pluck("$el").value();this.$el.empty(),this.$el.append(b)},addMedia:function(a,b){var c=this,d=a.url,f=c._urlsCache[d];return f?(f.set(a,b),b=_.extend({merge:!0,sort:!1,backupUrl:d},b),c.collection.add(f,b),c.collection.sort(),void 0):((!a.beingEdited||b.isPasteEvent)&&(f=new e.RichMedia(a),c.collection.add(f,_.extend({merge:!0,backupUrl:d},b)),c._urlsCache[d]=f,(!f.get("beingEdited")||b.isPasteEvent)&&DISQUS.api.call("media/details.json",{method:"POST",data:{url:d},success:function(a){c._urlsCache[d].set(a.response,_.extend({backupUrl:d,sort:!1},b)),c.collection.sort()}})),void 0)},updateFromText:function(a,b,c){if(!a)return void this.collection.reset();var e=d.bleachFindUrls(a);e=_.uniq(e,!1,function(a){return a.url});var f={};_.each(e,function(d){f[d.url]=!0,d.beingEdited=d.index<b&&b<=d.endIndex||"."===a[d.endIndex],this.addMedia(d,_.extend({backupUrl:d.url},c))},this);var g=this.collection.pluck("url");f=_.keys(f);var h=_.difference(g,f);this.collection.remove(this.collection.filter(function(a){return _.contains(h,a.get("url"))}))}}),k=c.extend({initialize:function(){var a=this.options;this.parent=a.parent,this.legacyView=new i({mediaStorageKey:a.mediaStorageKey,urls:a.urls,parent:this.parent}),this.legacy=this.legacyView.collection,this.richView=new j({}),this.rich=this.richView.collection,this.listenTo(this.legacy,"all",this._updateEmpty),this.listenTo(this.rich,"all",this._updateEmpty)},setElement:function(){var a=c.prototype.setElement.apply(this,arguments);return this.legacyView&&(this.legacyView.setElement(this.$el.find("[data-role=media-legacy-list]")[0]),this.richView.setElement(this.$el.find("[data-role=media-rich-list]")[0]),this.rich.reset()),a},clear:function(){this.legacy.reset(),this.rich.reset()},_updateEmpty:function(){this.updateDom(function(){this.legacyView.hasVisible()||this.richView.hasVisible()?this.$el.removeClass("empty"):this.$el.addClass("empty")},this)}});return{MediaStore:g,MediaUploaderView:h,MediaUploadsLegacySubView:i,MediaUploadsRichSubView:j,MediaUploadsView:k}}),this.Handlebars=this.Handlebars||{},this.Handlebars.lounge=this.Handlebars.lounge||{},this.Handlebars.lounge.templates=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n    <div class="alert ',d=c["if"].call(a,a.type,{hash:{},inverse:Ue.noop,fn:Ue.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+='">\n        <a class="close" data-action="dismiss"></a>\n        ',d=c["if"].call(a,a.safe,{hash:{},inverse:Ue.program(6,i,b),fn:Ue.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </div>\n"}function g(a,b){var d;return(d=c.type)?d=d.call(a,{hash:{},data:b}):(d=a.type,d=typeof d===Re?d.apply(a):d),Se(d)}function h(a,b){var d,e,f="";return f+="\n        	<span>",e={hash:{},data:b},f+=Se((d=c.html,d?d.call(a,a.message,e):Te.call(a,"html",a.message,e)))+"</span>\n        "}function i(a,b){var d,e="";return e+="\n        	<span>",(d=c.message)?d=d.call(a,{hash:{},data:b}):(d=a.message,d=typeof d===Re?d.apply(a):d),e+=Se(d)+"</span>\n        "}function j(a,b){var d,e,f,g="";return g+='\n<form class="moderate ',d=c["if"].call(a,a.loading,{hash:{},inverse:Ue.noop,fn:Ue.program(9,k,b),data:b}),(d||0===d)&&(g+=d),g+='">\n    <h5>',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Add to blacklist"),f):Te.call(a,"t",gettext("Add to blacklist"),f)))+"</h5>\n    \n\n    ",e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,null==d||d===!1?d:d.id),{hash:{},inverse:Ue.noop,fn:Ue.program(11,l,b),data:b}),(e||0===e)&&(g+=e),g+='\n\n    <label><input type="checkbox" name="email" value="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.email,typeof d===Re?d.apply(a):d))+'"> ',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Email"),f):Te.call(a,"t",gettext("Email"),f)))+": "+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.email,typeof d===Re?d.apply(a):d))+'</label>\n        \n    <label><input type="checkbox" name="ip" value="'+Se((d=a.post,d=null==d||d===!1?d:d.ipAddress,typeof d===Re?d.apply(a):d))+'"> ',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("IP Address"),f):Te.call(a,"t",gettext("IP Address"),f)))+": "+Se((d=a.post,d=null==d||d===!1?d:d.ipAddress,typeof d===Re?d.apply(a):d))+'</label>\n\n    <label><input type="checkbox" name="retroactive" value="1"/> ',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Apply retroactively"),f):Te.call(a,"t",gettext("Apply retroactively"),f)))+'</label>\n\n    <div class="actions">\n        <button class="btn small" type="submit">',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Save"),f):Te.call(a,"t",gettext("Save"),f)))+'</button>\n        <button class="btn small" data-action="cancel">',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Cancel"),f):Te.call(a,"t",gettext("Cancel"),f)))+"</button>\n    </div>\n\n</form>\n"}function k(){return"loading"}function l(a,b){var d,e,f="";return f+='\n    <label><input type="checkbox" name="user" value="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'" checked="checked"/> ',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("User"),e):Te.call(a,"t",gettext("User"),e)))+": "+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.username,typeof d===Re?d.apply(a):d))+"</label>\n    "}function m(a,b){var d,e,f="";return f+='\n<form style="display:none">\n     <div id="recaptcha_widget" style="" class="captcha">\n        <div class="primary">\n            <div class="captcha-image">\n                <div id="recaptcha_image"></div>\n            </div>\n\n            <div class="recaptcha_only_if_incorrect_sol" style="display:none">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Incorrect please try again"),e):Te.call(a,"t",gettext("Incorrect please try again"),e)))+'</div>\n          \n            <div class="inputs">\n                <button class="btn" type="submit">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Submit"),e):Te.call(a,"t",gettext("Submit"),e)))+'</button>\n                <p class="input-wrapper">\n                    <input type="text" id="recaptcha_response_field" name="recaptcha_response_field" placeholder="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Enter the words above"),e):Te.call(a,"t",gettext("Enter the words above"),e)))+'"/>\n                </p>\n            </div>\n        </div>\n        <div class="secondary">\n            <p><a href="javascript:Recaptcha.reload()">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Get another CAPTCHA"),e):Te.call(a,"t",gettext("Get another CAPTCHA"),e)))+'</a></p>\n            <p class="recaptcha_only_if_image"><a href="javascript:Recaptcha.switch_type(\'audio\')">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Get an audio CAPTCHA"),e):Te.call(a,"t",gettext("Get an audio CAPTCHA"),e)))+'</a></p>\n            <p class="recaptcha_only_if_audio"><a href="javascript:Recaptcha.switch_type(\'image\')">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Get an image CAPTCHA"),e):Te.call(a,"t",gettext("Get an image CAPTCHA"),e)))+'</a></p>\n        </div>\n\n        <div class="actions">\n            \n        </div>\n     </div>\n</form>\n'}function n(a,b){var d,e="";return e+="\n    <strong>",(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d=typeof d===Re?d.apply(a):d),e+=Se(d)+"</strong>\n"}function o(a,b){var d,e,f="";return f+='\n<div>\n    <div class="primary">\n        <h3>',e={hash:{forum:{partial:"communityForum",context:a.forum,executePartial:!0}},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Top Discussions on %(forum)s"),e):Te.call(a,"t",gettext("Top Discussions on %(forum)s"),e)))+'</h3>\n        <div data-role="top-threads"></div>\n    </div>\n\n    <div class="secondary">\n        <h3>',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Top Commenters"),e):Te.call(a,"t",gettext("Top Commenters"),e)))+'</h3>\n\n        <div data-role="top-users"></div>\n    </div>\n</div>\n\n'}function p(a,b){var d,e,f="";return f+='\n    <div class="context-card tooltip-outer">\n        <div class="tooltip">\n            <div class="notch"></div>\n\n            <a href="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.profileUrl,typeof d===Re?d.apply(a):d))+'" class="avatar" data-action="profile" data-user="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'">\n                <img src="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'" class="user" alt="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Avatar"),e):Te.call(a,"t",gettext("Avatar"),e)))+'" />\n            </a>\n            <div class="content">\n                <h3><a href="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.profileUrl,typeof d===Re?d.apply(a):d))+'" data-action="profile" data-user="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'">'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.name,typeof d===Re?d.apply(a):d))+"</a></h3>\n\n                <p>",e={hash:{},data:b},f+=Se((d=c.html,d?d.call(a,(d=a.post,null==d||d===!1?d:d.excerpt),e):Te.call(a,"html",(d=a.post,null==d||d===!1?d:d.excerpt),e)))+"</p>\n            </div>\n\n        </div>\n    </div>\n"
}function q(a,b){var d,e,f="";return f+='\n<div>\n	<ul class="my-disqus-nav">\n		<li class="user-vote-count" data-role="notifications-tab">\n			<a href="#" title="notifications" data-action="notifications">\n				<span class="count"><span data-role="notification-count"></span> ',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("new"),e):Te.call(a,"t",gettext("new"),e)))+'</span>\n				<span class="label">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Notifications"),e):Te.call(a,"t",gettext("Notifications"),e)))+'</span>\n			</a>\n		</li>\n		<li class="user-comment-count active" data-role="network-tab">\n			<a href="#" title="network" data-action="network">\n				<span class="count">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Now"),e):Te.call(a,"t",gettext("Now"),e)))+'</span>\n				<span class="label">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("in your network"),e):Te.call(a,"t",gettext("in your network"),e)))+'</span>\n			</a>\n		</li>\n	</ul>\n\n	<div data-role="network" data-outbound-link="embed:mydisqus.network"></div>\n\n	<div data-role="notifications" data-outbound-link="embed:mydisqus.notifications"></div>\n</div>\n'}function r(a,b){var e,f="";return f+='\n    <form class="edit">\n        ',e=Ue.invokePartial(d.editTextarea,"editTextarea",a,c,d,b),(e||0===e)&&(f+=e),f+="\n    </form>\n"}function s(a,b){var d,e,f="";return f+='\n    <div class="textarea-wrapper">\n       <textarea class="textarea">'+Se((d=a.post,d=null==d||d===!1?d:d.raw_message,typeof d===Re?d.apply(a):d))+'</textarea>\n    </div>\n    <button class="btn small" type="submit">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Save Edit"),e):Te.call(a,"t",gettext("Save Edit"),e)))+"</button>\n"}function t(a,b){var e,f,g,h="";return h+='\n    <form class="edit">\n        <header class="fullscreen-header fullscreen compose-header">\n            <nav class="global-nav">\n                <ul>\n                    <li class="cancel">\n                        <button class="btn btn-icon btn-blank cancel" title="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Cancel"),g):Te.call(a,"t",gettext("Cancel"),g)))+'" type="button" data-action="cancel"><span class="icon icon-cancel"></span></button>\n                    </li>\n                    <li class="tab-title">\n                        <hgroup>\n                            <h1>',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Edit comment"),g):Te.call(a,"t",gettext("Edit comment"),g)))+'</h1>\n\n                            <img data-role="user-avatar" class="user-avatar" src="'+Se((e=a.user,e=null==e||e===!1?e:e.avatar,e=null==e||e===!1?e:e.cache,typeof e===Re?e.apply(a):e))+'"/>\n                            <span class="username">'+Se((e=a.user,e=null==e||e===!1?e:e.name,typeof e===Re?e.apply(a):e))+'</span>\n\n                        </hgroup>\n                    </li>\n                    <li class="post">\n                        <button class="btn highlight" type="submit">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Save "),g):Te.call(a,"t",gettext("Save "),g)))+"</button>\n                    </li>\n                </ul>\n            </nav>\n        </header>\n\n        ",f=Ue.invokePartial(d.editTextarea,"editTextarea",a,c,d,b),(f||0===f)&&(h+=f),h+="\n    </form>\n"}function u(a,b){var d,e="";return e+="\n\n    \n    ",d=c["if"].call(a,a.sessionId,{hash:{},inverse:Ue.noop,fn:Ue.program(30,v,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n"}function v(a,b){var d,e,f="";return f+="\n        ",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isSession),{hash:{},inverse:Ue.program(34,y,b),fn:Ue.program(31,w,b),data:b}),(e||0===e)&&(f+=e),f+="\n    "}function w(a,b){var d,e,f="";return f+="\n            ",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isEditable),{hash:{},inverse:Ue.noop,fn:Ue.program(32,x,b),data:b}),(e||0===e)&&(f+=e),f+="\n        "}function x(a,b){var d,e,f="";return f+='\n                <a href="',e={hash:{},data:b},f+=Se((d=c.g,d?d.call(a,"urls.editProfile",e):Te.call(a,"g","urls.editProfile",e)))+'" target="_blank" class="btn small">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Edit profile"),e):Te.call(a,"t",gettext("Edit profile"),e)))+"</a>\n            "}function y(a,b){var d,e,f="";return f+="\n            ",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isPrivate),{hash:{},inverse:Ue.program(37,A,b),fn:Ue.program(35,z,b),data:b}),(e||0===e)&&(f+=e),f+="\n        "}function z(a,b){var d,e,f,g="";return g+='\n                <span class="btn follow-btn private small"><i aria-hidden="true" class="icon-lock"></i>',f={hash:{},data:b},d=c.t,e=d?d.call(a,gettext("Private"),f):Te.call(a,"t",gettext("Private"),f),(e||0===e)&&(g+=e),g+="</span>\n            "}function A(a,b){var d,e,f="";return f+="\n                ",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isFollowing),{hash:{},inverse:Ue.program(40,C,b),fn:Ue.program(38,B,b),data:b}),(e||0===e)&&(f+=e),f+="\n            "}function B(a,b){var d,e,f="";return f+='\n                    <a href="#" class="btn follow-btn small active" data-action="toggleFollow">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Following"),e):Te.call(a,"t",gettext("Following"),e)))+"</a>\n                "}function C(a,b){var d,e,f="";return f+='\n                    <a href="#" class="btn follow-btn small" data-action="toggleFollow">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Follow"),e):Te.call(a,"t",gettext("Follow"),e)))+"</a>\n                "}function D(a,b){var d,e="";return e+='\n    <span data-role="username">',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d=typeof d===Re?d.apply(a):d),e+=Se(d)+"</span>\n"}function E(a,b){var e,f,g,h="";return h+='\n<form action="" class="reply ',e=c["if"].call(a,a.parent,{hash:{},inverse:Ue.noop,fn:Ue.program(45,F,b),data:b}),(e||0===e)&&(h+=e),h+=" ",f=c["if"].call(a,(e=a.user,null==e||e===!1?e:e.id),{hash:{},inverse:Ue.noop,fn:Ue.program(47,G,b),data:b}),(f||0===f)&&(h+=f),h+='">\n    ',f=Ue.invokePartial(d.fullscreenFormHeader,"fullscreenFormHeader",a,c,d,b),(f||0===f)&&(h+=f),h+='\n\n    <div class="alert error" style="display:none" role="alert">\n        <a class="close" data-action="dismiss-alert" title="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Dismiss"),g):Te.call(a,"t",gettext("Dismiss"),g)))+'"></a>\n        <span><!-- error goes here --></span>\n    </div>\n\n    <div class="postbox">\n        <div class="avatar">\n            ',f=c["if"].call(a,(e=a.user,(null==e||e===!1?e:e.id)&&(e=a.user,"0"!==(null==e||e===!1?e:e.id))),{hash:{},inverse:Ue.program(51,I,b),fn:Ue.program(49,H,b),data:b}),(f||0===f)&&(h+=f),h+='\n        </div>\n\n            <div class="textarea-wrapper" data-role="textarea" dir="auto">\n                <textarea class="textarea" placeholder="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Leave a message..."),g):Te.call(a,"t",gettext("Leave a message..."),g)))+'">',(f=c.message)?f=f.call(a,{hash:{},data:b}):(f=a.message,f=typeof f===Re?f.apply(a):f),h+=Se(f)+'</textarea>\n                <div data-role="drag-drop-placeholder" class="media-drag-hover" style="display: none">\n                    <div class="drag-text">\n                        &#11015; ',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Drag and drop your images here to upload them."),g):Te.call(a,"t",gettext("Drag and drop your images here to upload them."),g)))+"\n                    </div>\n                </div>\n                ",f=c["if"].call(a,a.allowMedia,{hash:{},inverse:Ue.noop,fn:Ue.program(53,J,b),data:b}),(f||0===f)&&(h+=f),h+='\n                <div class="post-actions">\n                    <ul class="wysiwyg">\n                        ',f=c["if"].call(a,a.allowMedia,{hash:{},inverse:Ue.noop,fn:Ue.program(55,K,b),data:b}),(f||0===f)&&(h+=f),h+="\n                        \n                    </ul>\n                    \n                    ",f=c["if"].call(a,(e=a.user,null==e||e===!1?e:e.id),{hash:{},inverse:Ue.noop,fn:Ue.program(61,O,b),data:b}),(f||0===f)&&(h+=f),h+='\n                </div>\n            </div>\n            <section data-role="auth-or-ident" class="auth-section ',f=c.unless.call(a,(e=a.user,null==e||e===!1?e:e.id),{hash:{},inverse:Ue.noop,fn:Ue.program(64,Q,b),data:b}),(f||0===f)&&(h+=f),h+='">\n                ',f=c.unless.call(a,(e=a.user,null==e||e===!1?e:e.id),{hash:{},inverse:Ue.noop,fn:Ue.program(66,R,b),data:b}),(f||0===f)&&(h+=f),h+="\n                ",f=c["if"].call(a,a.audienceSyncRequired,{hash:{},inverse:Ue.noop,fn:Ue.program(68,S,b),data:b}),(f||0===f)&&(h+=f),h+="\n            </section>\n    </div>\n</form>\n"}function F(){return"expanded"}function G(){return"authenticated"}function H(a){var b,c="";return c+='\n                <a href="'+Se((b=a.user,b=null==b||b===!1?b:b.profileUrl,typeof b===Re?b.apply(a):b))+'" class="user" data-action="profile" data-user="'+Se((b=a.user,b=null==b||b===!1?b:b.id,typeof b===Re?b.apply(a):b))+'">\n                    <img data-role="user-avatar" src="'+Se((b=a.user,b=null==b||b===!1?b:b.avatar,b=null==b||b===!1?b:b.cache,typeof b===Re?b.apply(a):b))+'"/>\n                </a>\n            '}function I(a){var b,c="";return c+='\n                <span class="user">\n                    <img data-role="user-avatar" src="'+Se((b=a.user,b=null==b||b===!1?b:b.avatar,b=null==b||b===!1?b:b.cache,typeof b===Re?b.apply(a):b))+'"/>\n                </span>\n            '}function J(){var a="";return a+='\n                    <div class="media-preview empty" data-role="media-preview">\n                        <ul data-role="media-legacy-list"></ul>\n                        <ul data-role="media-rich-list"></ul>\n                        <div class="media-expanded empty" data-role="media-preview-expanded">\n                            \n                            <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="\n                                 data-role="media-preview-expanded-image">\n                        </div>\n                    </div>\n                '}function K(a,b){var d,e,f,g="";return g+='\n                            <li>\n                                <a href="#" tabindex="-1" data-action="attach" class="attach" title="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Upload Images"),f):Te.call(a,"t",gettext("Upload Images"),f)))+'"><span>',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Attach"),f):Te.call(a,"t",gettext("Attach"),f)))+'</span></a>\n                                <input type="file" data-role="media-upload"\n                                       tabindex="-1"\n                                       ',e=c["with"].call(a,"_window_",{hash:{},inverse:Ue.noop,fn:Ue.program(56,L,b),data:b}),(e||0===e)&&(g+=e),g+="\n                                >\n                            </li>\n                        "}function L(a,b){var d,e="";return e+="\n                                           ",d=c["if"].call(a,"undefined"==typeof a.FormData,{hash:{},inverse:Ue.program(59,N,b),fn:Ue.program(57,M,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                        "}function M(){var a="";return a+='\n                                                \n                                                class="ie"\n                                                name="attachment"\n                                           '}function N(){return'\n                                                class="regular"\n                                                accept="image/*"\n                                           '}function O(a,b){var d,e="";return e+="\n                        ",d=c.unless.call(a,a.audienceSyncRequired,{hash:{},inverse:Ue.noop,fn:Ue.program(62,P,b),data:b}),(d||0===d)&&(e+=d),e+="\n                    "}function P(a,b){var d,e,f="";return f+='\n                        <div class="logged-in auth-section">\n                            <section>\n                                <div class="temp-post" style="text-align: right">\n                                    <button class="btn">\n                                    ',e={hash:{name:{partial:"formUser",context:a.user,executePartial:!0}},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Post as %(name)s"),e):Te.call(a,"t",gettext("Post as %(name)s"),e)))+"\n                                    </button>\n                                </div>\n                            </section>\n                        </div>\n                        "}function Q(){return"logged-out"}function R(a,b){var e,f,g,h="";return h+='\n                    <div class="connect">\n                        <h6>',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Sign in with"),g):Te.call(a,"t",gettext("Sign in with"),g)))+"</h6>\n                        ",f=Ue.invokePartial(d.loginButtons,"loginButtons",a,c,d,b),(f||0===f)&&(h+=f),h+="\n                    </div>\n                    ",f=Ue.invokePartial(d.guestForm,"guestForm",a,c,d,b),(f||0===f)&&(h+=f),h+="\n                "}function S(a,b){var e,f="";return f+="\n                    ",e=Ue.invokePartial(d.audienceSync,"audienceSync",a,c,d,b),(e||0===e)&&(f+=e),f+="\n                "}function T(a,b){var d,e="";return e+='\n    <ul data-role="login-menu" class="services login-buttons">\n        ',d=c["with"].call(a,"_global_",{hash:{},inverse:Ue.noop,fn:Ue.program(71,U,b),data:b}),(d||0===d)&&(e+=d),e+='\n        <li class="auth-disqus">\n            <button type="button" data-action="auth:disqus" title="Disqus"><i class="icon-disqus"></i></button>\n        </li>\n        <li class="auth-facebook">\n            <button type="button" data-action="auth:facebook" title="Facebook"><i class="icon-facebook-circle"></i></button>\n        </li>\n        <li class="auth-twitter">\n            <button type="button" data-action="auth:twitter" title="Twitter"><i class="icon-twitter-circle"></i></button>\n        </li>\n        <li class="auth-google">\n            <button type="button" data-action="auth:google" title="Google"><i class="icon-google-plus-circle"></i></button>\n        </li>\n        <li class="auth-signup">\n            <button type="button" data-action="auth:disqus" title="Disqus">Sign up for Disqus</button>\n        </li>\n    </ul>\n'}function U(a,b){var d,e,f="";return f+="\n            ",e=c["if"].call(a,a.sso&&(d=a.sso,null==d||d===!1?d:d.url),{hash:{},inverse:Ue.noop,fn:Ue.program(72,V,b),data:b}),(e||0===e)&&(f+=e),f+="\n        "}function V(a,b){var d,e,f="";return f+='\n                <li class="sso">\n                    <button type="button" data-action="auth:sso"\n                       title="'+Se((d=a.sso,d=null==d||d===!1?d:d.name,typeof d===Re?d.apply(a):d))+'"\n                       class="',e=c["if"].call(a,(d=a.sso,null==d||d===!1?d:d.button),{hash:{},inverse:Ue.program(75,X,b),fn:Ue.program(73,W,b),data:b}),(e||0===e)&&(f+=e),f+='">\n                        ',e=c["if"].call(a,(d=a.sso,null==d||d===!1?d:d.button),{hash:{},inverse:Ue.program(79,Z,b),fn:Ue.program(77,Y,b),data:b}),(e||0===e)&&(f+=e),f+="\n                    </button>\n                </li>\n            "}function W(){return"image"}function X(){return"no-image"}function Y(a){var b,c="";return c+='\n                            <img alt="'+Se((b=a.sso,b=null==b||b===!1?b:b.name,typeof b===Re?b.apply(a):b))+'" src="'+Se((b=a.sso,b=null==b||b===!1?b:b.button,typeof b===Re?b.apply(a):b))+'"/>\n                        '}function Z(a){var b,c="";return c+="\n                            "+Se((b=a.sso,b=null==b||b===!1?b:b.name,typeof b===Re?b.apply(a):b))+"\n                        "}function $(a,b){var d,e,f,g="";return g+='\n<div class="guest">\n    <h6 class="guest-form-title">\n        ',d=c["if"].call(a,a.allowAnonPost,{hash:{},inverse:Ue.program(84,ab,b),fn:Ue.program(82,_,b),data:b}),(d||0===d)&&(g+=d),g+='\n    </h6>\n\n    <div class="what-is-disqus help-icon">\n        <div id="rules" class="tooltip show">\n            <h3>',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("DISQUS is a conversation network"),f):Te.call(a,"t",gettext("DISQUS is a conversation network"),f)))+"</h3>\n            <ul>\n                <li><span>",f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Disqus never moderates or censors. The rules on this community are its own."),f):Te.call(a,"t",gettext("Disqus never moderates or censors. The rules on this community are its own."),f)))+"</span></li>\n                <li><span>",f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Your email is safe with us. It's only used for moderation and optional notifications."),f):Te.call(a,"t",gettext("Your email is safe with us. It's only used for moderation and optional notifications."),f)))+"</span></li>\n                <li><span>",f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Don't be a jerk or do anything illegal. Everything is easier that way."),f):Te.call(a,"t",gettext("Don't be a jerk or do anything illegal. Everything is easier that way."),f)))+'</span></li>\n                </ul>\n            <p class="clearfix"><a href="http://docs.disqus.com/kb/terms-and-policies/" class="btn btn-small" target="_blank">',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Read full terms and conditions"),f):Te.call(a,"t",gettext("Read full terms and conditions"),f)))+'</a></p>\n        </div>\n    </div>\n\n    <p class="input-wrapper">\n        <input dir="auto" type="text" placeholder="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Name"),f):Te.call(a,"t",gettext("Name"),f)))+'" name="author-name" maxlength="30" />\n    </p>\n\n    <div class="guest-details ',e=c["with"].call(a,"_global_",{hash:{},inverse:Ue.noop,fn:Ue.program(86,bb,b),data:b}),(e||0===e)&&(g+=e),g+='" data-role="guest-details">\n        <p class="input-wrapper">\n            <input dir="auto" type="email" placeholder="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Email"),f):Te.call(a,"t",gettext("Email"),f)))+'" name="author-email"/>\n        </p>\n\n        <p class="input-wrapper">\n            <input dir="auto" type="password" placeholder="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Password"),f):Te.call(a,"t",gettext("Password"),f)))+'" name="author-password"/>\n        </p>\n        ',e=c["if"].call(a,a.allowAnonPost,{hash:{},inverse:Ue.program(90,db,b),fn:Ue.program(88,cb,b),data:b}),(e||0===e)&&(g+=e),g+='\n\n    </div>\n</div>\n<div class="proceed">\n    ',e=c["if"].call(a,a.allowAnonPost,{hash:{},inverse:Ue.program(94,fb,b),fn:Ue.program(92,eb,b),data:b}),(e||0===e)&&(g+=e),g+="\n</div>\n"}function _(a,b){var d,e,f="";return f+="\n            ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("or pick a name"),e):Te.call(a,"t",gettext("or pick a name"),e)))+"\n        "}function ab(a,b){var d,e,f="";return f+="\n            ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("or register with Disqus"),e):Te.call(a,"t",gettext("or register with Disqus"),e)))+"\n        "}function bb(a,b){var d,e;return e=c["if"].call(a,a.sso&&(d=a.sso,null==d||d===!1?d:d.url),{hash:{},inverse:Ue.noop,fn:Ue.program(45,F,b),data:b}),e||0===e?e:""}function cb(a,b){var d,e,f="";return f+='\n            <div class="guest-checkbox">\n                <label>\n                    <input type="checkbox" name="author-guest"/>\n                    ',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("I'd rather post as guest"),e):Te.call(a,"t",gettext("I'd rather post as guest"),e)))+"\n                </label>\n            </div>\n        "}function db(){return'\n            <input type="checkbox" name="author-guest" style="display:none"/>\n        '}function eb(a,b){var d,e,f="";return f+='\n         <button type="submit" class="btn submit" aria-label="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Post"),e):Te.call(a,"t",gettext("Post"),e)))+'"><span class="icon-proceed"></span></button>\n        <button type="submit" class="btn next" aria-label="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Next"),e):Te.call(a,"t",gettext("Next"),e)))+'"><span class="icon-proceed"></span></button>\n    '}function fb(a,b){var d,e,f="";return f+='\n        <button type="submit" class="btn submit" aria-label="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Next"),e):Te.call(a,"t",gettext("Next"),e)))+'"><span class="icon-proceed"></span></button>\n    '}function gb(a,b){var d,e,f,g="";return g+='\n<div class="audiencesync">\n    <h6>',f={hash:{forumName:a.forumName},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Connect with %(forumName)s"),f):Te.call(a,"t",gettext("Connect with %(forumName)s"),f)))+'</h6>\n    <div class="services">\n        <div class="icons-container">\n            <img class="icon" alt="Disqus"\n                 src="',f={hash:{},data:b},g+=Se((d=c.g,d?d.call(a,"urls.media",f):Te.call(a,"g","urls.media",f)))+'/assets/img/sync-icon.png">\n            <img class="icon" alt="arrow to"\n                 src="',f={hash:{},data:b},g+=Se((d=c.g,d?d.call(a,"urls.media",f):Te.call(a,"g","urls.media",f)))+'/assets/img/sync-arrow.png">\n            <img class="icon" alt="',(e=c.forumName)?e=e.call(a,{hash:{},data:b}):(e=a.forumName,e=typeof e===Re?e.apply(a):e),g+=Se(e)+'"\n                 src="',f={hash:{},data:b},g+=Se((d=c.g,d?d.call(a,"urls.root",f):Te.call(a,"g","urls.root",f)))+"/api/applications/icons/",(e=c.apiKey)?e=e.call(a,{hash:{},data:b}):(e=a.apiKey,e=typeof e===Re?e.apply(a):e),g+=Se(e)+'.png">\n        </div>\n        <p>\n            ',f={hash:{forumName:a.forumName},data:b},g+=Se((d=c.t,d?d.call(a,gettext("%(forumName)s needs permission to access your account."),f):Te.call(a,"t",gettext("%(forumName)s needs permission to access your account."),f)))+'\n        </p>\n    </div>\n    <button type="button" data-action="audiencesync"\n            class="proceed btn submit">',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Next"),f):Te.call(a,"t",gettext("Next"),f)))+"</button>\n</div>\n"}function hb(a,b){var d,e,f="";return f+='\n<li class="publisher-border-color">\n    <div class="media-box">\n        <div class="media-ct">\n            <div class="media-surface">\n                <a href="'+Se((d=a.media,d=null==d||d===!1?d:d.url,typeof d===Re?d.apply(a):d))+'" target="_blank">\n                    <img src="'+Se((d=a.media,d=null==d||d===!1?d:d.thumbnailUrl,typeof d===Re?d.apply(a):d))+'" alt="',e=c["if"].call(a,(d=a.media,null==d||d===!1?d:d.title),{hash:{},inverse:Ue.program(101,jb,b),fn:Ue.program(99,ib,b),data:b}),(e||0===e)&&(f+=e),f+='">\n                </a>\n            </div>\n        </div>\n    </div>\n</li>\n'}function ib(a){var b;return Se((b=a.media,b=null==b||b===!1?b:b.title,typeof b===Re?b.apply(a):b))}function jb(a,b){var d,e;return e={hash:{},data:b},Se((d=c.t,d?d.call(a,gettext("Media attachment"),e):Te.call(a,"t",gettext("Media attachment"),e)))}function kb(a,b){var d,e,f="";return f+='\n<li class="publisher-border-color" data-media-id="',(d=c.location)?d=d.call(a,{hash:{},data:b}):(d=a.location,d=typeof d===Re?d.apply(a):d),f+=Se(d)+'">\n    <div class="media-box">\n        <div class="media-ct">\n            <div class="media-surface">\n                <img src="',(d=c.location)?d=d.call(a,{hash:{},data:b}):(d=a.location,d=typeof d===Re?d.apply(a):d),f+=Se(d)+'?w=128&h=128" alt="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Media attachment"),e):Te.call(a,"t",gettext("Media attachment"),e)))+'">\n                <a href="#" class="media-delete" data-action="detach">&#10005;</a>\n            </div>\n        </div>\n    </div>\n</li>\n'}function lb(a,b){var d,e,f,g="";return g+='\n<header class="fullscreen-header fullscreen compose-header">\n        <nav class="global-nav">\n            <ul>\n                <li class="cancel">\n                    <button class="btn btn-icon btn-blank cancel" title="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Cancel"),f):Te.call(a,"t",gettext("Cancel"),f)))+'" type="button" data-action="cancel"><span class="icon icon-cancel"></span></button>\n                </li>\n                <li class="tab-title">\n                    <hgroup>\n                        ',e=c["if"].call(a,a.parent,{hash:{},inverse:Ue.program(108,nb,b),fn:Ue.program(106,mb,b),data:b}),(e||0===e)&&(g+=e),g+="\n                        ",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.id),{hash:{},inverse:Ue.program(112,pb,b),fn:Ue.program(110,ob,b),data:b}),(e||0===e)&&(g+=e),g+='\n                    </hgroup>\n                </li>\n                <li class="post">\n                    <button class="btn highlight">',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Post "),f):Te.call(a,"t",gettext("Post "),f)))+"</button>\n                </li>\n            </ul>\n        </nav>\n        ",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.id),{hash:{},inverse:Ue.program(116,rb,b),fn:Ue.program(114,qb,b),data:b}),(e||0===e)&&(g+=e),g+="\n    </header>\n"}function mb(a){var b,c="";return c+="\n                            <h1>Reply to "+Se((b=a.parent,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.name,typeof b===Re?b.apply(a):b))+"</h1>\n                        "}function nb(){return"\n                            <h1>New Comment</h1>\n                        "}function ob(a){var b,c="";return c+='\n                            <img data-role="user-avatar" class="user-avatar" src="'+Se((b=a.user,b=null==b||b===!1?b:b.avatar,b=null==b||b===!1?b:b.cache,typeof b===Re?b.apply(a):b))+'"/>\n                            <button class="btn btn-dropdown" data-action="toggle-services-menu" type="button">\n                                <h2>'+Se((b=a.user,b=null==b||b===!1?b:b.name,typeof b===Re?b.apply(a):b))+' <i class="icon icon-arrow"></i></h2>\n                            </button>\n                        '}function pb(){return'\n                            <button class="btn btn-dropdown" data-action="toggle-services-menu" type="button">\n                                <h2>Sign in to post <i class="icon icon-arrow"></i></h2>\n                            </button>\n                        '}function qb(a,b){var e,f="";return f+="\n            ",e=Ue.invokePartial(d.fullscreenLogoutMenu,"fullscreenLogoutMenu",a,c,d,b),(e||0===e)&&(f+=e),f+="\n        "}function rb(a,b){var e,f="";return f+="\n            ",e=Ue.invokePartial(d.loginButtons,"loginButtons",a,c,d,b),(e||0===e)&&(f+=e),f+="\n        "}function sb(a){var b,c="";return c+='\n    <ul data-role="logout-menu" class="services logout-button">\n        <li class="auth-logout">\n            <a class="button" href="'+Se((b=a.user,b=null==b||b===!1?b:b.logoutUrl,typeof b===Re?b.apply(a):b))+'" data-action="logout" title="Disqus">Log out of Disqus</button>\n        </li>\n    </ul>\n'}function tb(a,b){var d,e,f,g="";return g+='\n    <header class="fullscreen-header fullscreen title-header">\n        <nav class="global-nav">\n            <ul>\n                <li class="exit">\n                    <button class="btn btn-blank btn-icon exit" title="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Back"),f):Te.call(a,"t",gettext("Back"),f)))+'" data-action="back"><span\n                            class="icon icon-arrow-back"></span></button>\n                </li>\n                <li class="tab-title">\n                    <hgroup>\n                        <h1>'+Se((d=a.forum,d=null==d||d===!1?d:d.name,typeof d===Re?d.apply(a):d))+"</h1>\n                        <h2>",f={hash:{},data:b},g+=Se((d=c.html,d?d.call(a,(d=a.thread,null==d||d===!1?d:d.title),f):Te.call(a,"html",(d=a.thread,null==d||d===!1?d:d.title),f)))+'</h2>\n                    </hgroup>\n                </li>\n                <li class="compose">\n                    <button class="btn btn-icon btn-highlight" ',e=c["if"].call(a,(d=a.thread,null==d||d===!1?d:d.isClosed),{hash:{},inverse:Ue.noop,fn:Ue.program(121,ub,b),data:b}),(e||0===e)&&(g+=e),g+=' data-action="toggle-compose" title="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Compose"),f):Te.call(a,"t",gettext("Compose"),f)))+'">\n                        <span class="icon icon-pencil-large"></span>\n                    </button>\n                </li>\n            </ul>\n        </nav>\n    </header>\n'}function ub(){return"disabled"}function vb(a,b){var d,e="";return e+='\n<div class="survey-container">\n',d=c["if"].call(a,a.response,{hash:{},inverse:Ue.program(132,Bb,b),fn:Ue.program(124,wb,b),data:b}),(d||0===d)&&(e+=d),e+="\n</div>\n"}function wb(a,b){var d,e="";return e+="\n    ",d=c["if"].call(a,"like"===a.response,{hash:{},inverse:Ue.program(127,yb,b),fn:Ue.program(125,xb,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function xb(a,b){var d,e="";return e+='\n    <p class="desc">Thanks! We appreciate your feedback. Got more to say?</p>\n    <div class="btn-group">\n       <a href="mailto:',(d=c.mailto)?d=d.call(a,{hash:{},data:b}):(d=a.mailto,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'" class="btn btn-highlight" data-action="email">Email us</a>\n       <button class="btn btn-highlight" data-action="close">Close</button>\n    </div>\n    '}function yb(a,b){var d,e="";return e+="\n        ",d=c["if"].call(a,"opt-out"===a.response,{hash:{},inverse:Ue.program(130,Ab,b),fn:Ue.program(128,zb,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function zb(a,b){var d,e="";return e+='\n        <p class="desc">Thanks. <strong>Reload to see changes.</strong> Got more to say?</p>\n        <div class="btn-group">\n           <a href="mailto:',(d=c.mailto)?d=d.call(a,{hash:{},data:b}):(d=a.mailto,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'" class="btn btn-highlight" data-action="email">Email us</a>\n           <button class="btn btn-highlight" data-action="close">Close</button>\n        </div>\n        '}function Ab(a,b){var d,e="";return e+='\n        <p class="desc">Wed love to make Disqus better. Got something to say?</p>\n        <div class="btn-group">\n           <a href="mailto:',(d=c.mailto)?d=d.call(a,{hash:{},data:b}):(d=a.mailto,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'" class="btn btn-highlight" data-action="email">Email us</a>\n           <button class="btn btn-highlight" data-action="opt-out">Restore the old look</button>\n           <button class="btn btn-highlight" data-action="close">Close</button>\n        </div>\n        '}function Bb(){return'\n  <p class="desc">How do you like the new look of Disqus mobile?</p>\n  <div class="btn-group">\n     <button class="btn btn-highlight" data-action="love">Love it!</button>\n     <button class="btn btn-highlight" data-action="hate">Hate it</button>\n     <button class="btn btn-highlight" data-action="close">Don\'t care</button>\n  </div>\n'}function Cb(a,b){var e,f,g,h="";return h+='\n<div class="tooltip-outer">\n    <div class="tooltip">\n        <div class="notch"></div>\n        <a href="'+Se((e=a.user,e=null==e||e===!1?e:e.profileUrl,typeof e===Re?e.apply(a):e))+'" class="avatar" data-action="profile" data-user="'+Se((e=a.user,e=null==e||e===!1?e:e.id,typeof e===Re?e.apply(a):e))+'">\n            <img src="'+Se((e=a.user,e=null==e||e===!1?e:e.avatar,e=null==e||e===!1?e:e.cache,typeof e===Re?e.apply(a):e))+'" class="user" alt="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Avatar"),g):Te.call(a,"t",gettext("Avatar"),g)))+'" />\n        </a>\n        <div class="content">\n            <h3>\n                <a href="'+Se((e=a.user,e=null==e||e===!1?e:e.profileUrl,typeof e===Re?e.apply(a):e))+'" data-action="profile" data-user="'+Se((e=a.user,e=null==e||e===!1?e:e.id,typeof e===Re?e.apply(a):e))+'">'+Se((e=a.user,e=null==e||e===!1?e:e.name,typeof e===Re?e.apply(a):e))+"</a>\n                ",f=c["if"].call(a,(e=a.user,e=null==e||e===!1?e:e.thread,null==e||e===!1?e:e.canModerate),{hash:{},inverse:Ue.noop,fn:Ue.program(135,Db,b),data:b}),(f||0===f)&&(h+=f),h+="\n            </h3>\n\n            ",f=c["if"].call(a,(e=a.user,null==e||e===!1?e:e.about),{hash:{},inverse:Ue.noop,fn:Ue.program(137,Eb,b),data:b}),(f||0===f)&&(h+=f),h+='\n\n\n            <p class="stats" data-role="counters">\n                ',f=c["if"].call(a,(e=a.user,null!==(null==e||e===!1?e:e.numPosts)&&(e=a.user,null!==(null==e||e===!1?e:e.numLikesReceived))),{hash:{},inverse:Ue.noop,fn:Ue.program(139,Fb,b),data:b}),(f||0===f)&&(h+=f),h+='\n            </p>\n        </div>\n        <footer data-role="actions">\n            ',f=Ue.invokePartial(d.hovercardActions,"hovercardActions",a,c,d,b),(f||0===f)&&(h+=f),h+="\n        </footer>\n    </div>\n</div>\n"
}function Db(a,b){var d,e,f="";return f+='<span class="badge moderator">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("MOD"),e):Te.call(a,"t",gettext("MOD"),e)))+"</span>"}function Eb(a,b){var d,e,f="";return f+='\n                <p class="bio">',e={hash:{},data:b},f+=Se((d=c.truncate,d?d.call(a,(d=a.user,null==d||d===!1?d:d.about),80,e):Te.call(a,"truncate",(d=a.user,null==d||d===!1?d:d.about),80,e)))+"</p>\n            "}function Fb(a,b){var e,f="";return f+="\n                    ",e=Ue.invokePartial(d.hovercardCounters,"hovercardCounters",a,c,d,b),(e||0===e)&&(f+=e),f+="\n                "}function Gb(a,b){var d,e,f="";return f+="\n    ",e=c["if"].call(a,(d=a.user,1===(null==d||d===!1?d:d.numPosts)),{hash:{},inverse:Ue.program(144,Ib,b),fn:Ue.program(142,Hb,b),data:b}),(e||0===e)&&(f+=e),f+='\n    <span class="bullet"></span>\n    ',e=c["if"].call(a,(d=a.user,1===(null==d||d===!1?d:d.numLikesReceived)),{hash:{},inverse:Ue.program(148,Kb,b),fn:Ue.program(146,Jb,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function Hb(a,b){var d,e,f="";return f+="\n        ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("1 comment"),e):Te.call(a,"t",gettext("1 comment"),e)))+"\n    "}function Ib(a,b){var d,e,f="";return f+="\n        ",e={hash:{numPosts:(d=a.user,null==d||d===!1?d:d.numPosts)},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(numPosts)s comments"),e):Te.call(a,"t",gettext("%(numPosts)s comments"),e)))+"\n    "}function Jb(a,b){var d,e,f="";return f+="\n        ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("1 vote"),e):Te.call(a,"t",gettext("1 vote"),e)))+"\n    "}function Kb(a,b){var d,e,f="";return f+="\n        ",e={hash:{numLikesReceived:(d=a.user,null==d||d===!1?d:d.numLikesReceived)},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(numLikesReceived)s votes"),e):Te.call(a,"t",gettext("%(numLikesReceived)s votes"),e)))+"\n    "}function Lb(a,b){var e,f,g,h="";return h+='\n    <a href="'+Se((e=a.user,e=null==e||e===!1?e:e.profileUrl,typeof e===Re?e.apply(a):e))+'" class="full-profile" data-action="profile" data-user="'+Se((e=a.user,e=null==e||e===!1?e:e.id,typeof e===Re?e.apply(a):e))+'">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Full profile"),g):Te.call(a,"t",gettext("Full profile"),g)))+"</a>\n\n    ",f=Ue.invokePartial(d.followButton,"followButton",a,c,d,b),(f||0===f)&&(h+=f),h+="\n\n    &nbsp;\n"}function Mb(a,b){var e,f,g,h="";return h+='\n<div id="layout">\n    <header>\n        ',e=c.unless.call(a,a.fullscreen,{hash:{},inverse:Ue.noop,fn:Ue.program(153,Nb,b),data:b}),(e||0===e)&&(h+=e),h+='\n\n        \n        <div id="form"></div>\n\n        ',e=Ue.invokePartial(d.mainNavigation,"mainNavigation",a,c,d,b),(e||0===e)&&(h+=e),h+='\n    </header>\n\n    <section id="conversation" data-role="main" data-outbound-link="embed:comments">\n\n        <div id="posts">\n            <button class="alert realtime" style="display: none" data-action="load-queued-posts" data-role="realtime-notification">\n                <!-- Show 2 new posts. -->\n            </button>\n\n            <!-- This message appears when there are no comments -->\n            <div id="no-posts" style="display:none">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("No one has commented yet."),g):Te.call(a,"t",gettext("No one has commented yet."),g)))+'</div>\n\n            <ul id="post-list" class="post-list loading">\n            </ul>\n\n            <div class="load-more" data-role="more" style="display:none">\n                <a href="#" data-action="more-posts" class="btn">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Load more comments"),g):Te.call(a,"t",gettext("Load more comments"),g)))+'</a>\n            </div>\n        </div>\n\n    </section>\n\n    <section id="community" style="display:none" data-role="main" data-outbound-link="embed:community">\n        <!-- Community goes here -->\n    </section>\n\n    <section id="dashboard" style="display:none" data-role="main">\n        <!-- Dashboard goes here -->\n        <!-- Default message if there are no notifications or activity to show -->\n        <p style="line-height: 1.4">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Nothing for you here ... yet. But as you comment with Disqus and follow\n        other Disqus users, you will start to receive notifications here, as well as a personalized\n        feed of activity by you and the people you follow. So get out there and participate in\n        some discussions!"),g):Te.call(a,"t",gettext("Nothing for you here ... yet. But as you comment with Disqus and follow\n        other Disqus users, you will start to receive notifications here, as well as a personalized\n        feed of activity by you and the people you follow. So get out there and participate in\n        some discussions!"),g)))+'</p>\n    </section>\n\n    <section id="profile" style="display:none" data-role="main">\n    </section>\n\n    ',f=c["if"].call(a,a.fullscreen,{hash:{},inverse:Ue.noop,fn:Ue.program(155,Ob,b),data:b}),(f||0===f)&&(h+=f),h+='\n    <div id="discovery"></div>\n\n    <div id="footer">\n        <ul>\n            <li class="logo"><a href="http://disqus.com" title="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Powered by Disqus"),g):Te.call(a,"t",gettext("Powered by Disqus"),g)))+'">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Powered by Disqus"),g):Te.call(a,"t",gettext("Powered by Disqus"),g)))+'</a></li>            \n            <li id="thread-subscribe-button" class="email"> <!-- Three options: nothing, show-form, subscribed -->\n                <div class="default">\n                    <a href="#" data-action="subscribe"><i aria-hidden="true" class="icon-mail" title="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Subscribe and get email updates from this discussion"),g):Te.call(a,"t",gettext("Subscribe and get email updates from this discussion"),g)))+'"></i><span class="clip">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Subscribe"),g):Te.call(a,"t",gettext("Subscribe"),g)))+'</span> <i aria-hidden="true" class="icon-checkmark" title="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Subscribe and get email updates from this discussion"),g):Te.call(a,"t",gettext("Subscribe and get email updates from this discussion"),g)))+'"></i></a>\n                </div>\n                <div class="form">\n                    <div class="input-wrapper"><input id="thread-subscribe-email" type="email" placeholder="yourname@email.com"/></div>\n                </div>\n            </li>\n            <li class="install">\n                <a href="https://disqus.com/admin/signup/?utm_source='+Se((e=a.forum,e=null==e||e===!1?e:e.id,typeof e===Re?e.apply(a):e))+'&utm_medium=Disqus-Footer" target="_blank">\n                    <i aria-hidden="true" class="icon-disqus" title="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Add Disqus to your site"),g):Te.call(a,"t",gettext("Add Disqus to your site"),g)))+'"></i>\n                    <span class="clip">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Add Disqus to your site"),g):Te.call(a,"t",gettext("Add Disqus to your site"),g)))+"</span>\n                </a>\n            </li>\n        </ul>\n    </div>\n</div>\n"}function Nb(a,b){var e,f="";return f+="\n            ",e=Ue.invokePartial(d.topNavigation,"topNavigation",a,c,d,b),(e||0===e)&&(f+=e),f+="\n        "}function Ob(){return'\n        <div id="discovery-top"></div>\n    '}function Pb(a,b){var d,e,f,g="";return g+='\n    \n\n<li data-role="post-sort" class="active dropdown sorting">\n    <a href="#" data-nav="conversation"\n       class="dropdown-toggle publisher-nav-color" data-toggle="dropdown">\n        ',d=c["if"].call(a,"popular"===a.order,{hash:{},inverse:Ue.noop,fn:Ue.program(158,Qb,b),data:b}),(d||0===d)&&(g+=d),g+="\n        ",d=c["if"].call(a,"desc"===a.order,{hash:{},inverse:Ue.noop,fn:Ue.program(160,Rb,b),data:b}),(d||0===d)&&(g+=d),g+="\n        ",d=c["if"].call(a,"asc"===a.order,{hash:{},inverse:Ue.noop,fn:Ue.program(162,Sb,b),data:b}),(d||0===d)&&(g+=d),g+='\n        <span class="caret"></span>\n    </a>\n    <ul class="dropdown-menu">\n        <li ',d=c["if"].call(a,"popular"===a.order,{hash:{},inverse:Ue.noop,fn:Ue.program(164,Tb,b),data:b}),(d||0===d)&&(g+=d),g+='>\n            <a href="#" data-action="sort" data-sort="popular">',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Best"),f):Te.call(a,"t",gettext("Best"),f)))+"</a>\n        </li>\n\n        <li ",e=c["if"].call(a,"desc"===a.order,{hash:{},inverse:Ue.noop,fn:Ue.program(164,Tb,b),data:b}),(e||0===e)&&(g+=e),g+='>\n            <a href="#" data-action="sort" data-sort="desc">',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Newest"),f):Te.call(a,"t",gettext("Newest"),f)))+"</a>\n        </li>\n\n        <li ",e=c["if"].call(a,"asc"===a.order,{hash:{},inverse:Ue.noop,fn:Ue.program(164,Tb,b),data:b}),(e||0===e)&&(g+=e),g+='>\n            <a href="#" data-action="sort" data-sort="asc">',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Oldest"),f):Te.call(a,"t",gettext("Oldest"),f)))+"</a>\n        </li>\n    </ul>\n</li>\n"}function Qb(a,b){var d,e;return e={hash:{},data:b},Se((d=c.t,d?d.call(a,gettext("Best"),e):Te.call(a,"t",gettext("Best"),e)))}function Rb(a,b){var d,e;return e={hash:{},data:b},Se((d=c.t,d?d.call(a,gettext("Newest"),e):Te.call(a,"t",gettext("Newest"),e)))}function Sb(a,b){var d,e;return e={hash:{},data:b},Se((d=c.t,d?d.call(a,gettext("Oldest"),e):Te.call(a,"t",gettext("Oldest"),e)))}function Tb(){return'class="selected"'}function Ub(a,b){var d,e="";return e+="\n    <h4>",d=c["if"].call(a,1===a.count,{hash:{},inverse:Ue.program(169,Wb,b),fn:Ue.program(167,Vb,b),data:b}),(d||0===d)&&(e+=d),e+="</h4>\n"}function Vb(a,b){var d,e,f="";return f+="\n            ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("1 comment"),e):Te.call(a,"t",gettext("1 comment"),e)))+"\n        "}function Wb(a,b){var d,e,f="";return f+="\n            ",e={hash:{numPosts:a.count},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(numPosts)s comments"),e):Te.call(a,"t",gettext("%(numPosts)s comments"),e)))+"\n        "}function Xb(a,b){var d,e,f="";return f+='\n    <div id="discovery-top"></div>\n\n    <nav id="global-nav">\n        <div id="thread-votes" class="pull-right"></div>\n\n        <div id="realtime-toggle"></div>\n\n        <ul>\n            <li id="post-count">\n                ',e=c["with"].call(a,"count",(d=a.thread,null==d||d===!1?d:d.posts),{hash:{},inverse:Ue.noop,fn:Ue.program(172,Yb,b),data:b}),(e||0===e)&&(f+=e),f+="\n            </li>\n        </ul>\n    </nav>\n"}function Yb(a,b){var e,f="";return f+="\n                    ",e=Ue.invokePartial(d.postCount,"postCount",a,c,d,b),(e||0===e)&&(f+=e),f+="\n                "}function Zb(a,b){var e,f="";return f+='\n    <div id="main-nav" class="nav">\n        <ul>\n            ',e=Ue.invokePartial(d.postSort,"postSort",a,c,d,b),(e||0===e)&&(f+=e),f+="\n\n            ",e=c.unless.call(a,a.fullscreen,{hash:{},inverse:Ue.noop,fn:Ue.program(175,$b,b),data:b}),(e||0===e)&&(f+=e),f+="\n        </ul>\n    </div>\n"}function $b(a,b){var d,e,f="";return f+='\n            <li><a href="#" data-nav="community" class="publisher-nav-color"\n                   id="community-tab">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Community"),e):Te.call(a,"t",gettext("Community"),e)))+'</a></li>\n            <li><a href="#" data-nav="dashboard" style="display:none"\n                   class="publisher-nav-color">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("My Disqus"),e):Te.call(a,"t",gettext("My Disqus"),e)))+' <span\n                    class="notification-count" data-role="notification-count"\n                    style="display:none"></span></a></li>\n\n            <li class="user-menu dropdown" data-role="logout">\n                <!-- rendered dynamically -->\n            </li>\n\n            <li id="thread-share-menu" class="share-menu dropdown">\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown"\n                   title="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Share"),e):Te.call(a,"t",gettext("Share"),e)))+'">\n                    <span class="label">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Share"),e):Te.call(a,"t",gettext("Share"),e)))+'</span> <span\n                        class="icon-export"></span>\n                </a>\n                <ul class="share-menu dropdown-menu pull-right">\n                    <li class="share">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Share this discussion on"),e):Te.call(a,"t",gettext("Share this discussion on"),e)))+'\n                        <ul>\n                            <li class="twitter">\n                                <a data-action="share:twitter"\n                                   href="#">Twitter</a>\n                            </li>\n                            <li class="facebook">\n                                <a data-action="share:facebook" href="#">Facebook</a>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n            </li>\n            '}function _b(a,b){var d,e,f="";return f+='\n<div>\n    <ul class="network-activity" data-role="entries"></ul>\n\n    <div data-role="no-activity" style="display:none">\n        ',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("You have no activity."),e):Te.call(a,"t",gettext("You have no activity."),e)))+'\n    </div>\n\n    <div class="load-more" data-role="more-activity" style="display:none">\n        <a href="#" data-action="more" class="btn">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Load more activity"),e):Te.call(a,"t",gettext("Load more activity"),e)))+"</a>\n    </div>\n</div>\n"}function ac(a,b){var d,e,f="";return f+='\n    <li class="network-activity-group">\n        <h5>',e={hash:{forum:{partial:"networkForumLink",context:a.thread,executePartial:!0}},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Discussion on %(forum)s"),e):Te.call(a,"t",gettext("Discussion on %(forum)s"),e)))+'</h5>\n\n        \n\n        <h4><a href="'+Se((d=a.thread,d=null==d||d===!1?d:d.link,typeof d===Re?d.apply(a):d))+'">',e={hash:{},data:b},f+=Se((d=c.html,d?d.call(a,(d=a.thread,null==d||d===!1?d:d.title),e):Te.call(a,"html",(d=a.thread,null==d||d===!1?d:d.title),e)))+'</a></h4>\n\n        <ul data-role="posts" class="post-list"/>\n    </li>\n'}function bc(a,b){var d,e,f,g="";return g+='\n<li class="post">\n    <div class="post-content ',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.parent),{hash:{},inverse:Ue.noop,fn:Ue.program(182,cc,b),data:b}),(e||0===e)&&(g+=e),g+='">\n        <div class="avatar">\n            <img src="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'" class="source-avatar"/>\n            ',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.parent),{hash:{},inverse:Ue.noop,fn:Ue.program(184,dc,b),data:b}),(e||0===e)&&(g+=e),g+='\n        </div>\n        <div class="post-body">\n            <header>\n                ',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.parent),{hash:{},inverse:Ue.program(188,fc,b),fn:Ue.program(186,ec,b),data:b}),(e||0===e)&&(g+=e),g+='\n\n                <span class="bullet" aria-hidden="true"></span>\n                <a href="'+Se((d=a.post,d=null==d||d===!1?d:d.url,typeof d===Re?d.apply(a):d))+'" class="time-ago" title="'+Se((d=a.post,d=null==d||d===!1?d:d.formattedCreatedAt,typeof d===Re?d.apply(a):d))+'">'+Se((d=a.post,d=null==d||d===!1?d:d.relativeCreatedAt,typeof d===Re?d.apply(a):d))+'</a>\n            </header>\n            <div class="post-message publisher-anchor-color">\n                ',f={hash:{},data:b},g+=Se((d=c.html,d?d.call(a,(d=a.post,null==d||d===!1?d:d.message),f):Te.call(a,"html",(d=a.post,null==d||d===!1?d:d.message),f)))+"\n            </div>\n        </div>\n    </div>\n</li>\n"}function cc(){return"post-reply"}function dc(a){var b,c="";return c+='\n                <img src="'+Se((b=a.post,b=null==b||b===!1?b:b.parent,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.avatar,b=null==b||b===!1?b:b.cache,typeof b===Re?b.apply(a):b))+'" class="target-avatar"/>\n            '}function ec(a,b){var d,e,f="";return f+="\n                    ",e={hash:{user:{partial:"profileLink",context:(d=a.post,null==d||d===!1?d:d.author),executePartial:!0},author:{partial:"profileLink",context:(d=a.post,d=null==d||d===!1?d:d.parent,null==d||d===!1?d:d.author),executePartial:!0}},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(user)s replied to %(author)s"),e):Te.call(a,"t",gettext("%(user)s replied to %(author)s"),e)))+"\n                "}function fc(a,b){var d,e,f="";return f+="\n                    \n                    ",e=c["with"].call(a,(d=a.post,null==d||d===!1?d:d.author),{hash:{},inverse:Ue.noop,fn:Ue.program(189,gc,b),data:b}),(e||0===e)&&(f+=e),f+="\n                "}function gc(a,b){var e,f="";return f+="\n                        ",e=Ue.invokePartial(d.profileLink,"profileLink",a,c,d,b),(e||0===e)&&(f+=e),f+="\n                    "}function hc(a){var b,c="";return c+='\n<strong><a href="'+Se((b=a.forum,b=null==b||b===!1?b:b.url,typeof b===Re?b.apply(a):b))+'">'+Se((b=a.forum,b=null==b||b===!1?b:b.name,typeof b===Re?b.apply(a):b))+"</a></strong>\n"}function ic(a,b){var d,e="";return e+='\n    <span class="publisher-anchor-color">\n        ',d=c["if"].call(a,a.id&&"0"!==a.id,{hash:{},inverse:Ue.program(196,kc,b),fn:Ue.program(194,jc,b),data:b}),(d||0===d)&&(e+=d),e+="\n    </span>\n"}function jc(a,b){var d,e="";return e+='\n            <a href="',(d=c.profileUrl)?d=d.call(a,{hash:{},data:b}):(d=a.profileUrl,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'" data-action="profile" data-user="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'">',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d=typeof d===Re?d.apply(a):d),e+=Se(d)+"</a>\n        "}function kc(a,b){var d,e="";return e+="\n            ",(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d=typeof d===Re?d.apply(a):d),e+=Se(d)+"\n        "}function lc(a,b){var d,e,f="";return f+='\n<div>\n    <ul class="notifications" data-role="entries"></ul>\n\n    <div data-role="no-notifications" style="display:none">\n        ',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("You have no notifications."),e):Te.call(a,"t",gettext("You have no notifications."),e)))+'\n    </div>\n\n    <div class="load-more" data-role="more-notifications" style="display:none">\n        <a href="#" data-action="more" class="btn">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Load more notifications"),e):Te.call(a,"t",gettext("Load more notifications"),e)))+"</a>\n    </div>\n</div>\n"}function mc(a,b){var d,e,f="";return f+='\n    <li class="notification ',e=c.unless.call(a,(d=a.notification,null==d||d===!1?d:d.isRead),{hash:{},inverse:Ue.noop,fn:Ue.program(201,nc,b),data:b}),(e||0===e)&&(f+=e),f+='">\n        <div class="indicator"></div>\n\n        ',e=c["if"].call(a,(d=a.notification,null==d||d===!1?d:d.post),{hash:{},inverse:Ue.program(205,pc,b),fn:Ue.program(203,oc,b),data:b}),(e||0===e)&&(f+=e),f+="\n    </li>\n"}function nc(){return"unseen"}function oc(a,b){var d,e,f="";return f+='\n            \n\n            <div class="avatar">\n                <img src="'+Se((d=a.notification,d=null==d||d===!1?d:d.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'" />\n            </div>\n            <p>\n                ',e={hash:{user:{partial:"profileLink",context:(d=a.notification,d=null==d||d===!1?d:d.post,null==d||d===!1?d:d.author),executePartial:!0},article:{partial:"postLink",context:(d=a.notification,null==d||d===!1?d:d.post),executePartial:!0}},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(user)s has replied to you on %(article)s"),e):Te.call(a,"t",gettext("%(user)s has replied to you on %(article)s"),e)))+'\n            <p class="notification-meta">'+Se((d=a.notification,d=null==d||d===!1?d:d.relativeCreatedAt,typeof d===Re?d.apply(a):d))+'\n                <span class="bullet" aria-hidden="true"></span> <a href="'+Se((d=a.notification,d=null==d||d===!1?d:d.post,d=null==d||d===!1?d:d.forum,d=null==d||d===!1?d:d.url,typeof d===Re?d.apply(a):d))+'">'+Se((d=a.notification,d=null==d||d===!1?d:d.post,d=null==d||d===!1?d:d.forum,d=null==d||d===!1?d:d.name,typeof d===Re?d.apply(a):d))+"</a>\n            </p>\n        "}function pc(a,b){var d,e,f="";return f+='\n            \n            <div class="avatar">\n                <img src="https://twimg0-a.akamaihd.net/profile_images/2305121474/zcrps8sb7b8zk6ezamf5.png"/>\n            </div>\n            <p class="publisher-anchor-color">',e={hash:{},data:b},f+=Se((d=c.html,d?d.call(a,(d=a.notification,d=null==d||d===!1?d:d.formatted,null==d||d===!1?d:d.text),e):Te.call(a,"html",(d=a.notification,d=null==d||d===!1?d:d.formatted,null==d||d===!1?d:d.text),e)))+'</p>\n            <p class="notification-meta">\n                '+Se((d=a.notification,d=null==d||d===!1?d:d.relativeCreatedAt,typeof d===Re?d.apply(a):d))+"\n            </p>\n        "}function qc(a,b){var d,e="";return e+="\n    ",d=c["if"].call(a,"undefined"==typeof a.url,{hash:{},inverse:Ue.program(210,sc,b),fn:Ue.program(208,rc,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function rc(a,b){var d,e,f="";return f+="\n        ",e={hash:{},data:b},f+=Se((d=c.html,d?d.call(a,(d=a.thread,null==d||d===!1?d:d.title),e):Te.call(a,"html",(d=a.thread,null==d||d===!1?d:d.title),e)))+"\n    "}function sc(a,b){var d,e,f="";return f+='\n        <a class="publisher-anchor-color" href="',(d=c.url)?d=d.call(a,{hash:{},data:b}):(d=a.url,d=typeof d===Re?d.apply(a):d),f+=Se(d)+'">',e={hash:{},data:b},f+=Se((d=c.html,d?d.call(a,(d=a.thread,null==d||d===!1?d:d.title),e):Te.call(a,"html",(d=a.thread,null==d||d===!1?d:d.title),e)))+"</a>\n    "}function tc(a,b){var d,e,f="";return f+='\n<li class="post\n    ',e=c["if"].call(a,(d=a.post,(null==d||d===!1?d:d.isDeleted)||(d=a.post,null==d||d===!1?d:d.isMinimized)),{hash:{},inverse:Ue.noop,fn:Ue.program(213,uc,b),data:b}),(e||0===e)&&(f+=e),f+='" ',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.id),{hash:{},inverse:Ue.noop,fn:Ue.program(215,vc,b),data:b}),(e||0===e)&&(f+=e),f+='>\n\n    <div data-role="post-content" class="post-content\n        ',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isRealtime),{hash:{},inverse:Ue.noop,fn:Ue.program(217,wc,b),data:b}),(e||0===e)&&(f+=e),f+="\n        ",e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,(null==d||d===!1?d:d.id)===(d=a.session,null==d||d===!1?d:d.id)),{hash:{},inverse:Ue.noop,fn:Ue.program(219,xc,b),data:b}),(e||0===e)&&(f+=e),f+="\n        ",e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isFlaggedByUser),{hash:{},inverse:Ue.noop,fn:Ue.program(221,yc,b),data:b}),(e||0===e)&&(f+=e),f+='\n    ">\n        <div class="indicator"></div>\n\n        ',e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isDeleted),{hash:{},inverse:Ue.program(225,Ac,b),fn:Ue.program(223,zc,b),data:b}),(e||0===e)&&(f+=e),f+=' \n\n        <div data-role="blacklist-form"></div>\n    </div>\n\n    <!-- Child comments are appended here -->\n    <ul data-role="children" class="children"/>\n</li>\n'}function uc(){return" minimized "}function vc(a){var b,c="";return c+='id="post-'+Se((b=a.post,b=null==b||b===!1?b:b.id,typeof b===Re?b.apply(a):b))+'"'}function wc(){return"new"}function xc(){return"authored-by-session-user"}function yc(){return"user-reported"}function zc(a,b){var e,f,g,h="";return h+='\n            <div class="avatar">\n                <img data-src="',g={hash:{},data:b},h+=Se((e=c.g,e?e.call(a,"urls.avatar.generic",g):Te.call(a,"g","urls.avatar.generic",g)))+'" class="user" alt="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Avatar"),g):Te.call(a,"t",gettext("Avatar"),g)))+'" />\n            </div>\n            <div class="post-body">\n                <div class="post-message">\n                    <p>',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("This comment was deleted."),g):Te.call(a,"t",gettext("This comment was deleted."),g)))+'</p>\n                </div>\n\n                <header>\n                    <div class="post-meta">\n                        \n                        ',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("This comment was deleted."),g):Te.call(a,"t",gettext("This comment was deleted."),g)))+"\n                    </div>\n\n                    ",f=Ue.invokePartial(d.postMenu,"postMenu",a,c,d,b),(f||0===f)&&(h+=f),h+="\n                </header>\n            </div>\n        "}function Ac(a,b){var d,e,f="";return f+="\n            ",e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isMinimized),{hash:{},inverse:Ue.program(234,Gc,b),fn:Ue.program(226,Bc,b),data:b}),(e||0===e)&&(f+=e),f+=" \n        "}function Bc(a,b){var e,f,g,h="";return h+="\n                ",e=Ue.invokePartial(d.postUserAvatar,"postUserAvatar",a,c,d,b),(e||0===e)&&(h+=e),h+='\n                <div class="post-body">\n                    <div class="post-message publisher-anchor-color">\n                        ',f=c.unless.call(a,a.created||(e=a.post,null==e||e===!1?e:e.isApproved),{hash:{},inverse:Ue.program(229,Dc,b),fn:Ue.program(227,Cc,b),data:b}),(f||0===f)&&(h+=f),h+='\n                    </div>\n\n                    <header>\n                        <div class="post-meta">\n                            \n                            ',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("This comment is awaiting moderation."),g):Te.call(a,"t",gettext("This comment is awaiting moderation."),g)))+"\n                        </div>\n\n                        ",f=Ue.invokePartial(d.postMenu,"postMenu",a,c,d,b),(f||0===f)&&(h+=f),h+="\n                    </header>\n                </div>\n            "}function Cc(a,b){var d,e,f="";return f+="\n                            <p>",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("This comment is awaiting moderation."),e):Te.call(a,"t",gettext("This comment is awaiting moderation."),e)))+' <a href="#" data-action="reveal">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Show comment."),e):Te.call(a,"t",gettext("Show comment."),e)))+"</a></p>\n                        "}function Dc(a,b){var d,e,f="";return f+="\n                            ",e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.isApproved),{hash:{},inverse:Ue.program(232,Fc,b),fn:Ue.program(230,Ec,b),data:b}),(e||0===e)&&(f+=e),f+="\n                        "}function Ec(a,b){var d,e,f="";return f+="\n                                <p>",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Comment score below threshold."),e):Te.call(a,"t",gettext("Comment score below threshold."),e)))+' <a href="#" data-action="reveal">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Show comment."),e):Te.call(a,"t",gettext("Show comment."),e)))+"</a></p>\n                            "}function Fc(a,b){var d,e,f="";return f+="\n                                <p>",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Your comment is awaiting moderation."),e):Te.call(a,"t",gettext("Your comment is awaiting moderation."),e)))+' <a href="#" data-action="reveal">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("See your comment."),e):Te.call(a,"t",gettext("See your comment."),e)))+'</a>  <a href="http://help.disqus.com/customer/portal/articles/466223" class="help-icon" title="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Why?"),e):Te.call(a,"t",gettext("Why?"),e)))+'" target="_blank"></a> </p>\n                            '}function Gc(a,b){var e,f,g,h="";return h+="\n                ",e=Ue.invokePartial(d.postUserAvatar,"postUserAvatar",a,c,d,b),(e||0===e)&&(h+=e),h+='\n                <div class="post-body">\n                    <header>\n                        ',f=c["if"].call(a,(e=a.post,e=null==e||e===!1?e:e.author,(null==e||e===!1?e:e.id)&&(e=a.post,e=null==e||e===!1?e:e.author,"0"!==(null==e||e===!1?e:e.id))),{hash:{},inverse:Ue.program(241,Lc,b),fn:Ue.program(235,Hc,b),data:b}),(f||0===f)&&(h+=f),h+="\n\n                        ",f=c["if"].call(a,(e=a.post,null==e||e===!1?e:e.parent),{hash:{},inverse:Ue.noop,fn:Ue.program(243,Mc,b),data:b}),(f||0===f)&&(h+=f),h+='\n\n                        <div class="post-meta">\n                            <span class="bullet time-ago-bullet" aria-hidden="true"></span>\n\n                            ',f=c["if"].call(a,(e=a.post,null==e||e===!1?e:e.id),{hash:{},inverse:Ue.program(247,Oc,b),fn:Ue.program(245,Nc,b),data:b}),(f||0===f)&&(h+=f),h+="\n                        </div>\n\n                        ",f=Ue.invokePartial(d.postMenu,"postMenu",a,c,d,b),(f||0===f)&&(h+=f),h+='\n                    </header>\n\n                    \n                    <div class="post-body-inner">\n                        \n                        <div class="post-message-container" data-role="message-container">\n                            \n                            <div data-role="message-content">\n                                <div class="post-message publisher-anchor-color ',f=c["if"].call(a,a.loading,{hash:{},inverse:Ue.noop,fn:Ue.program(9,k,b),data:b}),(f||0===f)&&(h+=f),h+='"\n                                    data-role="message" dir="auto">\n                                    ',f=c["if"].call(a,(e=a.post,""===(null==e||e===!1?e:e.message)),{hash:{},inverse:Ue.program(251,Qc,b),fn:Ue.program(249,Pc,b),data:b}),(f||0===f)&&(h+=f),h+='\n                                </div>\n\n                                <div class="post-media" data-role="post-media-list">\n                                    <ul>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                        <a class="see-more hidden" title="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("see more"),g):Te.call(a,"t",gettext("see more"),g)))+'" data-action="see-more">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("see more"),g):Te.call(a,"t",gettext("see more"),g)))+"</a>\n                    </div>\n\n                    <footer>\n                        ",f=Ue.invokePartial(d.postFooter,"postFooter",a,c,d,b),(f||0===f)&&(h+=f),h+="\n                    </footer>\n                </div>\n\n            "}function Hc(a,b){var d,e,f="";return f+='\n                            <span class="author publisher-anchor-color"><a href="#" data-action="profile" data-user="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'">'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.name,typeof d===Re?d.apply(a):d))+"</a></span>\n                            ",e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,null==d||d===!1?d:d.badge),{hash:{},inverse:Ue.program(238,Jc,b),fn:Ue.program(236,Ic,b),data:b}),(e||0===e)&&(f+=e),f+="\n                        "}function Ic(a){var b,c="";return c+='\n                                <span class="badge" data-type="tracked-badge">'+Se((b=a.post,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.badge,typeof b===Re?b.apply(a):b))+"</span>\n                            "}function Jc(a,b){var d,e,f="";return f+="\n                                ",e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canModerate),{hash:{},inverse:Ue.noop,fn:Ue.program(239,Kc,b),data:b}),(e||0===e)&&(f+=e),f+="\n                            "}function Kc(a,b){var d,e,f="";return f+='\n                                    <span class="badge moderator">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Mod"),e):Te.call(a,"t",gettext("Mod"),e)))+"</span>\n                                "}function Lc(a){var b,c="";return c+='\n                            <span class="author">'+Se((b=a.post,b=null==b||b===!1?b:b.author,b=null==b||b===!1?b:b.name,typeof b===Re?b.apply(a):b))+"</span>\n                        "
}function Mc(a,b){var d,e,f="";return f+='\n                            <span><a href="#comment-'+Se((d=a.post,d=null==d||d===!1?d:d.parent,typeof d===Re?d.apply(a):d))+'" class="parent-link" data-role="parent-link"><i aria-hidden="true" class="icon-forward" title="in reply to"></i> ',(e=c.parentAuthorName)?e=e.call(a,{hash:{},data:b}):(e=a.parentAuthorName,e=typeof e===Re?e.apply(a):e),f+=Se(e)+"</a></span>\n                        "}function Nc(a){var b,c="";return c+='\n                                <a href="#comment-'+Se((b=a.post,b=null==b||b===!1?b:b.id,typeof b===Re?b.apply(a):b))+'" data-role="relative-time" class="time-ago" title="'+Se((b=a.post,b=null==b||b===!1?b:b.formattedCreatedAt,typeof b===Re?b.apply(a):b))+'">\n                                    '+Se((b=a.post,b=null==b||b===!1?b:b.relativeCreatedAt,typeof b===Re?b.apply(a):b))+'\n                                </a>\n\n                                \n                                <span class="bullet total-votes-bullet" aria-hidden="true"></span>\n\n                                <span class="total-votes total-likes">\n                                    <span data-role="likes">'+Se((b=a.post,b=null==b||b===!1?b:b.likes,typeof b===Re?b.apply(a):b))+'</span>\n                                    <i class="icon icon-arrow-2"></i>\n                                </span>\n\n                                <span class="total-votes total-dislikes">\n                                    <span data-role="dislikes">'+Se((b=a.post,b=null==b||b===!1?b:b.dislikes,typeof b===Re?b.apply(a):b))+'</span>\n                                    <i class="icon icon-arrow"></i>\n                                </span>\n                            '}function Oc(a){var b,c="";return c+='\n                                <span class="time-ago" data-role="relative-time" title="'+Se((b=a.post,b=null==b||b===!1?b:b.formattedCreatedAt,typeof b===Re?b.apply(a):b))+'">\n                                    '+Se((b=a.post,b=null==b||b===!1?b:b.relativeCreatedAt,typeof b===Re?b.apply(a):b))+"\n                                </span>\n                            "}function Pc(a,b){var d,e,f="";return f+="\n                                        <p><i>",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("This comment has no content."),e):Te.call(a,"t",gettext("This comment has no content."),e)))+"</i></p>\n                                    "}function Qc(a,b){var d,e,f="";return f+="\n                                        ",e={hash:{},data:b},f+=Se((d=c.html,d?d.call(a,(d=a.post,null==d||d===!1?d:d.message),e):Te.call(a,"html",(d=a.post,null==d||d===!1?d:d.message),e)))+"\n                                    "}function Rc(a,b){var d,e,f="";return f+='\n    \n    <div data-role="post-media">\n        \n        <a class="media-button media-button-expand publisher-color publisher-border-color" href="'+Se((d=a.media,d=null==d||d===!1?d:d.url,typeof d===Re?d.apply(a):d))+'" target="_blank" data-action="expand"\n                title="',e=c["if"].call(a,(d=a.media,null==d||d===!1?d:d.title),{hash:{},inverse:Ue.noop,fn:Ue.program(254,Sc,b),data:b}),(e||0===e)&&(f+=e),f+='">\n            ',e=c["if"].call(a,(d=a.model,null==d||d===!1?d:d.providerIcon),{hash:{},inverse:Ue.noop,fn:Ue.program(257,Uc,b),data:b}),(e||0===e)&&(f+=e),f+="\n            "+Se((d=a.model,d=null==d||d===!1?d:d.providerExpandMessage,typeof d===Re?d.apply(a):d))+'\n        </a>\n        <a class="media-button media-button-contract publisher-color publisher-border-color" href="#" target="_blank" data-action="contract">\n            <i class="icon-cancel publisher-background-color"></i> '+Se((d=a.model,d=null==d||d===!1?d:d.providerCollapseMessage,typeof d===Re?d.apply(a):d))+'\n        </a>\n        \n        <div class="media-content-loader" data-role="content-loader"></div>\n        \n        <div data-role="content-placeholder" class="media-content-placeholder"></div>\n    </div>\n'}function Sc(a,b){var d,e,f="";return e=c["if"].call(a,(d=a.media,null==d||d===!1?d:d.providerName),{hash:{},inverse:Ue.noop,fn:Ue.program(255,Tc,b),data:b}),(e||0===e)&&(f+=e),f+=Se((d=a.media,d=null==d||d===!1?d:d.title,typeof d===Re?d.apply(a):d))}function Tc(a){var b,c="";return c+=Se((b=a.media,b=null==b||b===!1?b:b.providerName,typeof b===Re?b.apply(a):b))+" &ndash; "}function Uc(a){var b,c="";return c+='<i class="'+Se((b=a.model,b=null==b||b===!1?b:b.providerIcon,typeof b===Re?b.apply(a):b))+' publisher-background-color"></i>'}function Vc(a,b){var d,e="";return e+='\n    <a href="',(d=c.imageUrl)?d=d.call(a,{hash:{},data:b}):(d=a.imageUrl,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'" target="_blank">\n        <img src="',(d=c.thumbnailUrl)?d=d.call(a,{hash:{},data:b}):(d=a.thumbnailUrl,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'" data-post="',(d=c.postId)?d=d.call(a,{hash:{},data:b}):(d=a.postId,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'"/>\n    </a>\n'}function Wc(a,b){var d,e,f="";return f+="\n    ",e=c["if"].call(a,(d=a.model,null==d||d===!1?d:d.deferred),{hash:{},inverse:Ue.program(264,Yc,b),fn:Ue.program(262,Xc,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function Xc(a,b){var d,e="";return e+='\n        \n        <a href="',(d=c.href)?d=d.call(a,{hash:{},data:b}):(d=a.href,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'">',(d=c.text)?d=d.call(a,{hash:{},data:b}):(d=a.text,d=typeof d===Re?d.apply(a):d),e+=Se(d)+"</a>\n    "}function Yc(a,b){var d,e,f="";return f+='\n        \n        <a href="',(d=c.href)?d=d.call(a,{hash:{},data:b}):(d=a.href,d=typeof d===Re?d.apply(a):d),f+=Se(d)+'" class="post-media-link" data-action="expand-collapse-media">',e=c["if"].call(a,(d=a.model,null==d||d===!1?d:d.providerIcon),{hash:{},inverse:Ue.noop,fn:Ue.program(265,Zc,b),data:b}),(e||0===e)&&(f+=e),(e=c.mediaLinkText)?e=e.call(a,{hash:{},data:b}):(e=a.mediaLinkText,e=typeof e===Re?e.apply(a):e),f+=Se(e),e=c["if"].call(a,a.domain,{hash:{},inverse:Ue.noop,fn:Ue.program(267,$c,b),data:b}),(e||0===e)&&(f+=e),f+="</a>\n    "}function Zc(a){var b,c="";return c+='<i class="'+Se((b=a.model,b=null==b||b===!1?b:b.providerIcon,typeof b===Re?b.apply(a):b))+'"></i>'}function $c(a,b){var d,e="";return e+='<span class="post-media-link-domain"> &mdash; ',(d=c.domain)?d=d.call(a,{hash:{},data:b}):(d=a.domain,d=typeof d===Re?d.apply(a):d),e+=Se(d)+"</span>"}function _c(a,b){var d,e,f,g="";return g+='\n    <li data-role="post-media">\n        <a class="media-webpage publisher-anchor-color" href="'+Se((d=a.media,d=null==d||d===!1?d:d.url,typeof d===Re?d.apply(a):d))+'" target="_blank">\n            \n            <div class="media-webpage-title">',f={hash:{},data:b},g+=Se((d=c.truncateWords,d?d.call(a,(d=a.media,null==d||d===!1?d:d.title),60,f):Te.call(a,"truncateWords",(d=a.media,null==d||d===!1?d:d.title),60,f)))+'</div>\n            <div class="media-webpage-domain">',(e=c.domain)?e=e.call(a,{hash:{},data:b}):(e=a.domain,e=typeof e===Re?e.apply(a):e),g+=Se(e)+"</div>\n        </a>\n    </li>\n"}function ad(a,b){var d,e,f="";return f+="\n    ",e=c.each.call(a,(d=a.post,null==d||d===!1?d:d.media),{hash:{},inverse:Ue.noop,fn:Ue.programWithDepth(bd,b,a),data:b}),(e||0===e)&&(f+=e),f+="\n"}function bd(a,b,d){var e,f="";return f+="\n        ",e=c["if"].call(a,"1"===a.type||"5"===a.type,{hash:{},inverse:Ue.noop,fn:Ue.programWithDepth(cd,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n        ",e=c["if"].call(a,"2"===a.type,{hash:{},inverse:Ue.noop,fn:Ue.programWithDepth(dd,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n        ",e=c["if"].call(a,"4"===a.type,{hash:{},inverse:Ue.noop,fn:Ue.programWithDepth(ed,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n    "}function cd(a,b,d){var e,f="";return f+='\n            \n            <li><a href="',(e=c.location)?e=e.call(a,{hash:{},data:b}):(e=a.location,e=typeof e===Re?e.apply(a):e),f+=Se(e)+'" target="_blank"><img data-src="',(e=c.location)?e=e.call(a,{hash:{},data:b}):(e=a.location,e=typeof e===Re?e.apply(a):e),f+=Se(e)+"?w="+Se((e=d.thumbnailWidth,typeof e===Re?e.apply(a):e))+"&h="+Se((e=d.thumbnailHeight,typeof e===Re?e.apply(a):e))+'" data-post="'+Se((e=d.post,e=null==e||e===!1?e:e.cid,typeof e===Re?e.apply(a):e))+'" /></a></li>\n        '}function dd(a,b,d){var e,f="";return f+='\n            \n            <li><a href="http://www.youtube.com/v/',(e=c.location)?e=e.call(a,{hash:{},data:b}):(e=a.location,e=typeof e===Re?e.apply(a):e),f+=Se(e)+'&hl=en_US&fs=1&" target="_blank"><img data-src="',(e=c.thumbnailURL)?e=e.call(a,{hash:{},data:b}):(e=a.thumbnailURL,e=typeof e===Re?e.apply(a):e),f+=Se(e)+'" data-post="'+Se((e=d.post,e=null==e||e===!1?e:e.cid,typeof e===Re?e.apply(a):e))+'" /></a></li>\n        '}function ed(a,b,c){var d,e="";return e+='\n            \n            <li><a href="'+Se((d=a.metadata,d=null==d||d===!1?d:d.url,typeof d===Re?d.apply(a):d))+'" target="_blank"><img data-src="'+Se((d=a.metadata,d=null==d||d===!1?d:d.medium,typeof d===Re?d.apply(a):d))+'" data-post="'+Se((d=c.post,d=null==d||d===!1?d:d.cid,typeof d===Re?d.apply(a):d))+'" /></a></li>\n        '}function fd(){var a="";return a+="\n    \n"}function gd(a,b){var d,e,f,g="";return g+='\n    <a href="#" class="vote-up ',e=c["if"].call(a,(d=a.post,(null==d||d===!1?d:d.userScore)>0),{hash:{},inverse:Ue.noop,fn:Ue.program(282,hd,b),data:b}),(e||0===e)&&(g+=e),g+=" count-"+Se((d=a.post,d=null==d||d===!1?d:d.likes,typeof d===Re?d.apply(a):d))+'" data-action="upvote" title="',e=c.unless.call(a,(d=a.post,null==d||d===!1?d:d.likes),{hash:{},inverse:Ue.noop,fn:Ue.program(284,id,b),data:b}),(e||0===e)&&(g+=e),g+='">\n        <span class="updatable count" data-role="likes">'+Se((d=a.post,d=null==d||d===!1?d:d.likes,typeof d===Re?d.apply(a):d))+'</span>\n        <span class="control"><i aria-hidden="true" class="icon icon-arrow-2"></i></span>\n    </a>\n    <a class="vote-down ',e=c["if"].call(a,(d=a.post,(null==d||d===!1?d:d.userScore)<0),{hash:{},inverse:Ue.noop,fn:Ue.program(286,jd,b),data:b}),(e||0===e)&&(g+=e),g+=" count-"+Se((d=a.post,d=null==d||d===!1?d:d.dislikes,typeof d===Re?d.apply(a):d))+'" ',e=c["if"].call(a,(d=a.session,null==d||d===!1?d:d.id),{hash:{},inverse:Ue.noop,fn:Ue.program(288,kd,b),data:b}),(e||0===e)&&(g+=e),g+=' title="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Vote down"),f):Te.call(a,"t",gettext("Vote down"),f)))+'">\n        <span class="updatable count" data-role="dislikes">'+Se((d=a.post,d=null==d||d===!1?d:d.dislikes,typeof d===Re?d.apply(a):d))+'</span>\n        <span class="control"><i aria-hidden="true" class="icon icon-arrow"></i></span>\n        ',e=c.unless.call(a,(d=a.session,null==d||d===!1?d:d.id),{hash:{},inverse:Ue.noop,fn:Ue.program(290,ld,b),data:b}),(e||0===e)&&(g+=e),g+="\n    </a>\n"}function hd(){return"upvoted"}function id(a,b){var d,e;return e={hash:{},data:b},Se((d=c.t,d?d.call(a,gettext("Vote up"),e):Te.call(a,"t",gettext("Vote up"),e)))}function jd(){return"downvoted"}function kd(){return'href="#" data-action="downvote"'}function ld(a,b){var d,e,f="";return f+='<span class="tooltip">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("You must sign in to down-vote this post."),e):Te.call(a,"t",gettext("You must sign in to down-vote this post."),e)))+"</span>"}function md(a,b){var d,e,f,g="";return g+='\n    <ul class="post-menu" data-role="menu">\n        <li class="collapse">\n            <a href="#" data-action="collapse" title="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Collapse"),f):Te.call(a,"t",gettext("Collapse"),f)))+'"><span></span></a>\n        </li>\n        <li class="expand">\n            <a href="#" data-action="collapse" title="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Expand"),f):Te.call(a,"t",gettext("Expand"),f)))+'"><span>+</span></a>\n        </li>\n\n        <li class="dropdown" role="menu">\n            ',e=c["if"].call(a,(d=a.post,(null==d||d===!1?d:d.id)&&(d=a.post,(null==d||d===!1?d:d.isMinimized)!==!0)&&(d=a.post,(null==d||d===!1?d:d.isDeleted)!==!0)),{hash:{},inverse:Ue.noop,fn:Ue.program(293,nd,b),data:b}),(e||0===e)&&(g+=e),g+="\n        </li>\n    </ul>\n"}function nd(a,b){var d,e,f="";return f+="\n                ",e=c["if"].call(a,(d=a.session,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canModerate),{hash:{},inverse:Ue.program(296,pd,b),fn:Ue.program(294,od,b),data:b}),(e||0===e)&&(f+=e),f+="\n            "}function od(a,b){var d,e,f="";return f+='\n                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><b\n                            class="caret"></b></a>\n                    <ul class="dropdown-menu invisible">\n                        <li><a href="#" data-action="spam">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Mark as Spam"),e):Te.call(a,"t",gettext("Mark as Spam"),e)))+'</a></li>\n                        <li><a href="#" data-action="delete">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Delete"),e):Te.call(a,"t",gettext("Delete"),e)))+'</a> </li>\n                        <li><a href="#" data-action="blacklist">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Blacklist"),e):Te.call(a,"t",gettext("Blacklist"),e)))+'</a> </li>\n                        <li>\n                            <a href="',e={hash:{},data:b},f+=Se((d=c.g,d?d.call(a,"urls.moderate",e):Te.call(a,"g","urls.moderate",e)))+"#/approved/search/id:"+Se((d=a.post,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'"\n                               target="_blank">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Moderate"),e):Te.call(a,"t",gettext("Moderate"),e)))+"</a>\n                        </li>\n                    </ul>\n                "}function pd(a,b){var d,e,f="";return f+="\n                    ",e=c["if"].call(a,(d=a.session,(null==d||d===!1?d:d.id)&&(d=a.post,null==d||d===!1?d:d.author)&&(d=a.post,d=null==d||d===!1?d:d.author,(null==d||d===!1?d:d.id)===(d=a.session,null==d||d===!1?d:d.id))),{hash:{},inverse:Ue.program(299,rd,b),fn:Ue.program(297,qd,b),data:b}),(e||0===e)&&(f+=e),f+="\n                "}function qd(a,b){var d,e,f="";return f+='\n                        <a class="dropdown-toggle" data-toggle="dropdown"\n                           href="#"><b class="caret"></b></a>\n                        <ul class="dropdown-menu invisible">\n                            <li><a href="#" data-action="delete">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Delete"),e):Te.call(a,"t",gettext("Delete"),e)))+'</a></li>\n                            <li><a href="#" data-action="flag">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Flag as inappropriate"),e):Te.call(a,"t",gettext("Flag as inappropriate"),e)))+"</a>\n                            </li>\n                        </ul>\n                    "}function rd(a,b){var d,e,f="";return f+='\n                        <a class="dropdown-toggle" href="#" data-action="flag"\n                           data-role="flag" title="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Flag as inappropriate"),e):Te.call(a,"t",gettext("Flag as inappropriate"),e)))+'">\n                            <i aria-hidden="true" class="icon icon-untitled-3"></i>\n                        </a>\n                    '}function sd(a,b){var d,e,f="";return f+="\n    ",e=c["if"].call(a,(d=a.post,null==d||d===!1?d:d.id),{hash:{},inverse:Ue.noop,fn:Ue.program(302,td,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function td(a,b){var e,f,g,h="";return h+='\n        <menu>\n            <li class="realtime" data-role="realtime-notification:'+Se((e=a.post,e=null==e||e===!1?e:e.id,typeof e===Re?e.apply(a):e))+'">\n                <span style="display:none;" class="realtime-replies"></span>\n                <a style="display:none;" href="#" class="btn small" data-action="load-queued-posts"></a>\n                 <!-- Realtime notification about new replies -->\n            </li>\n\n            <li class="voting" data-role="voting">\n                ',f=Ue.invokePartial(d.postVotes,"postVotes",a,c,d,b),(f||0===f)&&(h+=f),h+='\n            </li>\n            <li class="bullet" aria-hidden="true"></li>\n\n            ',f=c.unless.call(a,(e=a.thread,null==e||e===!1?e:e.isClosed),{hash:{},inverse:Ue.noop,fn:Ue.program(303,ud,b),data:b}),(f||0===f)&&(h+=f),h+='\n\n            <li class="share">\n                <a class="toggle"><i class="icon icon-mobile icon-share"></i><span class="text">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Share"),g):Te.call(a,"t",gettext("Share"),g)))+' </span></a>\n                <ul>\n                    <li class="twitter"><a href="#" data-action="share:twitter">Twitter</a></li>\n                    <li class="facebook"><a href="#" data-action="share:facebook">Facebook</a></li>\n                    <li class="link"><a href="#comment-'+Se((e=a.post,e=null==e||e===!1?e:e.id,typeof e===Re?e.apply(a):e))+'">',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Link"),g):Te.call(a,"t",gettext("Link"),g)))+"</a></li>\n                </ul>\n            </li>\n        </menu>\n    "}function ud(a,b){var d,e,f="";return f+="\n                ",e=c["if"].call(a,(d=a.session,(null==d||d===!1?d:d.id)&&(d=a.post,d=null==d||d===!1?d:d.author,(null==d||d===!1?d:d.id)===(d=a.session,null==d||d===!1?d:d.id))&&(d=a.post,null==d||d===!1?d:d.raw_message)),{hash:{},inverse:Ue.noop,fn:Ue.program(304,vd,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n                ",e=c["if"].call(a,(d=a.session,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canReply),{hash:{},inverse:Ue.noop,fn:Ue.program(306,wd,b),data:b}),(e||0===e)&&(f+=e),f+="\n            "}function vd(a,b){var d,e,f="";return f+='\n                    <li class="edit"><a href="#" data-action="edit"><i class="icon icon-mobile icon-pencil"></i><span class="text">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Edit"),e):Te.call(a,"t",gettext("Edit"),e)))+'</span></a></li>\n                    <li class="bullet" aria-hidden="true"></li>\n                '}function wd(a,b){var d,e,f="";return f+='\n                    <li class="reply"><a href="#" data-action="reply"><i class="icon icon-mobile icon-reply"></i><span class="text">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Reply"),e):Te.call(a,"t",gettext("Reply"),e)))+'</span></a></li>\n                    <li class="bullet" aria-hidden="true"></li>\n                '}function xd(a,b){var d,e,f="";return f+="\n    ",e=c["if"].call(a,(d=a.post,d=null==d||d===!1?d:d.author,(null==d||d===!1?d:d.id)&&(d=a.post,d=null==d||d===!1?d:d.author,"0"!==(null==d||d===!1?d:d.id))),{hash:{},inverse:Ue.program(311,zd,b),fn:Ue.program(309,yd,b),data:b}),(e||0===e)&&(f+=e),f+="\n"}function yd(a,b){var d,e,f="";return f+='\n        <div class="avatar hovercard">\n            <a href="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.profileUrl,typeof d===Re?d.apply(a):d))+'" class="user"\n               data-action="profile" data-user="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'">\n                <img data-src="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'"\n                     alt="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Avatar"),e):Te.call(a,"t",gettext("Avatar"),e)))+'"/>\n            </a>\n        </div>\n    '}function zd(a,b){var d,e,f="";return f+='\n        <div class="avatar">\n            <div class="user"><img data-src="'+Se((d=a.post,d=null==d||d===!1?d:d.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'"\n                                   class="user" alt="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Avatar"),e):Te.call(a,"t",gettext("Avatar"),e)))+'"/></div>\n        </div>\n    '}function Ad(a,b){var d,e,f="";return f+='\n    <a href="#" class="btn small play pause" data-action="realtime:toggle"><span></span>',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Realtime"),e):Te.call(a,"t",gettext("Realtime"),e)))+"</a>\n"}function Bd(a,b){var d,e="";return e+="\n    ",d=c["if"].call(a,1===a.comments,{hash:{},inverse:Ue.program(318,Dd,b),fn:Ue.program(316,Cd,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Cd(a,b){var d,e,f="";return f+="\n        ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Show One New Comment"),e):Te.call(a,"t",gettext("Show One New Comment"),e)))+"\n    "}function Dd(a,b){var d,e,f="";return f+="\n        ",e={hash:{comments:a.comments},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Show %(comments)s New Comments"),e):Te.call(a,"t",gettext("Show %(comments)s New Comments"),e)))+"\n    "}function Ed(a,b){var d,e="";return e+="\n    ",d=c["if"].call(a,1===a.replies,{hash:{},inverse:Ue.program(323,Gd,b),fn:Ue.program(321,Fd,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Fd(a,b){var d,e,f="";return f+='\n        <span class="indicator"></span>',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Show 1 new reply"),e):Te.call(a,"t",gettext("Show 1 new reply"),e)))+"\n    "}function Gd(a,b){var d,e,f="";return f+='\n        <span class="indicator"></span>',e={hash:{replies:a.replies},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Show %(replies)s new replies"),e):Te.call(a,"t",gettext("Show %(replies)s new replies"),e)))+"\n    "}function Hd(a,b){var d,e,f="";return f+="\n    <!doctype html>\n\n    <html>\n        <style>\n            html * {\n                margin: 0;\n                padding: 0;\n                cursor: pointer;\n           }\n\n            div {\n                text-align: center;\n                font-family: \"Helvetica Neue\", Helvetica, sans-serif;\n                border: 2px solid #ccc;\n                background: #f4f4f4;\n                background-color: rgba(248, 248, 248, 0.98);\n                background-repeat: repeat-x;\n                background-image: -khtml-gradient(linear, left top, left bottom, from(rgba(253, 253, 253, 0.8)), to(rgba(248, 248, 248, 0.98)));\n                background-image: -moz-linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\n                background-image: -ms-linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\n                background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(253, 253, 253, 0.8)), color-stop(100%, rgba(248, 248, 248, 0.98)));\n                background-image: -webkit-linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\n                background-image: -o-linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\n                background-image: linear-gradient(top, rgba(253, 253, 253, 0.8), rgba(248, 248, 248, 0.98));\n                filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='rgba(253, 253, 253, 0.8)', endColorstr='rgba(248, 248, 248, 0.98)', GradientType=0);\n                -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n                -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n                color: #777;\n                padding: 7px 0;\n                margin: 0;\n                filter: alpha(opacity=90);\n                -khtml-opacity: 0.9;\n                -moz-opacity: 0.9;\n                opacity: 0.9;\n                cursor: pointer;\n                font-size: 13px;\n                line-height: 1;\n                z-index: 1000;\n           }\n\n            div.north {\n                border-top: 0;\n                -webkit-border-radius: 0 0 4px 4px;\n                -moz-border-radius: 0 0 4px 4px;\n                border-radius: 0 0 4px 4px;\n           }\n\n            div.south {\n                border-bottom: 0;\n                -webkit-border-radius: 4px 4px 0 0;\n                -moz-border-radius: 4px 4px 0 0;\n                border-radius: 4px 4px 0 0;\n           }\n        </style>\n\n        <div class=\"",(d=c.orientation)?d=d.call(a,{hash:{},data:b}):(d=a.orientation,d=typeof d===Re?d.apply(a):d),f+=Se(d)+'" id="message">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("This text should be here."),e):Te.call(a,"t",gettext("This text should be here."),e)))+"</div>\n    </html>\n"}function Id(a,b){var d,e="";return e+="\n    ",d=c["if"].call(a,"north"===a.orientation,{hash:{},inverse:Ue.program(333,Md,b),fn:Ue.program(328,Jd,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function Jd(a,b){var d,e="";return e+="\n        ",d=c["if"].call(a,1===a.num,{hash:{},inverse:Ue.program(331,Ld,b),fn:Ue.program(329,Kd,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function Kd(a,b){var d,e,f="";return f+="\n            <p>",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("One new comment above."),e):Te.call(a,"t",gettext("One new comment above."),e)))+"</p>\n        "}function Ld(a,b){var d,e,f="";return f+="\n            <p>",e={hash:{num:a.num},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(num)s new comments above."),e):Te.call(a,"t",gettext("%(num)s new comments above."),e)))+"</p>\n        "}function Md(a,b){var d,e="";return e+="\n        ",d=c["if"].call(a,1===a.num,{hash:{},inverse:Ue.program(336,Od,b),fn:Ue.program(334,Nd,b),data:b}),(d||0===d)&&(e+=d),e+="\n    "}function Nd(a,b){var d,e,f="";return f+="\n            <p>",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("One new comment below."),e):Te.call(a,"t",gettext("One new comment below."),e)))+"</p>\n        "}function Od(a,b){var d,e,f="";return f+="\n            <p>",e={hash:{num:a.num},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(num)s new comments below."),e):Te.call(a,"t",gettext("%(num)s new comments below."),e)))+"</p>\n        "}function Pd(a,b){var d,e,f,g="";return g+='\n    <ul class="suggestions">\n        <li class="header">\n            <h5>',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("in this conversation"),f):Te.call(a,"t",gettext("in this conversation"),f)))+"</h5>\n        </li>\n    ",e=c.each.call(a,a.users,{hash:{},inverse:Ue.noop,fn:Ue.program(339,Qd,b),data:b}),(e||0===e)&&(g+=e),g+="\n    </ul>\n"}function Qd(a,b){var d,e,f="";return f+='\n        <li data-cid="',(d=c.cid)?d=d.call(a,{hash:{},data:b}):(d=a.cid,d=typeof d===Re?d.apply(a):d),f+=Se(d)+'">\n            <img src="'+Se((d=a.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'" class="avatar">\n            <span>',e={hash:{},data:b},f+=Se((d=c.any,d?d.call(a,a.name,a.username,e):Te.call(a,"any",a.name,a.username,e)))+"</span>\n        </li>\n    "}function Rd(a,b){var d,e,f,g="";return g+='\n    <div class="thread-likes ',e=c["if"].call(a,(d=a.thread,(null==d||d===!1?d:d.userScore)>0),{hash:{},inverse:Ue.noop,fn:Ue.program(282,hd,b),data:b}),(e||0===e)&&(g+=e),g+='" data-role="vote-button">\n        <a href="#" data-action="upvote" title="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Star this discussion"),f):Te.call(a,"t",gettext("Star this discussion"),f)))+'">\n            <span class="notch"></span>\n            <span class="icon-star"></span>\n            <span class="counter"><span data-role="like-count">'+Se((d=a.thread,d=null==d||d===!1?d:d.likes,typeof d===Re?d.apply(a):d))+'</span></span>\n            <span class="check-mark"></span>\n        </a>\n    </div>\n'}function Sd(a,b){var d,e,f="";return f+='\n    <a href="#" data-action="',e=c["if"].call(a,(d=a.thread,null==d||d===!1?d:d.isClosed),{hash:{},inverse:Ue.program(346,Ud,b),fn:Ue.program(344,Td,b),data:b}),(e||0===e)&&(f+=e),f+='-thread">\n    ',e=c["if"].call(a,(d=a.thread,null==d||d===!1?d:d.isClosed),{hash:{},inverse:Ue.program(350,Wd,b),fn:Ue.program(348,Vd,b),data:b}),(e||0===e)&&(f+=e),f+="\n    </a>\n"}function Td(){return"open"}function Ud(){return"close"}function Vd(a,b){var d,e,f="";return f+="\n        ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Open Thread"),e):Te.call(a,"t",gettext("Open Thread"),e)))+"\n    "}function Wd(a,b){var d,e,f="";return f+="\n        ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Close Thread"),e):Te.call(a,"t",gettext("Close Thread"),e)))+"\n    "}function Xd(a,b){var d,e,f,g="";return g+='\n<div>\n    <div class="avatar">\n        ',e=c["if"].call(a,(d=a.author,(null==d||d===!1?d:d.id)&&(d=a.author,"0"!==(null==d||d===!1?d:d.id))),{hash:{},inverse:Ue.program(355,Zd,b),fn:Ue.program(353,Yd,b),data:b}),(e||0===e)&&(g+=e),g+="\n    </div>\n\n    <div>\n        <p>\n            <strong>\n                ",e=c["if"].call(a,(d=a.author,(null==d||d===!1?d:d.id)&&(d=a.author,"0"!==(null==d||d===!1?d:d.id))),{hash:{},inverse:Ue.program(359,_d,b),fn:Ue.program(357,$d,b),data:b}),(e||0===e)&&(g+=e),g+="\n            </strong>\n            &mdash; ",f={hash:{},data:b},g+=Se((d=c.html,d?d.call(a,a.message,f):Te.call(a,"html",a.message,f)))+"\n        </p>\n    </div>\n</div>\n"}function Yd(a,b){var d,e,f="";return f+='\n            <a href="'+Se((d=a.author,d=null==d||d===!1?d:d.profileUrl,typeof d===Re?d.apply(a):d))+'" class="user" data-action="profile" data-user="'+Se((d=a.author,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'">\n                <img data-src="'+Se((d=a.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'" alt="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Avatar"),e):Te.call(a,"t",gettext("Avatar"),e)))+'"/>\n            </a>\n        '}function Zd(a,b){var d,e,f="";return f+='\n            <div class="user">\n                <img data-src="'+Se((d=a.author,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'" class="user" alt="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Avatar"),e):Te.call(a,"t",gettext("Avatar"),e)))+'"/>\n            </div>\n        '}function $d(a,b){var d,e,f="";return f+='\n                    <a href="'+Se((d=a.author,d=null==d||d===!1?d:d.profileUrl,typeof d===Re?d.apply(a):d))+'" class="user" data-action="profile" data-user="'+Se((d=a.author,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'">\n                    ',e={hash:{},data:b},f+=Se((d=c.any,d?d.call(a,(d=a.author,null==d||d===!1?d:d.name),(d=a.author,null==d||d===!1?d:d.username),e):Te.call(a,"any",(d=a.author,null==d||d===!1?d:d.name),(d=a.author,null==d||d===!1?d:d.username),e)))+"</a>\n                "}function _d(a,b){var d,e,f="";return f+='\n                    <span class="user">',e={hash:{},data:b},f+=Se((d=c.any,d?d.call(a,(d=a.author,null==d||d===!1?d:d.name),(d=a.author,null==d||d===!1?d:d.username),e):Te.call(a,"any",(d=a.author,null==d||d===!1?d:d.name),(d=a.author,null==d||d===!1?d:d.username),e)))+"</span>\n                "}function ae(a,b){var d,e,f="";return f+='\n<li class="top-user">\n    <div class="avatar">\n        ',e=c["if"].call(a,(d=a.user,(null==d||d===!1?d:d.id)&&(d=a.user,"0"!==(null==d||d===!1?d:d.id))),{hash:{},inverse:Ue.program(364,ce,b),fn:Ue.program(362,be,b),data:b}),(e||0===e)&&(f+=e),f+='\n    </div>\n\n    <div>\n        <h5>\n            <span class="publisher-anchor-color">\n                ',e=c["if"].call(a,(d=a.user,(null==d||d===!1?d:d.id)&&(d=a.user,"0"!==(null==d||d===!1?d:d.id))),{hash:{},inverse:Ue.program(368,ee,b),fn:Ue.program(366,de,b),data:b}),(e||0===e)&&(f+=e),f+="\n            </span>\n        </h5>\n\n        <p>\n        ",e=c["if"].call(a,(d=a.user,1===(null==d||d===!1?d:d.numPosts)),{hash:{},inverse:Ue.noop,fn:Ue.program(167,Vb,b),data:b}),(e||0===e)&&(f+=e),f+="\n        ",e=c["if"].call(a,(d=a.user,(null==d||d===!1?d:d.numPosts)>=2),{hash:{},inverse:Ue.noop,fn:Ue.program(370,fe,b),data:b}),(e||0===e)&&(f+=e),f+="\n        </p>\n    </div>\n</li>\n"}function be(a,b){var d,e,f="";return f+='\n            <a href="#" class="user" data-action="profile" data-user="'+Se((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'">\n                <img data-src="'+Se((d=a.user,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'" alt="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Avatar"),e):Te.call(a,"t",gettext("Avatar"),e)))+'"/>\n            </a>\n        '}function ce(a,b){var d,e,f="";return f+='\n            <div class="user">\n                <img data-src="'+Se((d=a.user,d=null==d||d===!1?d:d.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'" class="user" alt="',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Avatar"),e):Te.call(a,"t",gettext("Avatar"),e)))+'"/>\n            </div>\n        '
}function de(a,b){var d,e,f="";return f+='\n                    <a href="'+Se((d=a.user,d=null==d||d===!1?d:d.profileUrl,typeof d===Re?d.apply(a):d))+'" data-action="profile" data-user="'+Se((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'">\n                    ',e={hash:{},data:b},f+=Se((d=c.any,d?d.call(a,(d=a.user,null==d||d===!1?d:d.name),(d=a.user,null==d||d===!1?d:d.username),e):Te.call(a,"any",(d=a.user,null==d||d===!1?d:d.name),(d=a.user,null==d||d===!1?d:d.username),e)))+"</a>\n                "}function ee(a,b){var d,e,f="";return f+="\n                    ",e={hash:{},data:b},f+=Se((d=c.any,d?d.call(a,(d=a.author,null==d||d===!1?d:d.name),(d=a.author,null==d||d===!1?d:d.username),e):Te.call(a,"any",(d=a.author,null==d||d===!1?d:d.name),(d=a.author,null==d||d===!1?d:d.username),e)))+"\n                "}function fe(a,b){var d,e,f="";return f+="\n            ",e={hash:{numPosts:(d=a.user,null==d||d===!1?d:d.numPosts)},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(numPosts)s comments"),e):Te.call(a,"t",gettext("%(numPosts)s comments"),e)))+"\n        "}function ge(a,b){var d,e,f,g="";return g+='\n<li data-role="thread-',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===Re?d.apply(a):d),g+=Se(d)+'">\n\n    \n\n    <h4><span class="publisher-anchor-color"><a href="',(d=c.url)?d=d.call(a,{hash:{},data:b}):(d=a.url,d=typeof d===Re?d.apply(a):d),g+=Se(d)+'">',f={hash:{},data:b},g+=Se((d=c.html,d?d.call(a,a.title,f):Te.call(a,"html",a.title,f)))+'</a></span></h4>\n    <ul class="meta">\n        <li class="likes">\n            <span class="votes">',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Up votes"),f):Te.call(a,"t",gettext("Up votes"),f)))+"</span> ",(e=c.numLikes)?e=e.call(a,{hash:{},data:b}):(e=a.numLikes,e=typeof e===Re?e.apply(a):e),g+=Se(e)+"\n        </li>\n\n        ",e=c["if"].call(a,a.numPosts>0,{hash:{},inverse:Ue.noop,fn:Ue.program(373,he,b),data:b}),(e||0===e)&&(g+=e),g+='\n        <li class="bullet"></li>\n        <li class="time">',(e=c.timeAgo)?e=e.call(a,{hash:{},data:b}):(e=a.timeAgo,e=typeof e===Re?e.apply(a):e),g+=Se(e)+'</li>\n    </ul>\n\n    <div class="top-thread-post" data-role="top-thread-post">\n        \n    </div>\n</li>\n'}function he(a,b){var d,e="";return e+='\n        <li class="bullet"></li>\n        <li class="comments">\n            <a href="',(d=c.url)?d=d.call(a,{hash:{},data:b}):(d=a.url,d=typeof d===Re?d.apply(a):d),e+=Se(d)+'">\n            ',d=c["if"].call(a,1===a.numPosts,{hash:{},inverse:Ue.program(376,je,b),fn:Ue.program(374,ie,b),data:b}),(d||0===d)&&(e+=d),e+="\n            </a>\n        </li>\n        "}function ie(a,b){var d,e,f="";return f+="\n                ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("1 comment"),e):Te.call(a,"t",gettext("1 comment"),e)))+"\n            "}function je(a,b){var d,e,f="";return f+="\n                ",e={hash:{numPosts:a.numPosts},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(numPosts)s comments"),e):Te.call(a,"t",gettext("%(numPosts)s comments"),e)))+"\n            "}function ke(a,b){var d,e,f="";return f+='\n<div class="tooltip-outer upvoters-outer">\n    <div class="tooltip upvoters ',e=c.unless.call(a,(d=a.users,null==d||d===!1?d:d.length),{hash:{},inverse:Ue.noop,fn:Ue.program(379,le,b),data:b}),(e||0===e)&&(f+=e),f+='">\n        <ul class="scroll-measure" data-role="content">\n            ',e=c["if"].call(a,(d=a.users,null==d||d===!1?d:d.length),{hash:{},inverse:Ue.program(384,oe,b),fn:Ue.program(381,me,b),data:b}),(e||0===e)&&(f+=e),f+="\n            \n            ",e=c["if"].call(a,a.guestCount,{hash:{},inverse:Ue.noop,fn:Ue.program(387,qe,b),data:b}),(e||0===e)&&(f+=e),f+='\n        </ul>\n    </div>\n    <div class="tooltip-point hidden"></div>\n</div>\n'}function le(){return"guests-only"}function me(a,b){var d,e="";return e+="\n                ",d=c.each.call(a,a.users,{hash:{},inverse:Ue.noop,fn:Ue.program(382,ne,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function ne(a,b){var e,f="";return f+="\n                    ",e=Ue.invokePartial(d.upvoter,"upvoter",a,c,d,b),(e||0===e)&&(f+=e),f+="\n                "}function oe(a,b){var d,e="";return e+="\n                ",d=c["if"].call(a,a.isLoading,{hash:{},inverse:Ue.noop,fn:Ue.program(385,pe,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function pe(){return'\n                    <li class="loading"></li>\n                '}function qe(a,b){var e,f="";return f+="\n                ",e=Ue.invokePartial(d.guestUpvoter,"guestUpvoter",a,c,d,b),(e||0===e)&&(f+=e),f+="\n            "}function re(a,b){var d,e,f,g="";return g+='\n<li class="user ',d=c["if"].call(a,a.highlight,{hash:{},inverse:Ue.noop,fn:Ue.program(390,se,b),data:b}),(d||0===d)&&(g+=d),g+='" data-action="profile" data-user="',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a.id,d=typeof d===Re?d.apply(a):d),g+=Se(d)+'">\n    \n    <a class="avatar" href="#" title="',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a.name,d=typeof d===Re?d.apply(a):d),g+=Se(d)+'">\n        <img src="'+Se((d=a.avatar,d=null==d||d===!1?d:d.cache,typeof d===Re?d.apply(a):d))+'" alt="',f={hash:{},data:b},g+=Se((d=c.t,d?d.call(a,gettext("Avatar"),f):Te.call(a,"t",gettext("Avatar"),f)))+'" />\n    </a>\n    <a class="username" href="#" title="',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===Re?e.apply(a):e),g+=Se(e)+'">\n        ',(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===Re?e.apply(a):e),g+=Se(e)+"\n    </a>\n</li>\n"}function se(){return"highlight"}function te(a,b){var d,e="";return e+="\n",d=c["if"].call(a,a.guestCount,{hash:{},inverse:Ue.noop,fn:Ue.program(393,ue,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function ue(a,b){var e,f,g,h="";return h+='\n    <li class="user ',e=c["if"].call(a,a.highlight,{hash:{},inverse:Ue.noop,fn:Ue.program(390,se,b),data:b}),(e||0===e)&&(h+=e),h+='" data-role="guest">\n        <span class="avatar" title="',e=Ue.invokePartial(d.guestUpvoterText,"guestUpvoterText",a,c,d,b),(e||0===e)&&(h+=e),h+='">\n            <img src="',(e=c.guestAvatarUrl)?e=e.call(a,{hash:{},data:b}):(e=a.guestAvatarUrl,e=typeof e===Re?e.apply(a):e),h+=Se(e)+'" alt="',g={hash:{},data:b},h+=Se((e=c.t,e?e.call(a,gettext("Avatar"),g):Te.call(a,"t",gettext("Avatar"),g)))+'" />\n        </span>\n        <span class="username" title="',f=Ue.invokePartial(d.guestUpvoterText,"guestUpvoterText",a,c,d,b),(f||0===f)&&(h+=f),h+='">\n            ',f=Ue.invokePartial(d.guestUpvoterText,"guestUpvoterText",a,c,d,b),(f||0===f)&&(h+=f),h+="\n        </span>\n    </li>\n"}function ve(a,b){var d,e="";return e+="\n    ",d=c["if"].call(a,a.guestCount>1,{hash:{},inverse:Ue.program(398,xe,b),fn:Ue.program(396,we,b),data:b}),(d||0===d)&&(e+=d),e+="\n"}function we(a,b){var d,e,f="";return f+=" ",e={hash:{guestCount:a.guestCount},data:b},f+=Se((d=c.t,d?d.call(a,gettext("%(guestCount)s Guest Votes"),e):Te.call(a,"t",gettext("%(guestCount)s Guest Votes"),e)))+" "}function xe(a,b){var d,e,f="";return f+=" ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("1 Guest Vote"),e):Te.call(a,"t",gettext("1 Guest Vote"),e)))+" "}function ye(a,b){var d,e,f="";return f+='\n    <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n        <span class="cog"><i aria-hidden="true" class="icon-cog"></i></span> <span class="caret"></span>\n    </a>\n    <ul class="dropdown-menu">\n        ',e=c["if"].call(a,(d=a.user,(null==d||d===!1?d:d.id)&&(d=a.user,"0"!==(null==d||d===!1?d:d.id))),{hash:{},inverse:Ue.noop,fn:Ue.program(401,ze,b),data:b}),(e||0===e)&&(f+=e),f+="\n        ",e=c.unless.call(a,(d=a.user,null==d||d===!1?d:d.id),{hash:{},inverse:Ue.noop,fn:Ue.program(406,Ce,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n        ",e=c["if"].call(a,(d=a.user,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canModerate),{hash:{},inverse:Ue.noop,fn:Ue.program(409,Ee,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n        ",e=c.unless.call(a,(d=a.user,null==d||d===!1?d:d.isGlobalAdmin),{hash:{},inverse:Ue.noop,fn:Ue.program(416,Ie,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n        ",e=c["if"].call(a,(d=a.user,null==d||d===!1?d:d.isGlobalAdmin),{hash:{},inverse:Ue.noop,fn:Ue.program(421,Le,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n        ",e=c["if"].call(a,(d=a.user,(null==d||d===!1?d:d.id)&&(d=a.user,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canReply)),{hash:{},inverse:Ue.noop,fn:Ue.program(423,Me,b),data:b}),(e||0===e)&&(f+=e),f+="\n    </ul>\n"}function ze(a,b){var d,e,f,g="";return g+='\n            <li>\n                <a href="'+Se((d=a.user,d=null==d||d===!1?d:d.profileUrl,typeof d===Re?d.apply(a):d))+'" data-role="user-profile-link" data-action="profile" data-user="'+Se((d=a.user,d=null==d||d===!1?d:d.id,typeof d===Re?d.apply(a):d))+'">\n                    ',f={hash:{},data:b},g+=Se((d=c.any,d?d.call(a,(d=a.user,null==d||d===!1?d:d.name),(d=a.user,null==d||d===!1?d:d.username),f):Te.call(a,"any",(d=a.user,null==d||d===!1?d:d.name),(d=a.user,null==d||d===!1?d:d.username),f)))+"\n                </a>\n            </li>\n            ",e=c["if"].call(a,a.newMedia,{hash:{},inverse:Ue.noop,fn:Ue.program(402,Ae,b),data:b}),(e||0===e)&&(g+=e),g+="\n            ",e=c.unless.call(a,(d=a.user,null==d||d===!1?d:d.remote),{hash:{},inverse:Ue.noop,fn:Ue.program(404,Be,b),data:b}),(e||0===e)&&(g+=e),g+="\n        "}function Ae(){var a="";return a+='\n                <li>\n                    \n                    <a href="#" class="media-toggle-on" data-action="toggle-media">Display Media</a>\n                    <a href="#" class="media-toggle-off" data-action="toggle-media">Hide Media</a>\n                </li>\n            '}function Be(a,b){var d,e,f="";return f+='\n                \n                <li>\n                    <a href="',e={hash:{},data:b},f+=Se((d=c.g,d?d.call(a,"urls.editProfile",e):Te.call(a,"g","urls.editProfile",e)))+'">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Edit Settings"),e):Te.call(a,"t",gettext("Edit Settings"),e)))+"</a>\n                </li>\n            "}function Ce(a,b){var d,e,f="";return f+="\n            ",e=c["if"].call(a,(d=a.user,d=null==d||d===!1?d:d.thread,null==d||d===!1?d:d.canReply),{hash:{},inverse:Ue.noop,fn:Ue.program(407,De,b),data:b}),(e||0===e)&&(f+=e),f+="\n        "}function De(a,b){var d,e,f="";return f+='\n                <li>\n                    <a href="#" data-action="auth:disqus">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Login"),e):Te.call(a,"t",gettext("Login"),e)))+"</a>\n                </li>\n            "}function Ee(a,b){var d,e,f="";return f+='\n        <li data-role="toggle-thread">\n            <a href="#" data-action="',e=c["if"].call(a,(d=a.thread,null==d||d===!1?d:d.isClosed),{hash:{},inverse:Ue.program(346,Ud,b),fn:Ue.program(344,Td,b),data:b}),(e||0===e)&&(f+=e),f+='-thread">\n            ',e=c["if"].call(a,(d=a.thread,null==d||d===!1?d:d.isClosed),{hash:{},inverse:Ue.program(412,Ge,b),fn:Ue.program(410,Fe,b),data:b}),(e||0===e)&&(f+=e),f+="\n            </a>\n        </li>\n\n            ",e=c.unless.call(a,(d=a.user,null==d||d===!1?d:d.isGlobalAdmin),{hash:{},inverse:Ue.noop,fn:Ue.program(414,He,b),data:b}),(e||0===e)&&(f+=e),f+="\n\n        "}function Fe(a,b){var d,e,f="";return f+="\n                ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Open Thread"),e):Te.call(a,"t",gettext("Open Thread"),e)))+"\n            "}function Ge(a,b){var d,e,f="";return f+="\n                ",e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Close Thread"),e):Te.call(a,"t",gettext("Close Thread"),e)))+"\n            "}function He(a,b){var d,e,f="";return f+='\n            <li>\n                <a href="http://docs.disqus.com/kb/2012/">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Help"),e):Te.call(a,"t",gettext("Help"),e)))+"</a>\n            </li>\n            "}function Ie(a,b){var d,e,f="";return f+='\n        <li>\n            <a href="\n                ',d=c["if"].call(a,a.feedbackUrl,{hash:{},inverse:Ue.program(419,Ke,b),fn:Ue.program(417,Je,b),data:b}),(d||0===d)&&(f+=d),f+='"\n            target="_blank">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Send Feedback"),e):Te.call(a,"t",gettext("Send Feedback"),e)))+"</a>\n        </li>\n        "}function Je(a,b){var d,e="";return e+="\n                    ",(d=c.feedbackUrl)?d=d.call(a,{hash:{},data:b}):(d=a.feedbackUrl,d=typeof d===Re?d.apply(a):d),e+=Se(d)+"\n                "}function Ke(){return"\n                     https://www.surveymonkey.com/s/5RBPTTZ\n                "}function Le(a,b){var d,e,f="";return f+='\n        <li>\n            <a href="#" data-action="debug">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Debug"),e):Te.call(a,"t",gettext("Debug"),e)))+'</a>\n        </li>\n\n        <li>\n            <a href="#" data-action="repair">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Repair"),e):Te.call(a,"t",gettext("Repair"),e)))+"</a>\n        </li>\n        "}function Me(a,b){var d,e,f="";return f+='\n        <li>\n            <a href="'+Se((d=a.user,d=null==d||d===!1?d:d.logoutUrl,typeof d===Re?d.apply(a):d))+'" data-action="logout">',e={hash:{},data:b},f+=Se((d=c.t,d?d.call(a,gettext("Logout"),e):Te.call(a,"t",gettext("Logout"),e)))+"</a>\n        </li>\n        "}this.compilerInfo=[2,">= 1.0.0-rc.3"],c=c||a.helpers,d=d||a.partials,e=e||{};var Ne,Oe,Pe,Qe="",Re="function",Se=this.escapeExpression,Te=c.helperMissing,Ue=this;return Pe={hash:{},inverse:Ue.noop,fn:Ue.program(1,f,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"alert",Pe):Te.call(b,"partial","alert",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(8,j,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"blacklist",Pe):Te.call(b,"partial","blacklist",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(13,m,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"captcha",Pe):Te.call(b,"partial","captcha",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(15,n,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"communityForum",Pe):Te.call(b,"partial","communityForum",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(17,o,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"community",Pe):Te.call(b,"partial","community",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(19,p,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"contextCard",Pe):Te.call(b,"partial","contextCard",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(21,q,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"dashboard",Pe):Te.call(b,"partial","dashboard",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(23,r,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"edit",Pe):Te.call(b,"partial","edit",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(25,s,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"editTextarea",Pe):Te.call(b,"partial","editTextarea",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(27,t,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"fullscreenEdit",Pe):Te.call(b,"partial","fullscreenEdit",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(29,u,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"followButton",Pe):Te.call(b,"partial","followButton",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(42,D,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"formUser",Pe):Te.call(b,"partial","formUser",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(44,E,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"form",Pe):Te.call(b,"partial","form",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(70,T,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"loginButtons",Pe):Te.call(b,"partial","loginButtons",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(81,$,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"guestForm",Pe):Te.call(b,"partial","guestForm",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(96,gb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"audienceSync",Pe):Te.call(b,"partial","audienceSync",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(98,hb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"mediaUpload",Pe):Te.call(b,"partial","mediaUpload",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(103,kb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"legacyMediaUpload",Pe):Te.call(b,"partial","legacyMediaUpload",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(105,lb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"fullscreenFormHeader",Pe):Te.call(b,"partial","fullscreenFormHeader",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(118,sb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"fullscreenLogoutMenu",Pe):Te.call(b,"partial","fullscreenLogoutMenu",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(120,tb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"fullscreenHeader",Pe):Te.call(b,"partial","fullscreenHeader",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(123,vb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"fullscreenSurvey",Pe):Te.call(b,"partial","fullscreenSurvey",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(134,Cb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"hovercard",Pe):Te.call(b,"partial","hovercard",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(141,Gb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"hovercardCounters",Pe):Te.call(b,"partial","hovercardCounters",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(150,Lb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"hovercardActions",Pe):Te.call(b,"partial","hovercardActions",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(152,Mb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"layout",Pe):Te.call(b,"partial","layout",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(157,Pb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postSort",Pe):Te.call(b,"partial","postSort",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(166,Ub,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postCount",Pe):Te.call(b,"partial","postCount",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(171,Xb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"topNavigation",Pe):Te.call(b,"partial","topNavigation",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(174,Zb,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"mainNavigation",Pe):Te.call(b,"partial","mainNavigation",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(177,_b,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"networkActivity",Pe):Te.call(b,"partial","networkActivity",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(179,ac,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"networkActivityThreadEntry",Pe):Te.call(b,"partial","networkActivityThreadEntry",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(181,bc,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"networkActivityPostEntry",Pe):Te.call(b,"partial","networkActivityPostEntry",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(191,hc,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"networkForumLink",Pe):Te.call(b,"partial","networkForumLink",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(193,ic,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"profileLink",Pe):Te.call(b,"partial","profileLink",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(198,lc,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"notifications",Pe):Te.call(b,"partial","notifications",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(200,mc,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"notification",Pe):Te.call(b,"partial","notification",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(207,qc,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postLink",Pe):Te.call(b,"partial","postLink",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(212,tc,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"post",Pe):Te.call(b,"partial","post",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(253,Rc,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postMedia",Pe):Te.call(b,"partial","postMedia",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(259,Vc,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postMediaImage",Pe):Te.call(b,"partial","postMediaImage",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(261,Wc,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postMediaInlineLink",Pe):Te.call(b,"partial","postMediaInlineLink",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(269,_c,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postMediaWebPagePreview",Pe):Te.call(b,"partial","postMediaWebPagePreview",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(271,ad,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postMediaLegacyList",Pe):Te.call(b,"partial","postMediaLegacyList",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(279,fd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postEditHide",Pe):Te.call(b,"partial","postEditHide",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(281,gd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postVotes",Pe):Te.call(b,"partial","postVotes",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(292,md,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postMenu",Pe):Te.call(b,"partial","postMenu",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(301,sd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postFooter",Pe):Te.call(b,"partial","postFooter",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(308,xd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"postUserAvatar",Pe):Te.call(b,"partial","postUserAvatar",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(313,Ad,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"realtimeToggleButton",Pe):Te.call(b,"partial","realtimeToggleButton",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(315,Bd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"realtimeCommentNotification",Pe):Te.call(b,"partial","realtimeCommentNotification",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(320,Ed,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"realtimeReplyNotification",Pe):Te.call(b,"partial","realtimeReplyNotification",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(325,Hd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"realtimeIndicator",Pe):Te.call(b,"partial","realtimeIndicator",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(327,Id,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"realtimeIndicatorText",Pe):Te.call(b,"partial","realtimeIndicatorText",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(338,Pd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"suggestions",Pe):Te.call(b,"partial","suggestions",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(341,Rd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"threadVotes",Pe):Te.call(b,"partial","threadVotes",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(343,Sd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"toggleThreadLink",Pe):Te.call(b,"partial","toggleThreadLink",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(352,Xd,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"topThreadPost",Pe):Te.call(b,"partial","topThreadPost",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(361,ae,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"topUser",Pe):Te.call(b,"partial","topUser",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(372,ge,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"topThread",Pe):Te.call(b,"partial","topThread",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(378,ke,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"upvoters",Pe):Te.call(b,"partial","upvoters",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(389,re,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"upvoter",Pe):Te.call(b,"partial","upvoter",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(392,te,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"guestUpvoter",Pe):Te.call(b,"partial","guestUpvoter",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(395,ve,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"guestUpvoterText",Pe):Te.call(b,"partial","guestUpvoterText",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n",Pe={hash:{},inverse:Ue.noop,fn:Ue.program(400,ye,e),data:e},Ne=c.partial,Oe=Ne?Ne.call(b,"userMenu",Pe):Te.call(b,"partial","userMenu",Pe),(Oe||0===Oe)&&(Qe+=Oe),Qe+="\n"});